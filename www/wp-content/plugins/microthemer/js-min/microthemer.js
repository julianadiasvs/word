jQuery(document).ready(function(D){var I=TvrMT.TvrCom,m=TvrMT.MTF,u=TvrMT.MTdetached,s=TvrMT.detachedWin,O=TvrMT.mod.MTace,p=TvrMT.mod.MTint,T=TvrMT.mod.MTloop,q=TvrMT.mod.MTdd,z=TvrMT.mod.MTsave,e=TvrMT.mod.MTsass,d=TvrMT.mod.MTgrid,v=(TvrMT.mod.MTtransform,TvrMT.mod.MTwidget),t=TvrMT.data.dyn.pref,r=parseInt(t.allow_scss),a=TvrMT.data.dyn.client_scss,o=r&&!a,t=D("body").width();TvrMT.TvrUi={cssFilters:TvrMT.data.prog.CSSFilters,cssProps:TvrMT.data.prog.CSSProps,gatheredCSS:TvrMT.data.prog.gatheredCSS,templates:TvrMT.data.templates,blog_details:TvrMT.data.dyn.blog_details,TVR_DEV_MODE:TVR_DEV_MODE,scss_enabled:r,client_scss:a,server_scss:o,pref:TvrMT.data.dyn.pref,uiData:TvrMT.data.dyn.ui,sass:!1,jsuVersion:7,jsuEvents:{js_css_compilation:3,synced_code_gui:4,imp_only_sh_and_grad_fix:5,property_value_structure:6,separate_css_units:7},sRules:CSSUtilities,reinitRules:!0,tooMuchCSS:!1,tmp:{},uiUrl:D("#ui-url").attr("rel"),pluginUrl:D("#plugin-url").attr("rel"),adminUrl:D("#admin-url").attr("rel"),microUrl:D("#micro-url").attr("rel"),cssMin:D("#css-min").attr("rel"),cssStub:D("#css-stub").attr("rel"),totalSecs:parseInt(D("#total-sec-count").text()),TvrSugCSS:{},highlightEnabled:!1,colorPickerDragging:!1,progStatus:[],intelli:!1,awaitingIFrame:!0,placeholderFrame:!0,compProps:{},grid:{container:!1,items:[]},intelliCompProps:{},nodeCSS:{},intellinodeCSS:{},mixedElKey:0,update_gf_url:!1,g_url:"",comboScrollTopPos:0,pageOrPostID:!1,numSug:100,numRecent:6,numSampled:15,numMiniTiles:12,numSavedTiles:56,numSiteTiles:56,maxSelsPerFolder:41,proGroups:{flexbox:1,grid:1,animation:1,transition:1,transform:1},samplingProps:["font_family","font_size","line_height","color","padding_top","padding_right","padding_bottom","padding_left","margin_top","margin_right","margin_bottom","margin_left","row_gap","column_gap","border_width","border_radius"],gridTrackProps:["grid-template-rows","grid-template-columns","grid-auto-rows","grid-auto-columns"],propAliases:TvrMT.data.prog.propAliases,cssFuncAliases:TvrMT.data.prog.cssFuncAliases,domChanged:{},mutationObserver:!1,stat:{win:window,doc:document,head:document.head,$doc:D(document),body:D("body"),tvr:D("#tvr"),vis:D("#visual-view"),styleComponents:D("#style-components"),nav:D("#tvr-nav"),mainMenu:D("#tvr-main-menu"),top:D("#v-top-controls"),code:D("#hand-css-area"),codeInner:D("#tvr-inner-code"),grid:D("#grid-control-wrap"),inlineEditor:D("#inline-editor"),adaptableEditor:D("#adaptable-editor"),view:D("#display-css-code-dialog"),res:D("#responsive-bar"),css_icons:D("#css-group-icons"),slider:D("#v-mq-slider"),opts:D("#tvr-options"),front:D("#v-frontend-wrap"),frontInner:D("#v-frontend"),wiz:D("#advanced-wizard"),wizFolder:D("#wizard_folder"),selNaming:D("#advanced-wizard"),breadcrumbs:D("#full-breadcrumbs"),sliderDragbar:D("#mtss-dragbar"),actStyles:D("#actual-styles"),tools:D("#v-left-controls-wrap"),toolsMenu:D("#v-left-controls"),rightStuff:D("#right-stuff-wrap"),iframe:D("#viframe"),iframeDoc:!1,dialogs:D("#dialogs"),cssUnitGrid:D("#css-units-grid"),scss_compile_notes:D("#scss-error-notes"),scss_import_compile_notes:D("#scss-import-error-notes"),scss_error_file:D("#scss-error-file"),widthTest:D("#tvr-width-input"),changeUrlInputWrap:D("#previewPath").parent(),inputWidthCalc:D("#inputWidthCalc")},tOut:6e4,hi:{section:"folder-icon tvr-icon",selector:"selector-icon tvr-icon",tab:"edit-media-queries lg-icon"},baseFontSize:16,browser:D("#user-browser").attr("rel"),meta:{},inputWaitingObj:{},timer:{typing:0,quickTarget:0,deferredTarget:0,prog:[]},jumpTo:!1,something_wrong:!1,debugCount:0,wasOpen:!1,leftMenu:!!D("#v-left-controls").hasClass("show"),dataLoading:!1,intelliAfterLoad:!1,ajaxUrl:D("#wpAjaxUrl").attr("rel"),toolbarHeight:0,frameHeight:0,frameWidth:0,previewWidth:0,rulerVal:0,prev:!1,fullWidth:t,resSliderWidth:0,tabsWidth:0,sortableMenuDims:{},mqs:[],totalSels:parseInt(D("#total-sel-count").text()),trial:"1"!=D("#plugin-trial").attr("rel"),trialNotice:TvrLang.trial_notice,gFontTarget:Object(),startSel:!1,selsToLoad:0,totalToLoad:0,pgInFocusWiz:"font",aceTypingInterval:o?500:50,inputTypingInterval:50,beforeSaveInterval:o?300:1200,beforeAutoConvertInterval:2e3,saveInProgress:!1,pendingAutoSave:function(){return I.obj_length(E.pendingAutoSaveConfig)},pendingAutoSaveConfig:{},reSave:!1,siteUrl:D("#site-url").attr("rel"),homeUrl:D("#home-url").attr("rel"),itemAlreadyExpanded:!1,tooltipDelay:D("#tooltip_delay").attr("rel").toLowerCase(),edge_mode:parseInt(D("#edge-mode").attr("rel")),init:function(){window!=window.top&&window.parent.TvrMT&&(window.location=E.homeUrl),TvrMT.init.add_listeners()},ua_detected:function(){E.something_wrong=!1},JSerrors:[],prevJSerrors:[],catch_js_errors:function(){if(window.top.Cypress||!parseInt(E.pref.monitor_js_errors))return!1;window.onerror=function(e,t,s){E.JSerrors.push({error:e,URL:t,line:s,source:TvrLang.interface}),E.instant_show_js_error("ui")}},instantPreviewNotSass:function(){return!parseInt(E.pref.allow_scss)},instant_show_js_error:function(e){var t=E.JSerrors[0].error,t={short:t+=" (line "+E.JSerrors[0].line+")",long:"<p>"+TvrLang.js_error_site+":</p>"+E.js_error_deets(),type:"warning"};"ui"==e?z.update_full_logs(t):z.log(t)},js_error_deets:function(e){I.startT(arguments);var t="",s=e?E.prevJSerrors:E.JSerrors;if(0<s.length){for(var r in t+="<ol>",s)if(s.hasOwnProperty(r)){var a,o=s[r];for(a in t+="<li>",o)if(o.hasOwnProperty(a)){var n=o[a];if("URL"==a)n='<a target="_blank" href="'+n+'">'+I.root_rel(n)+"</a>",n+=" (line "+o.line+")";else if("line"==a)continue;t+="<b>"+I.ucwords(a)+":</b> "+n+"<br />"}t+="</li>"}t+="</ol>",E.prevJSerrors=D.extend(!0,[],E.JSerrors),E.JSerrors=[]}return I.endT(arguments),t},isProGroup:function(e){e=E.get_meta(e,"group");return E.proGroups[e.groupSlug]},isForbiddenProperty:function(e){return!(E.pref.buyer_validated||!I.isDomEl(e)||!e.hasClass("property-input")||!E.isProGroup(e))&&(e.val(""),alert(TvrLang.trial_notice),!0)},adjust_mqs_for_unit:function(e){I.startT(arguments);var t,s=["min","max"];for(t in e)if(e.hasOwnProperty(t))for(var r=0;r<s.length;++r){var a=s[r];e[t][a]=parseFloat(e[t][a]),e[t][a+"_unit"]&&"px"!=e[t][a+"_unit"]&&(e[t][a]=parseFloat(e[t][a])*E.baseFontSize)}return I.endT(arguments),e},maybe_pair_class:function(e,t){var s=I.get_pseudo_class(e);if(!s)return!1;var r=s[0];if(!E.get_pseudo_config(s)[r].strip)return!1;s="mt-"+I.convert_to_param(r);if("class"==t)return s;if("selector"==t||"full"==t){r=new RegExp(r+"(?!.*"+r+")"),s=e.replace(r,"."+s);return"selector"==t?s:e+", "+s}},get_pseudo_config:function(e){var t,s={};for(t in e)e.hasOwnProperty(t)&&(s[e[t]]={});var r,a=["page_specific","pseudo_elements","pseudo_classes"];for(r in a)if(a.hasOwnProperty(r)){var o,n,i=a[r];for(o in E.cssFilters[i].items)E.cssFilters[i].items.hasOwnProperty(o)&&(n=o.replace("::",":"),(s[o]||s[n])&&(s[n=s[n]?n:o]=D.extend(!0,{},E.cssFilters[i].items[o]),s[n].pCE=o))}return s},psuedo_is_set:function(){var e,t=E.stat.tvr.attr("class"),s=["pseudo_classes","page_specific","pseudo_elements"];for(e in s)if(s.hasOwnProperty(e)&&-1<t.indexOf(s[e]))return!0;return!1},support_sampling:function(e,t){return!0},get_property_tab_control:function(e){e=e.replace(/_/g,"-");return I.checkObject(TvrMT.data.prog.lh,[e,"tab_control"])},pseudo_class_format:function(e){return"filter-"+e.replace(/[:\(\)]+/g,"")},get_pseudo:function(e,t){if("val"==e){t=E.pseudo_class_format(t.pseudoCE);return D("#css-filters").find("span.quick-opts-wrap").find("ul.css-filter-list").find("li."+t).find("input").val()}},iframe_loaded:function(e){m=window.TvrMT.MTF,E.stat.fHTML=e,parseInt(E.pref.grid_highlight)&&E.stat.fHTML.addClass("grid_highlight"),"grid"===E.pref.pg_focus&&E.stat.fHTML.addClass("showGridControls"),E.detached_window_available(!0)&&u.iframe_loaded(),E.briefly_highlight_selector()},keyboard_save_action:function(e,t){E.ua_detected();var s=parseInt(E.pref.show_code_editor)?"full":"inline",r="fullSCSSCompile"===t;O.get_focus_editor().session.getMode();if("inline"==s){if(E.selInFocusID){var a=D("#"+E.selInFocusID+"-code-code-css-"+E.get_mq_focus());if(I.isDomEl(a))return z.ajax_save_settings({$editor:E.stat.adaptableEditor,noSaveDelay:!r,$property:a.find("textarea.property-input"),settings:r?{fullSCSSCompile:1}:{}}),e.preventDefault(),!1;t={},a="All settings saved (Ctrl + S)";r&&(t.fullSCSSCompile=1,a="Full SCSS compile (Ctrl + Alt + P)"),t=z.user_action(t,{items:[a],icon:"save-interface lg-icon"}),z.ajax_save_settings({noSaveDelay:!r,settings:t})}}else O.ace_instant_save(s,O.ace_sync_details.$textarea,E.stat.adaptableEditor,!r,r);e.preventDefault()},setup_keyboard_shortcuts:function(e){var t,a,o;I.startT(arguments),function(e,r,t){function s(e,t,s){e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent("on"+t,s)}function v(e){if("keypress"!=e.type)return l[e.which]||o[e.which]||String.fromCharCode(e.which).toLowerCase();var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}function h(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function b(e,t){var s,r,a=[],o=e;for(o="+"===o?["+"]:(o=o.replace(/\+{2}/g,"+plus")).split("+"),r=0;r<o.length;++r)s=o[r],d[s]&&(s=d[s]),t&&"keypress"!=t&&c[s]&&(s=c[s],a.push("shift")),h(s)&&a.push(s);if(o=s,!(r=t)){if(!i)for(var n in i={},l)95<n&&n<112||l.hasOwnProperty(n)&&(i[l[n]]=n);r=i[o]?"keydown":"keypress"}return"keypress"==r&&a.length&&(r="keydown"),{key:s,modifiers:a,action:r}}function a(e){function i(e){e=e||{};var t,s=!1;for(t in p)e[t]?s=!0:p[t]=0;s||(m=!1)}function l(e,t,s,r,a,o){var n,i=[],l=s.type;if(!_._callbacks[e])return[];for("keyup"==l&&h(e)&&(t=[e]),n=0;n<_._callbacks[e].length;++n){var c,d=_._callbacks[e][n];!r&&d.seq&&p[d.seq]!=d.level||l!=d.action||((c="keypress"==l&&!s.metaKey&&!s.ctrlKey)||(c=d.modifiers,c=t.sort().join(",")===c.sort().join(",")),c&&(c=r&&d.seq==r&&d.level==o,(!r&&d.combo==a||c)&&_._callbacks[e].splice(n,1),i.push(d)))}return i}function c(e,t,s,r){_.stopCallback(t,t.target||t.srcElement,s,r)||!1!==e(t,s)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function t(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t,s=v(e);s&&("keyup"==e.type&&f===s?f=!1:_.handleKey(s,(t=[],(s=e).shiftKey&&t.push("shift"),s.altKey&&t.push("alt"),s.ctrlKey&&t.push("ctrl"),s.metaKey&&t.push("meta"),t),e))}function n(t,e,s,r){function a(e){c(s,e,t),"keyup"!==r&&(f=v(e)),setTimeout(i,10)}for(var o=p[t]=0;o<e.length;++o){var n=o+1===e.length?a:function(e){return function(){m=e,++p[t],clearTimeout(u),u=setTimeout(i,1e3)}}(r||b(e[o+1]).action);d(e[o],n,r,t,o)}}function d(e,t,s,r,a){_._directMap[e+":"+s]=t;var o=(e=e.replace(/\s+/g," ")).split(" ");1<o.length?n(e,o,t,s):(s=b(e,s),_._callbacks[s.key]=_._callbacks[s.key]||[],l(s.key,s.modifiers,{type:s.action},r,e,a),_._callbacks[s.key][r?"unshift":"push"]({callback:t,modifiers:s.modifiers,action:s.action,seq:r,level:a,combo:e}))}var _=this;if(e=e||r,!(_ instanceof a))return new a(e);_.target=e,_._callbacks={},_._directMap={};var u,p={},f=!1,g=!1,m=!1;_._handleKey=function(e,t,s){for(var r=l(e,t,s),a=0,o=!(t={}),n=0;n<r.length;++n)r[n].seq&&(a=Math.max(a,r[n].level));for(n=0;n<r.length;++n)r[n].seq?r[n].level==a&&(o=!0,t[r[n].seq]=1,c(r[n].callback,s,r[n].combo,r[n].seq)):o||c(r[n].callback,s,r[n].combo);r="keypress"==s.type&&g,s.type!=m||h(e)||r||i(t),g=o&&"keydown"==s.type},_._bindMultiple=function(e,t,s){for(var r=0;r<e.length;++r)d(e[r],t,s)},s(e,"keypress",t),s(e,"keydown",t),s(e,"keyup",t)}if(e){var i,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(t=1;t<20;++t)l[111+t]="f"+t;for(t=0;t<=9;++t)l[t+96]=t;a.prototype.bind=function(e,t,s){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,s),this},a.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},a.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},a.prototype.reset=function(){return this._callbacks={},this._directMap={},this},a.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" tvr-mousetrap ")||function e(t,s){return null!==t&&t!==r&&(t===s||e(t.parentNode,s))}(t,this.target))&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},a.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},a.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t]);i=null},(a.init=function(){var e,t=a(r);for(e in t)"_"!==e.charAt(0)&&(a[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))})(),e.TvrMousetrap=a,"undefined"!=typeof module&&module.exports&&(module.exports=a),"function"==typeof define&&define.amd&&define(function(){return a})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?e:null),t=TvrMousetrap,a={},o=t.prototype.stopCallback,t.prototype.stopCallback=function(e,t,s,r){return!!this.paused||!a[s]&&!a[r]&&o.call(this,e,t,s)},t.prototype.bindGlobal=function(e,t,s){if(this.bind(e,t,s),e instanceof Array)for(t=0;t<e.length;t++)a[e[t]]=!0;else a[e]=!0},t.init(),TvrMousetrap.bindGlobal(["command+alt+b","ctrl+alt+b"],function(e){return p.keyboard_toggle_builder(),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+c","ctrl+alt+c"],function(e){return E.toggle_feature(!1,"show_code_editor"),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+d","ctrl+alt+d"],function(e){return E.toggle_feature(!1,"detach_preview"),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+g","ctrl+alt+g"],function(e){return E.show_dialog(E.stat.toolsMenu.find("li.item-display-css-code")),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+h","ctrl+alt+h"],function(e){return E.keyboard_highlight||E.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"reg"}),!(E.keyboard_highlight=1)},"keydown"),TvrMousetrap.bindGlobal(["command+alt+j","ctrl+alt+j"],function(e){return E.toggle_inline_gui(),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+l","ctrl+alt+l"],function(e){return E.toggle_feature(!1,"show_text_labels"),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+n","ctrl+alt+n"],function(e){return E.toggle_preview_page_menu(E.stat.toolsMenu.find(".mt-group-heading-preview_page")),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+p","ctrl+alt+p"],function(e){return E.close_dialog(),E.keyboard_save_action(e,"fullSCSSCompile"),!1},"keypress"),TvrMousetrap.bindGlobal(["command+s","ctrl+s"],function(e){return E.keyboard_save_action(e,"save"),!1}),TvrMousetrap.bindGlobal(["command+alt+t","ctrl+alt+t"],function(e){return E.toggle_feature(!1,"hover_inspect",{noSave:1}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+,","ctrl+alt+,"],function(e){return E.quick_nav(D("#vb-focus-prev")),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+.","ctrl+alt+."],function(e){return E.quick_nav(D("#vb-focus-next")),!1},"keypress"),D(e).on("keydown",function(e){var t;38!==e.which&&40!==e.which||(t=D(e.target),I.isDomEl(t)&&t.hasClass("mt-slider")&&!t.next(".combo-arrow").hasClass("on")&&v.increment_change(e,40===e.which))}),D(e).on("keyup",function(e){return 72==e.keyCode&&E.keyboard_highlight?(e.preventDefault(),E.feature_off(0,"mt_highlight",{fHTML:1,noSave:1,onAgain:E.el_selected?{fHTML:1,noSave:1,con:"intelli"}:0}),E.keyboard_highlight=0,!1):void(13!==e.which&&27!==e.which||(r=!(!e.target||!e.target.className)&&e.target.className)&&(t=e.target.id,s=D(e.target),e=13===e.which,s.closest("body").hasClass("tvr-visual")&&(0<=r.indexOf("selector-css-textarea")||0<=r.indexOf("selector-name-input")?(a=e?".tvr-button":".cancel",s.closest(".float-form").find(".sel-toggles").find(a).trigger("click")):0<=r.indexOf("rename-input")?(a=e?".rename-button":".cancel",s.closest(".edit-section-form").find(a).trigger("click")):"previewPath"===t&&e?(a=e?".rename-button":".cancel",s.closest(".tvr-input-wrap").find(".change-preview-url").trigger("click")):0<=r.indexOf("new-item-input")&&e?s.closest(".tvr-new-item").find(".new-item-add").trigger("click"):"wizard-name"===t||"wizard_folder"===t?(r=E.wiz_update_sel_mode?".wizard-update-cur.mt-full-label":".wizard-add.tvr-button",a=e?r:".hover-inspect-toggle",E.stat.selNaming.find(a).trigger("click")):"import_from_pack_name"!==t&&"export_pack_name"!==t||(a=e?".dialog-button":".close-dialog",s.closest(".tvr-dialog").find(a).trigger("click")))));var t,s,r,a}),I.endT(arguments)},expanded:function(e){var t;if("main_menu"==e)t=D("#tvr-main-menu");else if("quick_section"==e)t=D("#sec-in-focus");else if("quick_selector"==e)t=D("#sel-in-focus");else if("show_css_filters"==e)t=D("#show_css_filters-toggle");else if("mq"==e){e=D("#"+E.selInFocusID);if(!I.isDomEl(e))return!1;t=e.find("span.add-mq")}return t.hasClass("on")},show_main_menu:function(e){if(I.startT(arguments),E.itemAlreadyExpanded)return!1;E.set_popdown_height(".menu-scrollable"),e.addClass("on expanded"),E.stat.vis.addClass("top_menu_showing"),I.endT(arguments)},set_popdown_height:function(e){I.startT(arguments);var t=E.stat.vis.height()-40,s=".menu-scrollable"==e?34:0;D("#main-menu-popdown").css("max-height",t).find(e).css("max-height",t-s),I.endT(arguments)},hide_main_menu:function(){I.startT(arguments),E.clean_tooltips(),E.stat.mainMenu.removeClass("on expanded"),E.open_close_all_folders("close"),E.stat.vis.removeClass("top_menu_showing"),I.endT(arguments)},quick_edit:function(e){if(I.startT(arguments),E.itemAlreadyExpanded)return!1;var t=E.get_meta(D("#"+E.selInFocusID),"selector"),s=e.hasClass("sec-in-focus")?"section":"selector";D("#main-menu-popdown").addClass("bye-for-now"),t.sectionM.addClass("hello-me");var r,a=t.sectionM.find(".menu-arrow"),o=t.selectorM.find(".edit-selector-form");a.hasClass("on")||E.toggle_folder(a,"selector"==s),e.hasClass("sec-in-focus")?(r=t.sectionM,o.hasClass("show")&&E.toggle_modify_selector(o),t.sectionM.find(".folder-icon").removeClass("sortable-icon").attr("title",""),E.set_popdown_height(".section-tag.hello-me")):(r=t.selectorM,o.hasClass("show")||E.toggle_modify_selector(o),t.sectionM.addClass("goodbye-section"),t.selectorM.addClass("hello-me"),E.set_popdown_height(".selector-tag.hello-me")),r.addClass("quick-edit-mode scrollable-area-not-live expanded"),e.addClass("on"),E.stat.vis.addClass("top_menu_showing"),I.endT(arguments)},close_quick_edit:function(){I.startT(arguments),E.clean_tooltips();var e,t,s,r=D("#main-menu-popdown"),a=r.find(".quick-edit-mode");a.hasClass("section-tag")?(t="folder",s=(o=E.get_meta(a,"section")).sectionM,(e=a.find("."+t+"-icon")).addClass("sortable-icon").attr("title",e.data("title"))):(t="selector",(t=(o=E.get_meta(a,"selector")).selectorM.find(".edit-selector-form")).hasClass("show")&&t.removeClass("show"),s=o.sectionM.add(o.selectorM)),a.removeClass("quick-edit-mode scrollable-area-not-live expanded");var o=o.sectionM.find(".menu-arrow");o.hasClass("on")&&E.toggle_folder(o),D("#current-selector").find(".on").removeClass("on"),s.removeClass("hello-me goodbye-section").css("max-height",""),r.removeClass("bye-for-now"),E.stat.vis.removeClass("top_menu_showing"),I.endT(arguments)},close_all_expanded:function(e,t,s){if(I.startT(arguments),!s){var r=e.parent();if(e.hasClass("on")||r.hasClass("quick-edit-wrap")&&r.hasClass("on")?E.itemAlreadyExpanded=!0:E.itemAlreadyExpanded=!1,(I.isDomEl(e.closest(".expanded"))||I.isDomEl(e.closest(".sp-container")))&&!e.hasClass("change-selector"))return I.endT(arguments),!1;if(e.hasClass("ui-menu-item")&&e.closest("#refine-targeting-pane")&&D("#show_css_filters-toggle").hasClass("on"))return!1}r=E.stat.toolsMenu.find(".preview_page");E.expanded("main_menu")?E.hide_main_menu():E.expanded("quick_section")||E.expanded("quick_selector")?E.close_quick_edit():E.expanded("show_css_filters")?E.input_icon_toggle(D("#show_css_filters-toggle")):r.hasClass("expanded")&&E.toggle_preview_page_menu(r.find(".mt-group-heading")),E.colorPickerDragging||E.picker_method("hide"),e&&(e.hasClass("grid-control")||e.hasClass("pg-icon-grid"))&&v.hide_slider_set(),I.endT(arguments)},close_tooltip:function(e,t){e.attr("title",t.text()).removeAttr("aria-describedby"),t.remove()},clean_tooltips:function(){if(I.startT(arguments),"native"==E.tooltipDelay)return!1;if("native"!=E.tooltipDelay){var e,t,s=E.stat.body.data("ui-tooltip");if(I.hasValue(s)){for(var r in s.tooltips)s.tooltips.hasOwnProperty(r)&&(e=D(s.tooltips[r].element[0]),t=D(s.tooltips[r].tooltip[0]),E.close_tooltip(e,t));E.tt=!1,E.tt_trigger={}}}I.endT(arguments)},reset_global_vars:function(){I.startT(arguments),E.selInFocusID="",E.menuSelInFocusID="",E.curSelCSS="#no-element",E.intelli_css="#no-element",I.endT(arguments)},update_global_vars:function(e){I.startT(arguments),E.selInFocusID=e.selectorID,E.menuSelInFocusID=E.selInFocusID.replace("opts","strk"),E.curSelCSS=I.custom_escape_quotes(e.selectorM.find(".selector-css-textarea").val()),E.curSelEls=m?m.jquery_compat_sel_elements(E.curSelCSS):{},I.updateObject(E.uiData,["non_section","meta","last_viewed_selector"],E.selInFocusID),E.dontLogSelectorChange||z.silent_save("",[{trail:["non_section","meta","last_viewed_selector"],action:"replace",data:E.selInFocusID}]);var t=D("#current-selector"),s="",r="";E.is_dis(e.sectionM)&&(s+="item-disabled"),E.is_dis(e.selectorM)&&(r+="item-disabled"),D("#sec-in-focus").hasClass("on")&&(s+=" on"),D("#sel-in-focus").hasClass("on")&&(r+=" on");var a,o,n,i="",l={sec:TvrLang.qedit_current_folder,sel:TvrLang.qedit_current_selector};for(a in l)l.hasOwnProperty(a)&&(o="sec"===a?l[a]:e.selectorCode,n="sec"===a?e.sectionH:e.selectorH,i+='<span id="'+a+'-in-focus" class="'+a+"-in-focus "+("sec"==a?s:r)+' quick-edit-wrap" >',i+='<span class="menu-arrow '+a+'-in-focus tvr-icon"></span>',i+='<span class="quick-menu-text '+a+'-in-focus" ',i+='title="'+I.escapeHTML(o)+'">'+I.escapeHTML(n)+"</span>",i+="</span>");t.html(i);t=TvrLang.update_selector+":\n"+e.sectionH+" >> "+e.selectorH+"\n";D("#wizard-update-cur").attr("title",t),I.endT(arguments)},menu_object:function(e){return D("#"+e.replace("opts","strk"))},section_slug:function(e){var t=D("#"+e);return!!I.isDomEl(t)&&E.get_meta(D("#"+e),"selector").sectionSlug},is_cur:function(e,t){if(I.hasValue(E.selInFocusID)){if("sec"==e){if(t==E.section_slug(E.selInFocusID))return!0}else if("sel"==e&&t==E.selInFocusID)return!0;return!1}},is_dis:function(e){return!!e.hasClass("item-disabled")},allowed_action:function(e,t){I.startT(arguments);var s=!1;return E.trial?("Edit Sel"==t&&I.isDomEl(e.closest(".trial-disabled"))&&(s=!0),"Add Sel"==t&&15<=E.totalSels&&(s=!0),I.endT(arguments),!s||(alert(E.trialNotice),!1)):(I.endT(arguments),!0)},load_css_ref:function(e){I.startT(arguments),E.show_dialog(e),I.endT(arguments)},show_google_fonts_field:function(e){e.is(":visible")?E.show_dialog(e.find(".g-font")):e.show("fast",function(){E.adjust_scroll_buttons(E.get_pg_meta(),"style")})},hide_google_fonts_field:function(e,t){E.gFontTarget.val("").prop("val",""),t.hide("fast",function(){E.adjust_scroll_buttons(E.get_pg_meta(),"style")})},insert_google_font:function(e){E.close_dialog(),E.gFontTarget.val(e).focus(),E.post_edit(E.gFontTarget),z.ajax_save_settings({$property:E.gFontTarget})},launch_img_uploader:function(s){wp.media.editor.send.attachment=function(e,t){t=(e.size?t.sizes[e.size]:t).url;E.update_bg_image(s,t)},wp.media.editor.open("wpMediaFakePostID")},update_bg_image:function(e,t){e=E.get_meta(e,"property").property.find(".property-input");t=-1<t.indexOf(E.siteUrl)&&!parseInt(E.pref.abs_image_paths)?I.root_rel(t,E.siteUrl):t,e.val(t),E.adjust_comp_span(e,"after"),I.scroll_input_end(e),z.ajax_save_settings({$property:e})},clear_bg_image:function(e){I.startT(arguments),E.update_bg_image(e,""),I.endT(arguments)},get_animation_name:function(e){return e.groupTab.find("input.property-input").val()},refresh_event_binding:function(){m&&m.stat.win.MT_Events_Manager&&m.stat.win.MT_Events_Manager.refresh_event_binding()},user_play:function(e,t,s,r){e=e.animationConfig;m&&e.flashCSSRules&&e.animationName&&m.trigger_animation(e,r)},mt_scroll:{style:{offsets:[],rightPositions:[],rightPosIndex:-1},responsive:{offsets:[],rightPositions:[],rightPosIndex:-1},gridcolumns:{offsets:[],rightPositions:[],rightPosIndex:-1},gridrows:{offsets:[],rightPositions:[],rightPosIndex:-1}},scroll_row:function(e){var t,s=e.data("type");if("style"===s||"gridcolumns"===s||"gridrows"===s){var r=E.get_pg_meta();if(!r)return!1;t="style"===s?(o=r.groupTab,r.groupTab.find(".pg-inner")):(o=r.group.find(".tab-control-"+E.pref.grid_focus+"."+s).find(".mt-variable-line")).find(".mt-vl-inner")}else"responsive"===s&&(o=E.stat.res.find(".query-tabs-wrap"),t=E.stat.res.find(".query-tabs"));if(t){r=E.get_row_excess(o,t,s);if(!r)return!1;var a,o=o.width(),n=Math.abs(parseInt(t.css("marginLeft")));if(e.hasClass("mt-scroll-left"))a=E.mt_scroll[s].rightPositions[E.mt_scroll[s].rightPosIndex-1],I.isDefined(a)?(E.mt_scroll[s].rightPositions.splice(E.mt_scroll[s].rightPosIndex,1),E.mt_scroll[s].rightPosIndex--):(a=0,E.mt_scroll[s].rightPositions=[],E.mt_scroll[s].rightPosIndex=-1);else{for(var i=n+o,l=r<i?r:i,c=E.mt_scroll[s].offsets,d=0;d<c.length;d++)if(l<c[d]){var _=c[d-1],u=c[d],l=n<_&&i<u?_:u;break}if(n===l)return!1;E.mt_scroll[s].rightPositions.push(l),E.mt_scroll[s].rightPosIndex++,a=l}a*=-1,t.css("marginLeft",a+"px")}},adjust_scroll_buttons:function(e,t){if(I.startT(arguments),!e&&"responsive"!==t)return!1;var s,r,a,o=!1,n=!1;switch(t){case"style":r=(s=E.get_group(e)).find(".pg-inner"),a=e.selector.find("li.scroll-lr-buttons-"+t),o="code"===e.groupSlug||"grid"===e.groupSlug,n="grid"===e.groupSlug;break;case"responsive":s=E.stat.res.find(".query-tabs-wrap"),r=E.stat.res.find(".query-tabs"),a=E.stat.res.find("div.scroll-lr-buttons");break;case"gridcolumns":case"gridrows":r=(s=e.group.find(".tab-control-"+E.pref.grid_focus+"."+t).find(".mt-variable-line")).find(".mt-vl-inner"),a=e.selector.find("li.scroll-lr-buttons-"+t)}if(!r)return!1;E.get_row_excess(s,r,t,"checkShow")&&!o?(a.addClass("buttons-showing"),s.addClass("hor-scroll-needed"),E.mt_scroll[t].rightPositions=[]):(E.mt_scroll[t].rightPositions=[],E.mt_scroll[t].rightPosIndex=-1,r.css("marginLeft","0px"),a.removeClass("buttons-showing"),s.removeClass("hor-scroll-needed")),n&&E.adjust_grid_line_scroll_buttons(e),I.endT(arguments)},adjust_grid_line_scroll_buttons:function(e){E.adjust_scroll_buttons(e,"gridcolumns"),E.adjust_scroll_buttons(e,"gridrows")},get_row_excess:function(e,t,s,r){I.startT(arguments);var a=e.width(),o=0,n=[],i=e.hasClass("property-grid");return(i?t.children().filter(".tab-control-"+E.pref.grid_focus):t.children()).each(function(e){var t=D(this);t.is(":visible")&&parseInt(t.css("opacity"))&&(o+=t.outerWidth(!0),n.push(o))}),(e.hasClass("property-border")||i)&&(o/=2),0<o-a&&(o+=50),a=o-a,E.mt_scroll[s].offsets=n,I.endT(arguments),0<a&&a},input_icon_toggle:function(e,t,s){I.startT(arguments);var r,a,o,n,i,l,c=e,d=e.attr("data-input-type"),_=e.attr("data-input-level"),u="pgtab"===_?"group":_,p=E.title(e),f=e.hasClass("active")?"":1,g=!1,m=d+"-tracker",v=!1,h={domDepth:_,maxDepth:"selector",clean:{},cleanMaxDepth:"selector"},b="disabled"===d&&"tab"===_?e.closest(".mq-tab").attr("rel"):E.get_mq_focus(),y=E.get_input_stems(b),w=y.mq,y=y.imp;if("important"===d){k="tvr_mcth[non_section][important]"+y+"["+(C=E.get_meta(e,"property")).sectionSlug+"]["+C.selectorSlug+"]["+C.groupSlug+"]["+C.propertySlug+"]";var T=I.get_name_attr_index(C.property.find("input.property-input").attr("name"));!1!==T&&(k+="["+T+"]"),h.mq_key=b,h.recurse_key=["important"],h.clean.selector=[],v=!0}else if("disabled"===d){var x,k,v=!0,C="tab"===(h.itemWasDisabled=_)?E.get_meta(D("#"+E.selInFocusID),"selector"):E.get_meta(e,u);"section"===_?k=(S=E.disabled_quick_edit(C.sectionM,_,C)).find("input.section-display-name").attr("name").replace("[label]","["+d+"]"):"selector"===_?(k=(S=E.disabled_quick_edit(C.selectorM,_,C)).find("input.selector-label").attr("name").replace(/\[label\]$/,"["+d+"]"),h.clean.selector=[[d]]):"tab"===_?(S=e.closest(".mq-tab"),m+="-"+b,k=w+"["+C.sectionSlug+"]["+C.selectorSlug+"][tab]["+d+"]",c=C.selectorM.find("span.edit-selector"),h.domDepth="selector",h.mq_key=b,h.onlyRecurse="all-devices"!==b,h.incRecurse=h.onlyRecurse,h.recurse_key=["m_query"],h.clean.selector=[["tab"],[d]]):"subgroup"===_||"pgtab"===_?(S=e.closest("span.quick-opts-wrap"),x=(y="pgtab"===_)&&e.data("tab-group"),T=y?"pgtab_"+d:"pg_"+d,u=y?e.data("tab-group"):C.subgroupSlug,k=w+"["+C.sectionSlug+"]["+C.selectorSlug+"]["+T+"]["+u+"]",h.domDepth="group",h.mq_key=b,h.onlyRecurse="all-devices"!==b,h.incRecurse=h.onlyRecurse,h.recurse_key=["m_query"],h.clean.selector=[[T],[u]],(g=E.maybe_add_nth_index_filter(y,x,C,e,h.clean.selector))&&(k+="["+g+"]"),_="group"):"script"===_&&(S=e.closest("div.item-row"),k="tvr_preferences[enq_js]["+I.convert_to_param(S.find(".script-name").text())+"][disabled]")}else if("chained"===d)v=!0,C=E.get_meta(e,"subgroup"),f&&(x=E.get_subgroup_or_tabgroup(C,"inputs"),g=(a=!!I.isDomEl(E.inputWaitingObj)&&E.inputWaitingObj)?a.val():"",o=I.isDefined(g),D.fn.MTreverse=[].reverse,x.MTreverse().each(function(e){var t=D(this),s=t.val();o&&t.attr("name")===a.attr("name")&&(n=a),I.isDefined(s)&&(r=t)}),r&&(g=void 0,x=(n=n||r).closest(".property-tag").find(".css_unit-tracker"),I.isDomEl(x)&&(g=n.closest(".property-tag").find(".css_unit-tracker").val()),E.sync_fields(n,C,g))),k=w+"["+C.sectionSlug+"]["+C.selectorSlug+"][pg_"+d+"]["+C.subgroupSlug+"]",h.domDepth="group",h.mq_key=b,h.recurse_key=["m_query"],h.clean.selector=[["pg_"+d],[C.subgroupSlug]];else if("flexitem"===d||"griditem"===d){var S=e.closest("div.property-fields"),w="tvr_mcth["+(C=E.get_meta(S.find("div.sub-label"),"group")).sectionSlug+"]["+C.selectorSlug+"]";if(k=w+"[pg_"+d+"]",h.domDepth="group",h.mq_key=b,h.recurse_key=["m_query"],h.clean.selector=[["pg_"+d]],"griditem"===d){var M={};q.fill_object_from_name(M,k,f);b=f?0:1;return q.fill_object_from_name(M,w+"[nth_item]",b),z.quick_save_data(!1,M),"griditems"!==E.get_grid_focus()&&(E.pref.grid_focus="griditems"),E.trigger_pg_icon_click("grid"),!1}}f?(M='<input class="input-toggle-tracker '+m+'" type="hidden" name="'+k+'" value="1" />',e.addClass("active"),i="add",j=e.attr("data-neg"),c.before(M),"disabled"===d&&S.addClass("item-disabled"),"show_css_filters"===_&&e.addClass("on expanded"),"flexitem"!==d&&"griditem"!==d||S.add(E.stat.grid).addClass("show-single-"+d)):(e.removeClass("active"),i="remove",j=e.attr("data-pos"),(l=c.siblings("."+m)).val(""),"disabled"===d&&S.removeClass("item-disabled"),"show_css_filters"===_&&e.removeClass("on expanded"),"flexitem"!==d&&"griditem"!==d||S.add(E.stat.grid).removeClass("show-single-"+d)),E.refresh_tt(e,j);var c=z.h_i_class(_,C),m=e.attr("class"),S=!1,j=!1;"important"===d&&(m+=" lg-icon",j="i",(S=!!E.chain_is_on(C)&&C.subgroupH+" "+TvrLang.fields_sync)&&!t&&E.sync_important(C,i)),s||(h.M=C,"chained"!==d&&(h.mtData={},q.fill_object_from_name(h.mtData,k,f)),"script"===_?D.extend(!0,E.pref,h.mtData):(t&&(h.return="mtData"),"show_css_filters"!==d&&(h=q.dom_to_data(h)))),f||l.remove(),s||t||"show_css_filters"===_||(h=z.user_action(h,{items:[_],val:p,valTT:S,M:C,pathTT:"section"===_,icon:[{icon:c},{icon:m,iconC:j}]}),v&&E.editor_and_gui()&&C&&C.selector&&O.gui_to_editor(!1,C),z.ajax_save_settings({settings:h})),I.endT(arguments)},get_input_stems:function(e){var t="tvr_mcth",s="";return"all-devices"!==e&&(t+="[non_section][m_query]["+e+"]",s="[m_query]["+e+"]"),{mq:t,imp:s}},maybe_add_nth_index_filter:function(e,t,s,r,a){r=e?s.group.find(".property-tag.tab-control-"+t).first():r.closest(".subgroup-tag").next(".property-tag");if(r.hasClass("has-variable-line"))return!1;r=r.find("input.property-input"),r=!!I.isDomEl(r)&&I.get_name_attr_index(r.attr("name"));return!1!==r&&a.push(["value"],[r]),r},disabled_quick_edit:function(e,t,s){return"section"==t&&E.is_cur("sec",s.sectionSlug)&&(e=e.add("#sec-in-focus")),"selector"==t&&E.is_cur("sel",s.selectorID)&&(e=e.add("#sel-in-focus")),e},auto_clean:function(e,t){I.startT(arguments),I.endT(arguments)},icon:function(e){return""},title:function(e){var t=e.data("ui-tooltip-title");return t||e.attr("title")},enable_tt:function(e){I.startT(arguments),e.tooltip({position:{my:"center top",at:"center bottom+10",collision:"flipfit"},hide:!1,show:{effect:"none",duration:0,delay:E.tooltipDelay},open:function(e,t){I.startT(arguments);var s=E.get_tt(t),r=E.get_tt_trigger(e,this).data("dyn-tt-root");r&&s.html(D("#"+r).attr("title"));r=s.find(".ui-tooltip-content").html();r&&(r=I.regular_escaped_to_non_escaped(r.replace(/&amp;/g,"&").replace(/\n/g,"<br />")),s.html(r)),I.endT(arguments)},close:function(e,t){E.tt=!1,E.tt_trigger={}}}),I.endT(arguments)},get_tt:function(e){return E.tt=e.tooltip},get_tt_trigger:function(e,t){return I.startT(arguments),E.tt_trigger=D(e.originalEvent.target||e.originalEvent.srcElement).closest(D(t).tooltip("option","items")),I.endT(arguments),E.tt_trigger},refresh_tt:function(e,s,r){I.startT(arguments),e.each(function(e){var t=D(this);"native"==E.tooltipDelay||!E.tt||r&&!t.is(r)?(t.attr("title",s),r&&r.data("dyn-tt-root")&&E.update_tt(E.tt,s)):E.update_tt(E.tt,s)}),I.endT(arguments)},update_tt:function(e,t){if(!I.isDomEl(e))return!1;var s=e.find(".ui-tooltip-content");(s=I.isDomEl(s)?s:e).html(t.replace("\n","<br />")),E.tt_trigger.data("ui-tooltip-title",t)},get_all_selector_code:function(){I.startT(arguments);var e,t,s={};for(e in E.uiData)if(E.uiData.hasOwnProperty(e)&&"non_section"!=e&&E.uiData.hasOwnProperty(e))for(var r in E.uiData[e])E.uiData[e].hasOwnProperty(r)&&"this"!=r&&E.uiData[e][r]&&E.uiData[e][r].label&&(t=E.uiData[e][r].label.split("|"),s["strk-"+e+"-"+r]={fName:E.uiData[e].this.label,sName:t[0],code:t[1]});return I.endT(arguments),s},get_dom_item:function(e,t,s,r,a,o){var n,i=a?D.extend(!0,{},e,a):e,s="menu"===s?"strk":"opts";switch(t){case"section":case"selector":case"group":n=i.trail.item;break;case"subgroup":case"property":var l=I.prop_to_cssf(e.property_key),c=I.checkObject(TvrMT.data.prog.lh,[l,"sub_slug"]),l="subgroup"===t?"subgroup":e.property_key;if("animation"===e.group_key&&(c="animation"),!c)return!1;n=i.trail.root_to_group.concat([c,l,e.recurse.mq_key])}return s="#"+s+"-"+n.join("-"),o=o?o.find(s):D(s),!!I.isDomEl(o)&&(r?{$item:o,id:s,M:E.get_meta(o,t)}:o)},get_meta:function(e,t){I.startT(arguments),E.meta={};var s,r,a=["stub","section","selector","group","subgroup","property"];for(s in a)a.hasOwnProperty(s)&&a[s]==t&&(r=(e.attr("class")&&0<=e.attr("class").indexOf(t+"-tag")?e:e.closest("."+t+"-tag")).attr("id").split("-"));var o,n,i,l="";for(o in r)r.hasOwnProperty(o)&&0!=o&&6!=o&&7!=o&&(t=a[o],l+="-"+r[o],"property"==t||"subgroup"==t?(n="property"==t?l+"-"+r[6]:l+"-subgroup-"+r[6],"all"==r[6]&&(r[6]+="-devices",n+="-devices"),E.meta.tabSlug=r[6],E.meta[t]=D("#opts"+n),E.meta.pgTabControlSlug=E.meta[t].data("pgtabcontol")):E.meta[t]=D("#opts"+l),n=r[o],E.meta[t+"Slug"]=n,"section"==t?(E.meta[t+"M"]=D("#strk"+l),E.meta[t+"T"]=E.meta[t+"M"].find("input.section-tracker"),E.meta[t+"H"]=E.meta.sectionM.find(".section-display-name").val(),E.meta[t+"ID"]="opts-"+E.meta.sectionSlug,E.meta[t+"MID"]="strk-"+E.meta.sectionSlug):"selector"==t?(E.meta[t+"M"]=D("#strk"+l),i=E.meta.selectorM.find(".selector-label").val().split("|"),E.meta[t+"T"]=E.meta[t+"M"].find("input.selector-tracker"),E.meta[t+"H"]=i[0],E.meta[t+"Code"]=i[1],E.meta[t+"ID"]="opts-"+E.meta.sectionSlug+"-"+E.meta.selectorSlug,E.meta[t+"MID"]="strk-"+E.meta.sectionSlug+"-"+E.meta.selectorSlug):"group"==t?(E.meta[t+"ID"]="opts-"+E.meta.sectionSlug+"-"+E.meta.selectorSlug+"-"+E.meta.groupSlug,i=E.get_mq_focus(),E.meta[t+"Tab"]=E.meta[t].find("div.property-fields-"+i),E.meta[t+"H"]=E.stat.css_icons.find("ul.styling-option-icons").find("li.pg-icon-"+E.meta.groupSlug).attr("title"),"animation"==n||"transition"==n?(E.meta.event=E.meta[t+"Tab"].find("input.mt-event-input").first().val(),E.meta.eventKey=E.meta.event?I.convert_to_param(E.meta.event):"",E.meta.eventValue=E.meta[t+"Tab"].find("input.mt-event-value-input").first().val()):E.meta.event=E.meta.eventKey=E.meta.eventValue=""):"subgroup"==t||"property"==t&&(E.meta.subgroupH=E.meta.subgroup.find("span.subgroup-label").text(),E.meta[t+"H"]=E.meta[t].find("span.option-label").text()));return E.meta.tabSlug||(E.meta.tabSlug=E.get_mq_focus()),E.meta.tabH=E.get_tab_name(E.meta.tabSlug),I.endT(arguments),E.meta},get_pg_meta:function(e){if(!E.selInFocusID||!E.pref.pg_focus)return!1;var t=D("#"+E.selInFocusID);if(!I.isDomEl(t))return!1;t=e?t.find("li.group-tag-"+E.pref.pg_focus).find("group-row-"+e):t.find("li.group-tag-"+E.pref.pg_focus);return!!I.isDomEl(t)&&E.get_meta(t,"group")},colorpicker_bind:function(e,t){I.startT(arguments);D("<div></div>");var s=!1,r=t?e:e.find("input.color:not(.bound)");r.each(function(){s=!0;var e=D(this),t=e.closest(".property-tag").attr("id");e.spectrum({appendTo:E.stat.styleComponents,belongsTo:t,containerClassName:"picker-belongs-to-"+t,showAlpha:!0,showInput:!1,allowEmpty:!0,showInitial:!0,preferredFormat:"rgb",showButtons:!1,showSelectionPalette:!0,localStorageKey:"shared_palette",maxSelectionSize:9,hide:function(e){E.$pickerContainer.draggable("destroy")},show:function(e){I.startT(arguments);var t=E.inputWaitingObj=D(this),s=E.get_meta(t,"property"),r=".picker-belongs-to-"+s.property.attr("id"),a=E.$pickerContainer=E.stat.styleComponents.find(r);a.hasClass("ui-draggable")||a.draggable({cancel:".combo-arrow, input, .palette-tile, .sp-palette-row-initial, .ui-menu, .palette-button, .refresh-icon"}),a.hasClass("extra-fields-added")||(o='<div class="sp-mt-inputs">',o+='<input type="number" min="0" max="1" step="0.1" class="sp-input-opacity sp-input">',o+='<input type="text" class="sp-input-rgb sp-input">',o+='<input type="text" class="sp-input-hsl sp-input">',o+='<input type="text" class="sp-input-hex sp-input">',o+='<div class="tvr-input-wrap input-var-wrap"><span class="color-var-label" title="'+TvrLang.color_var_label+'">VAR</span><input type="text" class="sp-input sp-input-var combobox has-suggestions" rel="color_extra"><span class="combo-arrow combo-dots"></span><span class="mt-clear-field"></span></div>',o+="</div>",a.addClass("extra-fields-added").append(o).wrapInner("<div class='sp-wrap'>"),a.find(".sp-clear").on("click.mt",function(e){E.clear_spectrum_inputs(s,!0)})),E.draw_palette(a);var r=a.css(["top","left"]),o=parseInt(r.top),r=parseInt(r.left),r=E.all_options_left()?{top:o+10+"px",left:"0px"}:{top:"-1px",left:r+40+"px"};a.css(r),t.val()?E.maybe_set_variable_color(t.val(),t,a.find(".sp-input-var"))||E.update_spectrum_inputs(e,t,{},!0):(a=s.property.find("span.comp-style").find("span").attr("style"))&&("transparent"!=(a=a.split("background-color:"))[1]&&"rgba(0, 0, 0, 0)"!=a[1]||(a[1]="rgba(0, 0, 0, 1)"),E.update_spectrum(a[1],t,{},!0,!0),t.val(""),s.property.find(".sp-preview-inner").css("background-color","transparent").addClass("sp-clear-display")),I.endT(arguments)},move:function(e){E.update_spectrum_inputs(e,D(this),{},!0),E.timer.typing&&clearTimeout(E.timer.typing),E.timer.typing=setTimeout(E.done_typing,10)}}).on("dragstart.spectrum",function(e,t){E.colorPickerDragging=!0}).on("dragstop.spectrum",function(e,t){E.colorPickerDragging=!1}).addClass("bound")}),s&&t&&r.spectrum("show"),I.endT(arguments)},format_autocomplete_id:function(e,t){var s=e.closest(".property-tag"),r=s.attr("id"),a=t+"-belongs-to-"+r,t=s.hasClass("tab-control-gridtemplate"),s=s.hasClass("tab-control-gridauto");return(t||s)&&(a+="-input-nth-index-"+(e.closest(".tvr-input-wrap").index()+1),t&&(a+="-input-filter-"+e.closest(".vl-item").data("input-filter"))),{containerID:a,fieldID:r}},get_related_meta:function(e,t,s){var r,a,o,n,i,l=e+"-belongs-to",c="picker"===e?"sp-container":"ui-autocomplete";return!s&&t.hasClass(c)?(o=t.data(l),n=t.attr("id"),i=t,s=E.get_meta(D("#"+o),"property"),a=".tvr-input-wrap",(l=n.split(/(?:-input-nth-index-|-input-filter-)/g))[1]&&(a+=":nth-child("+l[1]+")"),l[2]&&(a+=" ."+l[2]),a=s.property.find(a).find("input.property-input"),"combo"===e&&i.siblings(".sp-input-var").length&&(r=i.siblings(".sp-input-var"))):(s=s||E.get_meta(t,"property"),a=("picker"===e?s.property:t.parent()).find("input.property-input"),o=(e=E.format_autocomplete_id(a,e)).fieldID,n=e.containerID,i=D("#"+n)),{$input:a,$colorVarInput:r,$container:i,containerID:n,fieldID:o,M:s}},draw_palette:function(n){var e=E.get_meta(E.inputWaitingObj,"property"),i=this.get_related_meta("picker",!1,e),e=(n=n||i.$container).find("ul.mt-picker-palette");I.isDomEl(e)?e.replaceWith(E.color_palette()):n.prepend(E.color_palette()),E.$palette=n.find("ul.mt-picker-palette"),n.find("ul.mt-picker-palette").on("click.mt-spectrum","span.full-palette-toggle, span.palette-button, span.refresh-icon, span.tile-color",function(e){var t,s,r,a=D(e.target),o=i.$input;a.hasClass("full-palette-toggle")?E.toggle_feature(a):a.hasClass("tile-color")?(E.$palette.find("span.tile-selected").removeClass("tile-selected"),s=a.data("color"),E.maybe_set_variable_color(s,o,n.find(".sp-input-var"))||E.update_spectrum(s,o,{},!0),t=a.data("id"),z.ajax_save_settings({context:"redrawPalette",$property:o}),e=(a=E.$palette.find("span."+t)).parent(),a.addClass("tile-selected"),t=(r=E.$palette.find("div.saved-colors-wrap")).find("span.mt-save-color"),r=r.find("span.mt-remove-color"),e.hasClass("saved-tile")?(t.removeClass("show"),r.addClass("show")):(t.addClass("show"),r.removeClass("show"))):a.hasClass("palette-button")?(r=s=n.find(".sp-input-var").val()||o.spectrum("get").toRgbString(),o=!1,a.hasClass("mt-remove-color")&&(r=!1,o=s=E.$palette.find("span.tile-selected").data("color")),q.splice_sug_val(r,o,"color","saved",{redrawPalette:1,save:!0})):a.hasClass("refresh-icon")&&q.refresh_sug_values({specific:"color",$resample:a})})},color_palette:function(){var e=D("#mt-picker-palette").clone().removeAttr("id"),t=e.find("li.view-full-palette"),s=E.pref.my_props.sug_values.color,r=s.recent,a=s.saved,o=s.sampled;return E.pref.full_color_palette&&(s=t.find("span.full-palette-toggle")).addClass("on").attr("title",s.data("neg")),e.find("ul.mt-picker-palette").html(D(E.color_palette_tiles("mini","recent",E.numMiniTiles-1,r)).add(t)),e.find("ul.recent-full-palette").html(E.color_palette_tiles("full","recent",E.numMiniTiles,r)),e.find("ul.saved-full-palette").html(E.color_palette_tiles("full","saved",E.numSavedTiles,a)),e.find("ul.site-full-palette").html(E.color_palette_tiles("full","site",E.numSiteTiles,o)),e},isVariableTile:function(e){var t="";return e&&(-1<e.indexOf("var(")?t="var":-1<e.indexOf("$")&&(t="$")),t},color_palette_tiles:function(e,t,s,r){for(var a="",o=0;o<s;++o){var n=r[o],i=n&&-1<n.indexOf("$")?q.get_variable_value(n,"scss"):n,l=E.pref.color_as_hex?I.maybe_to_hex(n):n,c=n?'title="'+l+'"':"",d=n?'style="background-color:'+i+'"':"",_=n?"has-color":"no-color",l=e+"-"+t+"-"+o,i=E.isVariableTile(n);a+='<li class="'+e+"-tile "+t+"-tile  palette-tile "+_+'">'+(n?'<span class="tile-color '+l+'" data-color="'+n+'" data-id="'+l+'" '+d+" "+c+">"+i+"</span>":"")+"</li>"}return a},picker_method:function(e){I.startT(arguments),I.isDomEl(E.inputWaitingObj)&&("hide"===e?E.inputWaitingObj.spectrum("hide"):"clickpick"===e&&E.get_meta(E.inputWaitingObj,"property").property.find(".sp-container").trigger("mouseup")),I.endT(arguments)},update_spectrum:function(e,t,s,r,a){I.startT(arguments);var o=tinycolor(e),n=o.toRgb();tinycolor(n).isValid()&&(t.spectrum("set",n),E.update_spectrum_inputs(o,t,s,r,a),a||E.adjust_comp_span(t,"after"),I.endT(arguments))},update_spectrum_inputs:function(e,t,s,r,a){var o;I.startT(arguments),e?(a||t.val(e.toRgbString()),(o=this.get_related_meta("picker",t).$container).find(".sp-input-hex").not(s).val(e.toHexString()),o.find(".sp-input-rgb").not(s).val(e.toRgbString()),o.find(".sp-input-hsl").not(s).val(e.toHslString()),o.find(".sp-input-opacity").not(s).val(e.toRgb().a),o.find(".sp-input-var").not(s).val(""),r&&!a&&E.maybe_sync_fields(t),I.isDomEl(s)&&s.focus(),I.endT(arguments)):t.val("")},clear_spectrum_inputs:function(e,t){I.startT(arguments);var s=e.property.find("input.color");e.property.find("input.sp-input, input.color").val("").end().find("div.sp-alpha-inner, div.sp-preview-inner").css("background-color","transparent").end().find("div.sp-preview-inner").addClass("sp-clear-display"),E.adjust_comp_span(s,"after"),t&&(E.picker_method("hide"),E.maybe_sync_fields(s)),I.endT(arguments)},update_count:function(e,t,s,r,a){I.startT(arguments),I.hasValue(a)||(a=0);var o,n,i,l=parseInt(e.attr("rel"));"add"==t?o=l+parseInt(s):"subtract"==t&&(o=l-parseInt(s)),e.attr("rel",o),"section"!=r&&(0==l&&e.after(' <span class="folder-count-wrap count-wrap">(<span class="folder-state-count state-count"></span>)</span>'),0==o?e.next("span").remove():e.next("span").find(".state-count").text(parseInt(o))),"section"==r?(i=D("#total-sec-count"),n=parseInt(i.text()),l<o?(E.totalSecs=parseInt(n+s),i.text(E.totalSecs),E.totalSels=E.totalSels+parseInt(a)):(E.totalSecs=parseInt(n-s),i.text(E.totalSecs),E.totalSels=E.totalSels-parseInt(a)),D("#total-sel-count").text(parseInt(E.totalSels))):"selector"==r&&(n=D("#total-sel-count"),i=parseInt(n.text()),E.totalSels=l<o?parseInt(i+s):parseInt(i-s),n.text(E.totalSels)),E.toggle_enabled_buttons(),I.endT(arguments)},com_data_loading:function(e,t,s){I.startT(arguments),e.find("."+t+"-row").append(D(E.templates.loaders[t]).removeAttr("id")),z.update_prog_indicator("plus",TvrLang.load_style_opt),I.endT(arguments)},com_data_finished_loading:function(e,t){I.startT(arguments),e.find("img.ajax-loader").remove(),z.update_prog_indicator("minus",t,TvrLang.load_style_opt),I.endT(arguments)},ajax_load_revisions_table:function(){I.startT(arguments),z.update_prog_indicator("plus",TvrLang.load_revisions_table),D.ajax({type:"GET",url:E.ajaxUrl,data:"mt_action=get_revisions",async:!0,timeout:E.tOut,error:function(e,t){I.startT(arguments),z.update_prog_indicator("minus",{short:TvrLang.load_revisions_table_failed,long:"<p>"+E.handle_ajax_error(e,t)+"</p>"},TvrLang.load_revisions_table),I.endT(arguments)},success:function(e){I.startT(arguments);var t=D(e).html();D("#revision-area").html(t),z.update_prog_indicator("minus",!1,TvrLang.load_revisions_table),I.endT(arguments)},complete:function(){I.startT(arguments)}}),I.endT(arguments)},update_wizard_html:function(e){I.action_after_timeout("wizard_html_expensive",3,{item:function(e){I.startT("update_wizard_html_inner");var t,s,r="";e.bindOnly||(m.dom,s=m.stat.html[0].outerHTML,t=E.custom_wizard_html_replace(),s=E.truncate_html_string(s,["noscript","script","style","path"],!1,t.pattern,t.repl),r=html_beautify(s,{html:{no_preserve_newlines:!0,max_preserve_newlines:0,indent_inner_html:!0,indent_handlebars:!0,indent_size:2,wrap_line_length:0,inline:[],extra_liners:[],unformatted:[],content_unformatted:[]}}));O.update_arbitrary_editor({context:"wizardHTML",editorID:"wizard_inspector_html",data:r,mode:"html",filterClass:"wizard_inspector_html",containerClass:".css-code-wrap",dontSetHeight:!0,readOnly:!0,fontSize:"12px",noValidation:!0,directContent:r,mirrorRender:!e.updateVisEditor,dontScrollHTML:e.dontScrollHTML});I.endT("update_wizard_html_inner")},args:[e]})},custom_wizard_html_replace:function(){var e={pattern:!1,repl:""},t=p.get_active_builder();return t&&p.get(t).runIfExists("wizardHtmlReplace",[e]),e},truncate_html_string:function(e,t,s,r,a,o){return I.startT(arguments),t&&(e=e.replace(new RegExp(q.reg.html_tag({tag:t.join("|")}),"gm"),"<$1>(MT truncated)</$1>")),s&&(e=e.replace(new RegExp(q.reg.html_att({att:s.join("|")}),"gm"),'$1="(MT truncated)"')),r&&(a=a||"",e=e.replace(r,a)),I.endT(arguments,1),e},update_wizard_html_scroll:function(e){var t=I.checkObject(O.aceIndexMap.indexes,[m.triggerElIndex,"row"]),t=!!t&&t+1;return O.go_to_line_in_editor(t,O.eds.wizard_inspector_html,e)},breadcrumb_clicked:function(e){var e=parseInt(e.data("level")),e=-1<e?m.dom.nodes[e].family.el.fullObj:m.dom.nodes[0].family.child.m[0].obj;E.dom_nav_option_used(e)},update_breadcrumbs:function(){if(m&&m.dom.nodes){var e=D("#dom-bread"),t=e.find(".drag-containment"),s=e.find(".drag-content");D.extend(!0,[],m.dom.nodes).reverse();for(var r="",a=m.dom.nodes.length-1,o=a;0<=o;o--){var n=o!=a?'<span class="bc-sep">&raquo;</span>':"";r+=n+'<span class="mt-breadcrumb'+(0===o?" active-crumb":"")+'" data-level="'+o+'">'+m.dom.nodes[o].elBcLabel+"</span>"}var i=m.dom.nodes[0].family.child;i.count&&(r+=n+'<span class="mt-breadcrumb child-crumb" data-level="-1">'+i.m[0].bcLabel+"</span>"),s.css("width","auto").html(r);var l,c=s.width(),d=e.width(),_=0,i="default",e=c;s.width(c).css("left","0"),d<c?(_="-"+(l=c-d)+"px",i="e-resize",e=d+2*l,E.stat.breadcrumbs.draggable("enable")):E.stat.breadcrumbs.draggable("disable"),t.width(e).css({left:_,cursor:i})}},update_dom_arrows:function(e){I.startT(arguments);var t=D("#selector-naming").find(".refine-target-controls");t.find("span").addClass("disabled");var s=m.dom.nodes[0].family;s.par.count&&t.find("span.tvr-parent").removeClass("disabled"),s.prev.count&&t.find("span.tvr-prev-sibling").removeClass("disabled"),s.next.count&&t.find("span.tvr-next-sibling").removeClass("disabled"),s.child.count&&t.find("span.tvr-child").removeClass("disabled"),I.endT(arguments)},switch_html_element:function(e){var t=!1,s=m.dom.nodes[0].family,e=e.attr("class");0<=e.indexOf("tvr-parent")?t=s.par.m[0].obj:0<=e.indexOf("tvr-child")?t=s.child.m[0].obj:0<=e.indexOf("tvr-prev-sibling")?t=s.prev.m[0].obj:0<=e.indexOf("tvr-next-sibling")&&(t=s.next.m[0].obj),t&&E.dom_nav_option_used(t)},dom_nav_option_used:function(e,t){t=D.extend({},{scroll:!0,selectElement:!0},t),E.redo_sug_sels("",!0),m.all_targeting_actions(e,t)},update_view_css:function(e,t,s,r){var a;I.startT(arguments),"loadNew"==s?(O.generated_css_auto_line_done={},E.server_scss&&r&&(a=r.find("#scss-line-error"),I.isDomEl(a)?(E.scss_error={line:a.data("line"),tabKey:a.data("tab")},E.stat.tvr.addClass("cur_scss_error")):(E.scss_error=!1,E.stat.tvr.removeClass("cur_scss_error"))),E.stat.view.find("div.dialog-tab-field").each(function(e){var t=D(this).find("div.view-file").find("a").attr("href");t?z.simple_ajax_request({url:t,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:E.update_view_css,cbfArgs:[e]}):(E.stat.view.find(".dialog-tab-"+e),t=!!E.scss_error&&E.scss_error.fullString||E.previousSCSSCompile,E.update_view_css(t,e))})):O.update_arbitrary_editor({context:"viewCSS",editorID:"generated-css-"+t,data:e,filterClass:"generated-css",readOnly:!0,directContent:e,index:t}),I.endT(arguments)},update_inspector_stylesheet:function(e,t,s){I.startT(arguments),"loadNew"==s?z.simple_ajax_request({url:t.url,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:E.update_inspector_stylesheet,cbfArgs:[t]}):O.update_arbitrary_editor({context:"inspectorStylesheet",editorID:"inspect_stylesheet_preview",data:e,filterClass:"inspect_stylesheet_preview",readOnly:!0,directContent:e,containerClass:".content-main",find:t}),I.endT(arguments)},ui_reset:function(e){if(I.startT(arguments),!confirm(TvrLang.reset_settings_confirm))return!1;z.pending_auto_saves("clear");var t=E.ajaxUrl,s=TvrLang.reset_empty_folders;z.general_ajax_submission("reset",t,s,"GET","mt_action=tvr_ui_reset"),I.endT(arguments)},get_css_filter_alias:function(e,t){I.startT(arguments);var s=D("#css-filters"),r=E.pseudo_class_format(e.closest("li").data("pref_sub_key")),r=(I.isDomEl(e.closest("#fav-filters"))?s.find("span.quick-opts-wrap"):D("#fav-filters")).find("li."+r);return I.endT(arguments),"favourite_filter"!=t?r:r.find(".star-icon")},clear_css_filters:function(r){I.startT(arguments),D("#css-filters").find("ul.css-filter-list").find("li.css-filter-item").each(function(e){var t=D(this),s=r&&"page_specific"===t.data("type");t.hasClass("on")&&!s&&E.toggle_feature(t)}),I.endT(arguments)},force_styles_analysis:function(){E.tooMuchCSS=!1,E.forceStylesAnalysis=!0,q.update_stylesheet_rules()},site_pages_previous_result:[],site_pages_cache:{},site_pages_latest_term:null,get_item_from_previous_results:function(e,t){t=t||this.site_pages_previous_result;for(var s=0;s<t.length;s++){var r=t[s];if(e===r.value)return r}return!1},filter_matching_results:function(e,t){for(var s=[],r=0;r<t.length;r++){var a=t[r],o=a?a.value+a.label+a.category:"";e&&!o.match(new RegExp(I.escapeRegExp(e),"i"))||s.push(a)}return s},prepend_recent_paths:function(e,t){for(var s=[],r=TvrMT.data.prog.combo.custom_paths,a=0;a<r.length;a++){var o=r[a],n=o===Object(o),i=n?o.label:o,o=n?o.value:o;-1<o.indexOf("ct_template")||s.push({label:i||o,value:o,category:TvrLang.recent})}return s.concat(t)},clear_recent_page_path:function(e,t){t.preventDefault();for(var t=D("#previewPath"),s=e.parent().attr("data-path"),r=TvrMT.data.prog.combo.custom_paths,a=r.length-1;0<=a;a--){var o=r[a];s===(o===Object(o)?o.value:o)&&r.splice(a,1)}t.MTautocomplete("search",t.val()),z.simple_ajax_request({type:"POST",url:E.ajaxUrl+"&update_custom_paths=1",sendData:z.serialized_data_with_single_key(JSON.stringify(r)),plus:"",minus:""})},return_page_results:function(e,t,s,r){E.site_pages_previous_result=s,s=E.prepend_recent_paths(e,s),s=E.filter_matching_results(e,s),r&&(E.site_pages_cache[e]=s,9<(e=Object.keys(E.site_pages_cache)).length&&delete E.site_pages_cache[e[0]]),t(s)},get_site_pages:function(e,s){var r,t=e?e.term.toLowerCase():null;(E.site_pages_latest_term=t)?E.site_pages_cache[t]?E.return_page_results(t,s,E.site_pages_cache[t]):(E.return_page_results(t,s,E.site_pages_previous_result),(r=E.stat.changeUrlInputWrap).addClass("active"),I.action_after_timeout("site_page_search",200,{item:function(e){z.simple_ajax_request({type:"GET",url:E.ajaxUrl+"&get_site_pages=1&search_term="+t,cbFunction:function(e,t){e=JSON.parse(e);E.return_page_results(E.site_pages_latest_term,s,e,!0),r.removeClass("active")},cbfArgs:[t]})},args:[{}]})):E.return_page_results(t,s,TvrMT.data.dyn.site_pages)},restore_rev:function(e){if(I.startT(arguments),!confirm(TvrLang.restore_settings_confirm))return!1;var t=E.ajaxUrl,s=TvrLang.restore_settings,r=e.attr("rel");z.general_ajax_submission("restore",t,s,"GET",r),I.endT(arguments)},toggle_revision_save_status:function(e){var t,s=e.add(e.closest("tr")),s=e.hasClass("revision-is-saved")?(s.removeClass("revision-is-saved"),t=0,"pos"):(s.addClass("revision-is-saved"),t=1,"neg");E.refresh_tt(e,e.data(s)),D.get(E.ajaxUrl+"&rev_save_status="+t+"&rev_id="+e.attr("rel"),function(){})},set_input_timer:function(e){e=e||E.inputTypingInterval,E.timer.typing&&clearTimeout(E.timer.typing),E.timer.typing=setTimeout(E.done_typing,e)},set_defer_save_timer:function(e,t){t="save"+t;E.timer[t]&&clearTimeout(E.timer[t]),E.timer[t]=setTimeout(z.action_save,E.beforeSaveInterval,e)},extract_inner_styles:function(e){var t=(e=(e=I.remove_only_last_char(e,"}")).split("{"))[1]||"";return t&&(e.shift(),t=e.join("{")),t.trim()},post_edit:function(e){I.startT(arguments),e.each(function(e){var t=D(this);E.update_input_width_and_scroll(t),E.adjust_comp_span(t,"after")}),I.endT(arguments)},adjust_event_fields:function(e){var t,s=I.convert_to_param(e.val()),r=e.closest(".field-wrap"),e=r.siblings(".event-target-field"),r=r.siblings(".event-value-field");I.hasValue(s)?(t=r,"css"!==q.event_type(s)?t=t.add(e):E.hide_property_fields(e),t.addClass("show-event-fields")):(t=r.add(e),E.hide_property_fields(t)),m.after_animation(t.first(),{type:"transition",cb:function(){E.adjust_scroll_buttons(E.get_pg_meta(),"style")}})},get_default_unit:function(e,t){return I.checkObject(E.pref,["my_props",e,"pg_props",t,"default_unit"],!0)},get_factory_default_unit:function(e,t){return e=e||I.prop_to_cssf(t),I.checkObject(TvrMT.data.prog.lh,[e,"fdu"],!0)},update_default_unit:function(e,t,s){I.updateObject(E.pref,["my_props",e,"pg_props",t,"default_unit"],s)},maybe_set_unit:function(e,t,s,r,a){if(!r)return!1;var o=void 0!==e.unit?e.unit:E.get_default_unit(t,s);if(I.isDefined(o)){r=r.trim().replace(/=(?:.+)(\(.*?\))/g,function(e){return e.replace(/ /g,"")});var n={val:r,converted:!1,calc:""};if(r.indexOf(" ")<0)n=E.do_conversion(r,o,s,0,a);else{var i,l,c=[],d=r.split(" ");for(i in d)d.hasOwnProperty(i)&&(l=E.do_conversion(d[i],o,s,i,a),c[i]=l.val,l.converted&&(n.converted=!0,n.calc+=0!=i?", "+l.calc:l.calc));n.val=c.join(" ")}return n}},do_conversion:function(e,t,s,r,a){var o={val:e,converted:!1,calc:""};return v.unitCouldBeAdded(e,t)?t&&(o.val=e+t,o.converted=!0):"="===e.charAt(0)&&(o=E.process_excel_function(e,s,r,a)),o},process_excel_function:function(e,t,s,r){var a={val:e,converted:!1,calc:""},o=e.split("(");if(!o[0]||!o[1]||o[1].indexOf(")")<0)return a;var n,i=o[0].replace("=",""),l=o[1].replace(")","").split(",");for(n in l)if(l.hasOwnProperty(n)&&(l[n]=l[n].trim(),!I.isDefined(l[n])))return a;o=E.nodeCSS[0];return o?(l[1]&&(o=E.nodeCSS[l[1]-1]),E.auto_convert(l[0],i,o,t,e,s,r)):(z.log({short:"Auto-conversion could not be calculated",long:"<p>The current selector may not target any elements on the current page.</p>",type:"warning"}),a)},auto_convert:function(e,t,s,r,a,o,n){I.startT(arguments);var i,l,c,d,_,u,p,f={val:a,converted:!1,calc:""},g=r,m=!1,v=TvrMT.data.prog.autoMap;if(v[g]&&v[g][t]){if(!D.isPlainObject(v[g][t])&&!v[g][t][0])return n&&(p={short:"Auto-conversion aborted",long:"<p>"+v[g][t]+"</p>",type:"warning"},z.log(p)),I.endT(arguments),f;i=v[g][t].node,l=v[g][t].prop,Array.isArray(l)&&(l=l[o]),l=l.replace(/_/g,"-"),c=parseInt(s[i][l].replace("px","")),I.hasValue(v[g][t].tip)&&(m="<p>"+v[g][t].tip+"</p>")}return"%"===t?(d=e/c*100,_=e+"px / "+c+"px * 100 = "+parseFloat(d.toFixed(3).toString())+t,u=e+"px divided by "+c+"px ("+i+" "+l+") multiplied by 100 = <b>"+d+t+"</b>"):"em"!==t&&"rem"!==t||(l="font-size",d=e/(c="em"==t?(i="font_size"==g?"parent":"element",parseInt(s[i]["font-size"].replace("px",""))):(i="HTML base",E.baseFontSize)),_=e+"px / "+c+"px = "+parseFloat(d.toFixed(3).toString())+t,u=e+"px divided by "+c+"px ("+i+" "+l+") = <b>"+d+t+"</b>"),d&&(n&&(p={short:_,long:"<p>"+TvrLang.auto_conversion_performed+": <b>"+a+"</b><br />"+u+"<br />"+TvrLang.auto_values_rounded+"</p>",type:"info"},m&&(p.long+=m),z.log(p)),f={val:parseFloat(d.toFixed(3).toString())+t,converted:!0,calc:_}),I.endT(arguments),f},update_packs_obj:function(e){TvrMT.data.prog.combo.directories[TvrMT.data.prog.combo.directories.length]=e,TvrMT.data.prog.combo.directories.sort()},set_import_field:function(e){D("#import_from_pack_name").val(e)},handle_ajax_error:function(e,t){return 0==e.status?TvrLang.error_connection:404==e.status?TvrLang.error_404:500==e.status?TvrLang.error_500:"parsererror"==t?TvrLang.error_parser:"timeout"==t?TvrLang.error_timeout:TvrLang.error_unknown+"\n"},email_error_report:function(){I.startT(arguments),z.update_prog_indicator("plus",TvrLang.send_error);var e=E.ajaxUrl+"&mt_action=tvr_error_email",t=D("#error-report-form").serialize();D.ajax({type:"POST",url:e,data:t,timeout:E.tOut,error:function(e,t){z.update_prog_indicator("minus",{short:TvrLang.send_error_failed,long:"<p>"+E.handle_ajax_error(e,t)+"</p>"},TvrLang.send_error)},success:function(e){e=D(e).html();e=null==e?{short:"Email report failed",long:"<p>Reason unknown.</p>"}:z.extract_status(D(e)),z.update_prog_indicator("minus",e,TvrLang.send_error)}}),I.endT(arguments)},show_dialog:function(e){I.startT(arguments),E.close_dialog();var r,a,t,s,o=(e=e.attr("rel")?e:e.closest("*[rel]")).attr("rel");if("not-yet"===o)return!1;D("#"+o+"-dialog").addClass("show"),"import-from-pack"==o&&(I.hasValue(e.attr("data-pack-name"))&&D("#import_from_pack_name").val(e.attr("data-pack-name")),D("#preview-import-css-0").hasClass("ace_editor")||q.update_import_css_editor("")),"export-to-pack"==o&&(r="",D("#tvr-menu").find(".section-tag").each(function(){var e=E.get_meta(D(this),"section"),t="",s="";0<parseInt(e.sectionM.find(".selector-count-state").attr("rel"))&&(t='checked="checked"',s="on"),r+='<li><input type="checkbox" name="export_sections['+e.sectionSlug+']" '+t+' /> <span class="fake-checkbox '+s+'"></span><span class="folder-icon tvr-icon"></span><span class="ef-label">'+e.sectionH+"</span></li>"}),D("#available-folders").html(r),a=D("#custom-css"),E.stat.code.find("textarea.hand-css-textarea").each(function(e){var t=D(this),s=a.find(".custom-"+t.attr("id"));I.hasValue(t.val())?I.check_fake(s):I.uncheck_fake(s)}),D("#export_to_pack").val(1),D("#export_pack_name").val(""),D("#toggle-checked-folders").find("input").prop("checked",!1).end().find(".fake-checkbox").removeClass("on")),"display-css-code"==o&&(s=D("#scss-line-error"),t=I.isDomEl(s)?E.title(s):E.title(e.find(".mt-menu-text")),s=z.user_action(z.noNewData,{items:[t],val:!1,icon:"display-css-code lg-icon"}),z.ajax_save_settings({context:"view-css",settings:s,noSaveDelay:!0})),"inspect-stylesheet"==o&&(s=(t=I.escapeRegExp(e.data("selector")))+"\\s*?{",s={url:e.data("href"),media:e.data("media"),selector:t,findSelectorParts:!0,selectorPattern:s},E.update_inspector_stylesheet(!1,s,"loadNew")),"display-revisions"==o&&E.ajax_load_revisions_table(),"manage-design-packs"==o&&E.reload_iframe(e,"manage"),"google-fonts"==o&&(E.gFontTarget=e.closest(".field-wrap").find(".property-input"),E.reload_iframe(e,"google_fonts")),"program-docs"!==o&&"get-started-tips"!==o||E.reload_iframe(e,"docs",D("#docs-url").attr("rel"),!0),I.endT(arguments)},close_dialog:function(){I.startT(arguments),E.stat.tvr.find("div.tvr-dialog").removeClass("show"),D("#export_to_pack, #new_pack").val(0),I.endT(arguments)},reload_docs_iframe:function(e){I.startT(arguments);var t="docs_iframe",s=D("#docs-url").attr("rel");I.hasValue(e.attr("data-docs-index"))&&(s+="&docs_index=1"),I.hasValue(e.attr("data-prop-group"))&&(s+="&prop_group="+e.attr("data-prop-group")),I.hasValue(e.attr("data-prop"))&&(s+="&prop="+e.attr("data-prop"));D("#"+t);window.frames[t].location=s,I.endT(arguments)},reload_iframe:function(e,t,s,r){var a=t+"_iframe",o=D("#"+a);s=s||o.attr("rel"),"docs"===t&&(I.hasValue(e.attr("data-docs-index"))&&(s+="&docs_index=1"),I.hasValue(e.attr("data-prop-group"))&&(s+="&prop_group="+e.attr("data-prop-group")),I.hasValue(e.attr("data-prop"))&&(s+="&prop="+e.attr("data-prop"))),(r||"1"!==o.attr("data-frame-loaded")||I.isDomEl(e.closest(".dialog-footer")))&&(window.frames[a].location=s,o.attr("data-frame-loaded",1))},toggle_help_info:function(e){e.next().slideToggle("fast",function(){})},scroll_to_bottom:function(e){I.startT(arguments)},toggle_multi_checkboxes:function(e){I.startT(arguments);var t=D("#available-folders, #custom-css");e.hasClass("on")?t.find("input").prop("checked",!1).end().find(".fake-checkbox").add(e).removeClass("on"):t.find("input").prop("checked",!0).end().find(".fake-checkbox").add(e).addClass("on"),I.endT(arguments)},get_dyn_meta:function(e){I.startT(arguments);var t=e.closest(".dyn-wrap");E.dyn_meta={wrap:t,slug:t.data("slug"),add_input:t.find(".new-item-input"),add_button:t.find(".new-item-add"),menu:t.find(".tvr-dyn-menu")};t=e.closest("li.dyn-item");return I.isDomEl(t)&&(E.dyn_meta.item=t),I.endT(arguments),E.dyn_meta},dyn_add_item:function(e){I.startT(arguments);var t=E.get_dyn_meta(e),s=t.add_input.val(),r=t.wrap.data("base-key");if(r)var a={newName:r+=t.menu.find("li.dyn-item").length+1,newNameHuman:s};else if(!(a=I.new_name_checks(s,TvrLang.item)))return!1;a=E.dom_replacements(!1,"dyn_item",D(E.templates[t.slug+"_menu_item"]),"item",a.newName,a.newNameHuman);t.menu.append(a).find("li").filter(":last").hide().fadeIn("fast",function(){t.add_input.val(""),"mqs"==t.slug&&E.toggle_edit_item(D(this).find(".edit-item"))}),I.endT(arguments)},toggle_edit_item:function(e){I.startT(arguments);var t=E.get_dyn_meta(e).item.find(".edit-item-form");t.hasClass("show")?t.removeClass("show"):t.addClass("show"),I.endT(arguments)},delete_item:function(e){I.startT(arguments),e.closest("li").fadeOut("slow",function(){D(this).remove()}),I.endT(arguments)},reveal_form_opts:function(e){I.startT(arguments);var t=e.attr("rel"),t=e.closest("li").siblings(".hidden."+t);t.hasClass("show")?t.removeClass("show"):t.addClass("show"),I.endT(arguments)},toggle_system_menu_options:function(e){I.startT(arguments);var t=(e=e.closest("li")).find(".tvr-input-wrap"),s=e.find(".mt-menu-text"),r=e.closest("ul");t.hasClass("show")?(s.text(s.data("ll")),r.removeClass("expanded"),t.removeClass("show")):(s.text(s.data("sl")),r.addClass("expanded"),t.addClass("show")),I.endT(arguments)},change_preview_url:function(e,t,s){I.startT(arguments);var r=e.closest("li"),a=parseInt(E.pref.mt_nonlog),o=r.find("input.combobox").val(),n=!!o&&I.extract_url_path(o),o=n?I.rtrim(E.homeUrl,"/")+n:"";!o&&m&&(o=m.get_current_url()),o&&o.indexOf(E.adminUrl)<0&&z.update_prog_indicator("plus",TvrLang.load_wp),E.toggle_preview_page_menu(r.closest(".preview_page").find(".mt-group-heading-preview_page"));n=!a&&r.find('input[name="launch_builder"]').is(":checked");n&&((r=t?t.item:E.get_item_from_previous_results(I.extract_url_path(o))||{}).url=o,n=p.launchBuilderOnNewPage(r)),n||(o=a?(o=I.strip_page_builder_and_other_params(o),o=I.append_url_param(o,"mt_nonlog"),I.append_url_param(o,"_wpnonce",TvrMT.data.dyn.ui_config.mt_nonlog_nonce)):I.strip_url_param(o,"mt_nonlog"),p.maybeReleaseBuilderEditLockBeforeExit(o)),I.endT(arguments)},after_style_options_deleted:function(e){E.totalSels<1&&E.toolbar_adjusted()},menuOrder:{},refresh_sortable:function(){I.startT(arguments);for(var t=document.getElementById("tvr-menu"),e=t.getElementsByClassName("selector-sub"),s={scroll:!0,scrollSensitivity:50,scrollSpeed:10,onStart:function(e){e=D(e.item);I.currentlySorting=e.hasClass("section-tag")?"section":"selector",D(t).addClass("sorting-in-progress"),E.get_dom_order({},e,{prevSec:"",newSec:"",orig_order:["this"],new_order:["this"],map:[]},!1)},onEnd:function(e){I.currentlySorting=!1,D(t).removeClass("sorting-in-progress"),E.get_dom_order({},D(e.item),E.menuOrder,!0)}},r=D.extend(!0,{},s,{group:"folders",handle:".folder-icon",onUpdate:function(e){var t=E.get_meta(D(e.item),"section"),e=t.sectionM.prev().attr("id");I.hasValue(e)?t.section.detach().insertAfter("#"+e.replace("strk","opts")):t.section.detach().prependTo("#tvr-options"),I.hasValue(E.selInFocusID)&&E.update_prev_next_sel_buttons(E.selInFocusID)}}),a=D.extend(!0,{},s,{group:"selectors",handle:".selector-sortable-icon",onMove:function(e,t){if(-1<e.related.className.indexOf("strk-sec"))return!1},onUpdate:function(e){E.mirror_move_and_log({},e)},onAdd:function(e){E.selector_received({},e)}}),o=(new Sortable(t,r),[]),n=0;n<e.length;n++)o[n]=new Sortable(e[n],a);I.endT(arguments)},get_dom_order:function(e,t,s,r,a){var o,n=t.closest("ul"),i=t.hasClass("section-tag")?"section":"selector",l="section"==i?["root"]:["section"],c=E.get_meta(t,i);return"selector"==i?(o=n.closest(".section-tag"),r?s.newSec=o.attr("id").replace("strk-",""):s.prevSec=c.sectionSlug,s.moved_item=c.selectorSlug):s.moved_item=c.sectionSlug,a&&!r?(t="section"==i?E.uiData:E.uiData[c.sectionSlug],s.orig_order=Object.keys(t)):n.find("> li").not(".sortable-ghost, .add-selector-list-item").each(function(e){var t=D(this),t=E.get_meta(t,i)[i+"Slug"];(r?s.new_order:s.orig_order).push(t)}),r&&(s.syncRenameConfig&&(e=T.modify_main_js_object("rename",e,E.menuOrder.syncRenameConfig),s.syncRenameConfig=!1),e.moveUpdate=[],e.orderUpdate=[],e=T.modify_main_js_object("reorder",e,{callbackDepth:l,maxDepth:l[0],targetSection:c.sectionSlug,targetSelector:c.selectorSlug,menuOrder:s}),e="selector"==i?(o=E.get_meta(o,"section"),e=E.js_check_values(e,o),e=T.modify_main_js_object("update_section_css",e,{M:o,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),s.prevSec!==s.newSec&&(I.checkObject(E.uiData,[s.prevSec,"this","disabled"])!==I.checkObject(E.uiData,[s.newSec,"this","disabled"])&&(e=T.modify_main_js_object("group_to_css",e,{M:c,maxDepth:"group",recurse_key:["m_query"]})),o=E.get_meta(D("#strk-"+s.prevSec),"section"),e=E.js_check_values(e,o),e=T.modify_main_js_object("update_section_css",e,{M:o,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]})),z.user_action(e,{items:["selector"],val:E.title(c.selectorM.find("span.selector-sortable-icon")),M:c,pathTT:!0,icon:"move-icon lg-icon"})):(m.edit_style_nodes(c,"reorder"),z.user_action(e,{items:["section"],val:E.title(c.sectionM.find("span.folder-icon")),M:c,icon:"move-icon lg-icon"})),a||z.ajax_save_settings({settings:e})),E.menuOrder=s,e},mirror_move_and_log:function(e,t,s){I.startT(arguments),I.hasValue(E.selInFocusID)&&E.tvr_iterate_selectors_v(!1,E.selInFocusID),I.endT(arguments)},selector_received:function(e,t){I.startT(arguments);var s=D(t.item),r=E.get_meta(s,"selector"),a=E.is_cur("sel",r.selectorID);E.oM=r;var o=E.get_meta(s.closest(".section-tag"),"section");E.update_count(r.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),E.update_count(o.sectionM.find(".selector-count-state"),"add",1,"selector","");var n=I.resolve_unique_name(r.selectorH,o.sectionM,".selector-name","Moved",r.selectorMID),s=I.convert_to_param(n);return E.dom_replacements(r,"selector",r.selector.add(r.selectorM),r.sectionSlug,o.sectionSlug,o.sectionH,r.selectorSlug,s,n,r.selectorM.find(".selector-css-textarea").val()),s!==r.selectorSlug&&(E.menuOrder.syncRenameConfig={rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:r.sectionSlug,targetSelector:r.selectorSlug,new_key:s,new_label:n,new_code:r.selectorCode}),o=E.get_meta(r.selectorM,"selector"),a&&(E.update_global_vars(o),r.selector.detach().prependTo(o.section.find("ul.selector-sub"))),E.sortableLoading=!1,E.mirror_move_and_log(e,t),I.endT(arguments),o},toggle_folder:function(e,t){I.startT(arguments);var s=E.get_meta(e,"section");s.sectionM.find(".menu-arrow").hasClass("on")?E.close_folder(s,t):E.open_folder(s,t),I.endT(arguments)},open_folder:function(e,t){t||this.load_folder_menu_selectors(e),e.sectionM.addClass("is-open").find(".menu-arrow").addClass("on"),e.sectionM.find("ul.selector-sub").addClass("normal")},close_folder:function(e){this.unload_folder_menu_selectors(e),e.sectionM.removeClass("is-open").find(".menu-arrow").removeClass("on"),e.sectionM.find("ul.selector-sub").removeClass("normal")},open_close_all_folders:function(s){E.stat.mainMenu.find("span.folder-menu-arrow").each(function(){var e=D(this),t=e.hasClass("on");(t&&"close"===s||!t&&"open"===s)&&E.toggle_folder(e)})},load_folder_menu_selectors:function(e){var t=e.sectionM.find(".selector-sub");t.find("li:not(.add-selector-list-item)").remove(),t.append(E.load_selector(e,{items:["selectorM"]})),E.js_check_values({},E.get_meta(e.sectionM,"section"))},unload_folder_menu_selectors:function(e){e=e.sectionM.find(".selector-sub").find("li:not(.add-selector-list-item)");E.menuSelInFocusID&&(e=e.not("#"+E.menuSelInFocusID)),e.remove()},unload_all_option_selectors:function(){I.startT(arguments),E.stat.opts.find("ul.selector-sub").find("> li:not(#"+E.selInFocusID+")").remove(),I.endT(arguments)},update_editor_refs:function(e,t,s,r,a,o){return I.startT(arguments),!1},dom_replacements:function(e,t,s,r,a,o,n,i,l,c,d){var _,u,p;return I.startT(arguments),"section"==t&&(s.find("input, textarea.property-input").each(function(e){var t=D(this);I.hasValue(t.attr("name"))&&t.attr("name",t.attr("name").replace("tvr_mcth["+r+"]","tvr_mcth["+a+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+a+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+a+"]"))}),s.find(".section-name .name-text").text(o),s.find(".section-display-name").val(o),s.find(".rename-input").val(o),s.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(s).each(function(){var e=D(this);e.attr("id",e.attr("id").replace(r,a))})),"selector"==t&&(s.find(".selector-name").attr("title",I.regular_escape_quotes(c)),s.find(".selector-name .name-text").text(l),s.find(".selector-label").val(l+"|"+c),s.find(".selector-name-input").val(l),s.find(".selector-css-textarea").val(c)),"group"==t&&(s.removeAttr("id"),s.attr("class",s.attr("class").replace("property-fields-all-devices","property-fields-"+d)),"all-devices"!=d&&s.find("input.property-input, textarea.property-input, input.disabled-tracker, input.chained-tracker, input.post-sel-css, input.post-sel-data").each(function(e){var t=D(this);t.attr("name",t.attr("name").replace("tvr_mcth","tvr_mcth[non_section][m_query]["+d+"]"))}).end().find("div.property-tag, div.subgroup-tag, pre.custom-css-pre").each(function(){var e=D(this);e.attr("id",e.attr("id").replace("-all-devices","-"+d))})),"selector"!==t&&"group"!==t||(s.find("div.sel-code-alias").text(c),s.find("input, textarea.property-input").each(function(e){var t=D(this);I.hasValue(t.attr("name"))&&t.attr("name",t.attr("name").replace("tvr_mcth["+r+"]["+n+"]","tvr_mcth["+a+"]["+i+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+a+"]["+i+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+a+"]["+i+"]"))}),s.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(s).each(function(){try{var e=D(this);e.attr("id",e.attr("id").replace(r+"-"+n,a+"-"+i))}catch(e){}})),"dyn_item"==t&&(_=r,u=a,p=o,s.attr("id",s.attr("id").replace(_,u)),s.find("input, textarea").each(function(){var e=D(this);e.attr("name",e.attr("name").replace("["+_+"]","["+u+"]"))}),s.find(".script-display_name, .mquery-label").val(p),s.find(".name-text").text(p)),I.endT(arguments),s},add_section:function(e,t){I.startT(arguments);var s=!1;t||(t=TvrLang.untitled_folder,s=!0),t=I.resolve_unique_name(t,D("#tvr-menu"),".section-name");var r=E.dom_replacements(!1,"section",D(E.templates.sectionM).add(E.templates.section),"selector_section",I.convert_to_param(t),t);D("#tvr-options").append(r[1]);var a=D("#tvr-menu");a.append(r[0]);var o=a.find("li.section-tag").filter(":last"),r=E.get_meta(o,"section");o.hide().fadeIn("fast",function(){var e=D("#section-count-state");E.update_count(e,"add",1,"section"),s&&(E.toggle_rename_section(o.find("span.toggle-rename-section")),o.find("input.rename-input").select())});r=q.dom_to_data({M:r,domDepth:"section",return:"mtData"});E.refresh_sortable();a.closest(".menu-scrollable");return I.scroll_to(D("#main-menu-popdown"),{bottom:!0}),r=z.user_action(r,{items:[t],val:E.title(e),icon:[{icon:E.hi.section},{icon:"add-icon tvr-icon"}]}),z.ajax_save_settings({settings:r}),I.endT(arguments),!0},toggle_rename_section:function(e){I.startT(arguments);var t=E.get_meta(e,"section"),s=(t=E.get_meta(e,"section")).sectionM.find(".edit-section-form"),t=t.sectionM.find(".section-name");s.hasClass("show")?(t.show(),s.removeClass("show")):(t.hide(),s.addClass("show"))},action_rename_section:function(e){I.startT(arguments);var t=E.get_meta(e,"section"),s=t.sectionM.find(".rename-input").val();if(I.convert_to_param(s)==t.sectionSlug)(i=[]).newName=t.sectionSlug,i.newNameHuman=s;else if(!(i=I.new_name_checks(s,"folder")))return!1;var r=t.sectionM.find("input.section-display-name").val(),a=i.newName,o=i.newNameHuman,n=t.sectionSlug,s=t.sectionM.add(t.section);m&&(s=s.add(D(m.get_style_nodes(t))));var i=E.is_cur("sec",n);E.dom_replacements(t,"section",s,n,a,o),t=E.get_meta(D("#strk-"+a),"section"),E.toggle_rename_section(t.sectionM),i&&E.update_global_vars(E.get_meta(t.section.find("li.in-focus"),"selector"));n=T.modify_main_js_object("rename",{},{rebuild:!0,callbackDepth:["section"],maxDepth:"section",targetDepth:"section",targetSection:n,new_key:a,new_label:o}),a="";r!=o&&(a+=TvrLang.previous_name+": "+r+"\n",a+=TvrLang.new_name+": "+o),n=z.user_action(n,{items:["section"],val:E.title(e),M:t,valTT:a,icon:[{icon:E.hi.section},{icon:"edit-icon tvr-icon"}]}),z.ajax_save_settings({settings:n}),I.endT(arguments)},copy_section:function(e){I.startT(arguments);var t=E.get_meta(e,"section");z.log_action(t.sectionM,"copy");var s=t.sectionSlug,r=t.sectionH,a=I.resolve_unique_name(t.sectionH,D("#tvr-menu"),".section-name","Copy"),o=I.convert_to_param(a),n=!1,i=[t.sectionM[0],t.section[0]];m&&(n=m.get_style_nodes(t),i=i.concat(n));i=E.dom_replacements(t,"section",E.proper_clone(D(i)),s,o,a);i.removeAttr("copy-in-prog").find("li.in-focus").removeClass("in-focus"),i.find("img.ajax-loader").remove(),t.sectionM.after(i[0]),t.section.after(i[1]),m&&m.insertCopiedStyleNodes(n,i);n=D("#section-count-state"),i=t.sectionM.find("span.selector-count-state").attr("rel");E.update_count(n,"add",1,"section",i),z.unlog_action(t.sectionM,"copy"),I.hasValue(E.selInFocusID)&&E.update_prev_next_sel_buttons(E.selInFocusID);o=T.modify_main_js_object("copy",{},{M:t,targetDepth:"section",maxDepth:"section",origSlug:s,origHuman:r,newSlug:o,newHuman:a}),o=T.reorder_after_copy(o,t.sectionM,!0);E.refresh_sortable(),o=z.user_action(o,{items:["section"],val:E.title(e),M:t,valTT:a,icon:e.attr("class")}),z.ajax_save_settings({settings:o}),I.endT(arguments)},delete_section:function(r){I.startT(arguments);var a=E.get_meta(r,"section");if(z.action_in_prog(a.sectionM,"delete")||z.action_in_prog(a.sectionM,"all-sels-loading"))return!1;if(1<I.obj_length(E.uiData[a.sectionSlug])&&!confirm(tvrsprintf(TvrLang.delete_folder_confirm,a.sectionH)))return!1;z.log_action(a.sectionM,"delete"),a.sectionM.fadeOut("fast",function(){var e=a.sectionM.find("span.selector-count-state").attr("rel");E.update_count(D("#section-count-state"),"subtract",1,"section",e);var t,s=I.hasValue(E.selInFocusID)&&E.is_cur("sec",a.sectionSlug);s&&(E.expanded("quick_section")&&E.close_quick_edit(),t=(t=E.itemScan("selector","next","getID",a.sectionSlug))||E.itemScan("selector","prev","getID",a.sectionSlug)),a.section.remove(),a.sectionM.remove(),m&&m.edit_style_nodes(a,"delete");e=T.modify_main_js_object("delete",{},{rebuild:!0,maxDepth:"section",targetDepth:"section",targetSection:a.sectionSlug});E.after_style_options_deleted("section"),s&&t&&E.tvr_iterate_selectors_v(!1,t),t||E.update_prev_next_sel_buttons(!1),e=z.user_action(e,{items:["section"],val:E.title(r),M:a,icon:r.attr("class")}),z.ajax_save_settings({settings:e})}),I.endT(arguments)},toggle_add_selector:function(e){I.startT(arguments);var t=E.get_meta(e,"section").sectionM.find(".add-selector-form");t.hasClass("show")?E.close_add_selector(t):E.reveal_add_selector(t),I.endT(arguments)},reveal_add_selector:function(e){I.startT(arguments);var t=E.get_meta(e,"section");e.addClass("show"),t.sectionM.find(".menu-arrow").hasClass("on")||E.toggle_folder(t.sectionM),I.endT(arguments)},close_add_selector:function(e){I.startT(arguments),e.removeClass("show"),e.find("input.selector-css-textarea, input.selector-name-input").val(""),I.endT(arguments)},selector_checks_values:function(e,t,s){I.startT(arguments);var r,a=E.strip_beyoned_brace(e.val(),"name");if(""==a)return alert(TvrLang.enter_selector_name),!1;if(I.isNumeric(a))return alert("Plain numbers are not permitted as names. Please use some letters too."),!1;if(I.convert_to_param(a)==s)(r=[]).newName=s,r.newNameHuman=a;else if(!(r=I.new_name_checks(a,"selector")))return!1;return t?(r.code=t,I.endT(arguments),r):(alert(TvrLang.enter_css),!1)},show_hide_sel_custom:function(e,t){I.startT(arguments),E.analyse_sel_code(e).custom_styles?t.addClass("custom-styles"):t.removeClass("custom-styles"),I.endT(arguments)},analyse_sel_code:function(e){I.startT(arguments);var t,s=[];return 0<=e.indexOf("{")?(s.custom_styles=!0,t=e.split("{"),s.code=t[0]):(s.custom_styles=!1,s.code=e),I.endT(arguments),s},add_selector:function(e){if(I.startT(arguments),!E.allowed_action(e,"Add Sel"))return!1;var t=E.get_meta(e,"section"),s=E.selector_checks_values(t.sectionM.find(".add-selector-form .selector-name-input"),E.strip_beyoned_brace(t.sectionM.find(".add-selector-form .selector-css-textarea").val()),!1);if(!s)return!1;var r=E.dom_replacements(t,"selector",D(E.templates.selectorM).add(E.templates.selector),"selector_section",t.sectionSlug,t.sectionM.find(".name-text").text(),"selector_css",s.newName,s.newNameHuman,s.code),a=D(r[1]),o=E.pref.pg_focus;T.maybe_add_group_template(a,t.sectionSlug,s.newName,s.newNameHuman,s.code,t.tabSlug,o),E.editor_and_gui()&&"code"!==o&&T.maybe_add_group_template(a,t.sectionSlug,s.newName,s.newNameHuman,s.code,t.tabSlug,"code"),E.sidebar_showing()&&this.set_sidebar_size(E.editor_only_left(),!1),t.sectionM.find(".selector-sub").append(r[0]),t.section.find(".selector-sub").append(a),E.update_count(t.sectionM.find(".selector-count-state"),"add",1,"selector",""),t=E.get_meta(t.section.find(".selector-tag").last(),"selector");a=!1;E.expanded("quick_section")&&(a=!0,E.close_quick_edit());o=q.dom_to_data({M:t,domDepth:"selector",clean:{selector:[["styles"],[o]]},cleanMaxDepth:"selector",skipSassCompile:!0}),o=T.run_global_scans(o,["update_indexes"]);return T.updateObjectAndSavePackage(o.savePackage,[{action:"append",trail:[t.sectionSlug,s.newName],key:"jsu",data:E.jsuVersion}]),E.tvr_iterate_selectors_v(t.selectorM),E.maybe_default_to_pg(),E.refresh_sortable(),E.close_add_selector(t.sectionM.find(".add-selector-form")),E.meta.sectionM.find(".add-selector-form").find(".selector-name-input, .selector-css-textarea").val(""),E.expanded("quick_selector")&&E.close_quick_edit(),a&&E.quick_edit(D("#sec-in-focus")),E.expanded("main_menu")&&(a=t.sectionM.find(".menu-arrow"),E.toggle_folder(a,!0),E.toggle_folder(a,!1)),O.maybe_resume_editor_focus(),o=z.user_action(o,{items:["selector"],val:E.title(e),M:t,pathTT:!0,icon:[{icon:E.hi.selector},{icon:"add-icon tvr-icon"}]}),z.ajax_save_settings({settings:o}),I.endT(arguments),!0},load_selector:function(e,t){I.startT(arguments);var s=[];if(t.items){var r=!1,a=t.pg_focus||E.pref.pg_focus,o=E.editor_and_gui()&&"code"!==a;if(t.replaceExisting){var n=this.get_code_meta(e);if(I.isDomEl(n.$property_fields)){if("code"===a)return e.selector.find(".group-tag").not(n.$group).remove(),e.selector;r=n.$property_fields.detach()}}for(var i=0;i<t.items.length;i++){var l,c,d,_,u=t.items[i],p="selectorM"===u?"selector":"property",f="#"+("selectorM"===u?"strk":"opts")+"-"+e.sectionSlug,g=f+"-"+e.selectorSlug,m=D(g);m.length&&!t.replaceExisting||(e.groupSlug=a,d={M:e,load:"selector",templateKey:u,maxDepth:p,callbackDepth:["selector","group","property"]},l=t.mq_key||E.get_mq_focus(),"selector"===u?("all-devices"===l?d.recurse_key=["important"]:d.onlyRecurse=!0,d.mq_key=l):"selectorM"===u&&(d.incRecurse=!1),"selectorM"===u?m=q.data_to_template(e,d):"selector"===u&&(E.stat.styleComponents.html(""),(g=(c=(m=T.get_selector_data(e,l).data?q.data_to_template(e,d):E.dom_replacements(!1,"selector",D(E.templates.selector),"selector_section",e.sectionSlug,!1,"selector_css",e.selectorSlug,e.selectorH,e.selectorCode)).find(".group-tag-"+a)).find("div.property-fields-"+l)).length||(T.maybe_add_group_template(m,e.sectionSlug,e.selectorSlug,e.selectorH,e.selectorCode,l,a),g=c.find("div.property-fields-"+l),"flexbox"!==a&&"grid"!==a||(p=T.get_js_object_data([e.sectionSlug,e.selectorSlug],"all-devices"),u="flexbox"===a?"flexitem":"griditem",I.checkObject(p.data,["pg_"+u])&&(d="flexbox"===a?"flexcontainer":"generalgrid",T.flip_flex_or_grid_item_switch(g,g.find(".subgroup-control-"+d),p.levels,u),g.add(E.stat.grid).addClass("show-single-griditem"),"grid"===a&&(E.pref.grid_focus="griditems")))),"grid"===a&&(g=T.get_js_object_data([e.sectionSlug,e.selectorSlug],"all-devices").data,_=E.get_nth_focus(g),c.find(".tab-control-griditems:not(.nth-item-radios):not(.sub-label)").find("input.property-input").each(function(){var e=D(this);e.attr("name",I.replace_variable_name_attr(e.attr("name"),_))}),_&&c.find("span.grid-item-num").text(": "+_),parseInt(E.pref.grid_highlight)&&c.find(".grid-highlight").addClass("on"),parseInt(E.pref.expand_grid)&&c.find(".expand-grid").addClass("on")),o&&(r?m.find(".group-tag-code").append(r):T.maybe_add_group_template(m,e.sectionSlug,e.selectorSlug,e.selectorH,e.selectorCode,l,"code")),E.sidebar_showing()&&(c.addClass("show"),this.set_sidebar_size(E.editor_only_left(),!1)),m.addClass("in-focus")),t.replaceExisting?D("#"+t.replaceExisting).replaceWith(m):D(f).find(".selector-sub").append(m)),s[i]=m}}return I.endT(arguments),1<s.length?s:s[0]},get_sel_abs_index:function(e,t){return 0},get_nth_focus:function(e){var t;e||(t=E.getM(),e=E.uiData[t.sectionSlug][t.selectorSlug]);e=I.checkObject(e,["nth_item"]);return!1===e?1:parseInt(e)},getM:function(){return E.get_meta(D("#"+E.selInFocusID),"selector")},toggle_modify_selector:function(e){e=E.get_meta(e,"selector").selectorM.find(".edit-selector-form");e.hasClass("show")?(e.removeClass("show"),E.expanded("quick_selector")&&E.close_quick_edit()):e.addClass("show")},strip_beyoned_brace:function(e){return(e=e.split("{"))[0]?(e=e[0]).trim():""},action_modify_selector:function(e,t,s,r){I.startT(arguments);var a=E.get_meta(e,"selector");t=t||{};var o=E.selector_checks_values(a.selectorM.find(".selector-name-input"),E.strip_beyoned_brace(a.selectorM.find(".selector-css-textarea").val()),a.selectorSlug);if(!o)return!1;var n=a.selectorM.find(".selector-label").val().split("|"),i=n[0],l=n[1],c=a.selectorSlug,d=l!==o.code,_=o.newName,u=o.newNameHuman,p=a.sectionSlug,n=a.selectorM.add(a.selector);E.dom_replacements(a,"selector",n,p,p,a.sectionH,c,_,u,o.code);if(E.is_cur("sel",a.selectorID)&&(E.update_global_vars(E.get_meta(a.section.find("li.in-focus"),"selector")),E.expanded("quick_selector")&&E.close_quick_edit()),!E.el_selected&&E.iframe_functions_loaded()&&m.reposition_overlays({con:"reg"}),t=T.modify_main_js_object("rename",{},{rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:p,targetSelector:c,new_key:_,new_label:u,new_code:o.code,orig_code:l}),a=E.get_meta(e,"selector"),t=T.modify_main_js_object("group_to_css",t,{M:a,maxDepth:"group",recurse_key:["m_query"],triggeredFromEditor:r,selCodeChanged:d&&{oldCode:l,newCode:o.code}}),r||O.update_adaptable_editor({M:a,directContent:q.resolve_inline_editor_content(a),contentShouldChange:!0}),s){var f=E.get_meta(D("#strk-"+s),"section");if(!I.new_name_checks(u,"selector",f.sectionM))return!1;f.sectionM.find(".menu-arrow").hasClass("on")||E.open_folder(f),a.sectionM.find(".menu-arrow").hasClass("on")||E.open_folder(a),a=E.get_meta(D("#"+a.selectorMID),"selector"),t=E.get_dom_order(t,a.selectorM,{prevSec:"",newSec:"",orig_order:["this"],new_order:["this"],map:[]},!1,!0),a.selectorM.detach().appendTo(f.sectionM.find("ul.selector-sub")),a=E.selector_received({},{item:a.selectorM}),t=E.get_dom_order(t,a.selectorM,E.menuOrder,!0,!0)}f="";return i!=u&&(f+=TvrLang.previous_name+": "+i+"\n",f+=TvrLang.new_name+": "+u),l!=o.code&&(f+=f?"\n":"",f+=TvrLang.previous_code+": "+l+"\n",f+=TvrLang.new_code+": "+o.code),E.dontLogSelectorChange||(t=z.user_action(t,{items:["selector"],val:E.title(e),M:a,valTT:f,pathTT:!0,icon:[{icon:E.hi.selector},{icon:"edit-icon tvr-icon"}]})),z.ajax_save_settings({settings:t,timerName:"modify_selector_"+p+"_"+c}),a.selectorM.find(".edit-selector-form").hasClass("show")&&E.toggle_modify_selector(a.selectorM),I.endT(arguments),!0},proper_clone:function(e){I.startT(arguments);var t=e.clone();return t.find("div.sp-replacer, div.sp-container").remove(),t.find("input.color.bound").removeClass("bound"),E.colorpicker_bind(t),I.endT(arguments),t},copy_selector:function(e){if(!E.allowed_action(e,"Add Sel"))return!1;var t=E.get_meta(e,"selector"),s=E.load_selector(t,{items:["selector"]}),r=(t=E.get_meta(s,"selector")).selectorSlug,a=t.selectorH,o=I.resolve_unique_name(t.selectorH,t.sectionM,".selector-name","Copy"),n=I.convert_to_param(o),s=E.dom_replacements(t,"selector",E.proper_clone(D([t.selectorM[0],t.selector[0]])),t.sectionSlug,t.sectionSlug,a,r,n,o,t.selectorM.find(".selector-css-textarea").val());s.removeClass("in-focus").removeAttr("copy-in-prog").find("img.ajax-loader").remove(),t.selectorM.after(s[0]),t.selector.after(s[1]),E.update_count(t.sectionM.find(".selector-count-state"),"add",1,"selector",""),I.hasValue(E.selInFocusID)&&E.update_prev_next_sel_buttons(E.selInFocusID);a=T.modify_main_js_object("copy",{},{M:t,targetDepth:"selector",maxDepth:"selector",origSlug:r,origHuman:a,newSlug:n,newHuman:o}),a=T.reorder_after_copy(a,t.selectorM,!0);a=T.modify_main_js_object("update_section_css",a,{M:t,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]});n="#strk-"+t.sectionSlug+"-"+n;E.tvr_iterate_selectors_v(D(n),n,"copy"),a=z.user_action(a,{items:["selector"],val:E.title(e),M:t,pathTT:!0,valTT:o,icon:e.attr("class")}),z.ajax_save_settings({settings:a})},delete_selector:function(r){I.startT(arguments);var a=E.get_meta(r,"selector");if(z.action_in_prog(a.selectorM,"delete")||z.action_in_prog(a.selectorM,"data-load"))return!1;z.log_action(a.selectorM,"delete"),a.selectorM.fadeOut("fast",function(){var e,t=E.expanded("quick_selector"),s=I.hasValue(E.selInFocusID)&&E.is_cur("sel",a.selectorID);E.update_count(a.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),s&&(t&&E.close_quick_edit(),e=(e=E.itemScan("selector","next","getID",a.sectionSlug,a.selectorSlug,{incCurrentSection:!0}))||E.itemScan("selector","prev","getID",a.sectionSlug,a.selectorSlug,{incCurrentSection:!0})),a.selector.remove(),a.selectorM.remove();t=T.modify_main_js_object("delete",{},{rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:a.sectionSlug,targetSelector:a.selectorSlug}),t=T.modify_main_js_object("update_section_css",t,{M:a,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]});E.after_style_options_deleted("selector"),t=E.js_check_values(t,a),s&&e&&E.tvr_iterate_selectors_v(!1,e),e||E.update_prev_next_sel_buttons(!1),O.ace_sync_details={},t=z.user_action(t,{items:["selector"],val:E.title(r),M:a,pathTT:!0,icon:[{icon:E.hi.selector},{icon:r.attr("class")}]}),z.ajax_save_settings({settings:t})}),I.endT(arguments)},remove_property_group:function(e,t){I.startT(arguments);var s=e.group.find("div.property-fields-"+t);return s?(s.remove(),I.endT(arguments),!0):(I.endT(arguments),!1)},update_accordion:function(e,t){I.startT(arguments);var s,r=t.find("li.accordion-item"),a=e.parent(),o=a.hasClass("property-menu");return a.hasClass("show-content")&&(s=!0),t.find(".accordion-menu-arrow.on").removeClass("on"),r.length?r.slideUp(function(){t.find(".show-content").removeClass("show-content")}):t.find(".show-content").removeClass("show-content"),s||(o&&(E.pgInFocusWiz=a.attr("id").replace("comp-",""),I.isDomEl(m.triggerEl)&&m.getAndUpdateCompStyles(!0,!0,m.triggerEl,"obj")),a.find(".accordion-menu-arrow").addClass("on"),e.siblings("li.accordion-item").length?e.siblings("li.accordion-item").slideDown(function(){a.addClass("show-content")}):a.addClass("show-content")),I.endT(arguments),!1},trigger_pg_icon_click:function(e){e=e||E.pref.pg_focus,E.dontSavePgFocus=!0,E.stat.css_icons.find("ul.styling-option-icons").find(".pg-icon-"+e).trigger("click"),E.dontSavePgFocus=!1},pg_icon_pressed:function(e,t){I.startT(arguments);var s=D("#"+E.selInFocusID);if(!I.isDomEl(s))return!1;var r=E.get_mq_focus(),a=e.attr("rel"),o=E.get_meta(s,"selector");E.pref.pg_focus=a;s=(o=E.ensure_selector_and_pg_loaded(o,t,r,a)).selector.find(".styling-options"),r=E.stat.css_icons.find(".styling-option-icons");E.update_tab(s,".group-tag",r,a,".pg-icon",".pg-focus"),"grid"!==a&&"transform"!==a||E.js_check_values({},o),E.after_tab_switch(o),E.editor_and_gui()&&E.maybe_adjust_side_options(),I.action_after_timeout("pg_expensive",3,{item:function(e){E.iframe_functions_loaded()&&m.get_computed_styles({data:E.curSelCSS,con:"str"}),E.refresh_comp_css()},args:[o]}),E.dontSavePgFocus||D.get(E.ajaxUrl+"&pg_focus="+a,function(){}),I.endT(arguments)},ensure_selector_and_pg_loaded:function(e,t,s,r){return t||E.load_selector(e,{items:["selector"],replaceExisting:e.selectorID,mq_key:s}).addClass("in-focus"),E.get_meta(E.get_pg_focus_obj(r),"group")},clear_data_level:function(e,t){I.startT(arguments);var s,r=e.attr("data-input-level"),a="pgtab"===r,o=a?"group":r,n={M:t=t||("tab"===r?E.get_meta(D("#"+E.selInFocusID),"selector"):E.get_meta(e,o)),clear:{},clean:{}},i=["styles","pie","pg_chained","pg_flexitem","pg_griditem","ast"];t.selectorSlug;switch(r){case"section":var l=t.section.find("div.property-tag");if(n.clear.section=[!1,i],1<I.obj_length(E.uiData[t.sectionSlug]))if(!confirm(tvrsprintf(TvrLang.clear_folder_confirm,t.sectionH)))return!1;break;case"selector":l=t.selector.find("div.property-tag"),n.clear.selector=[i];break;case"tab":var c=e.closest("span.mq-tab").attr("rel");l=t.selector.find("div.property-fields-"+c).find("div.property-tag"),n.mq_key=c,n.onlyRecurse="all-devices"!==c,n.clear.selector=[i];break;case"group":case"pgtab":case"subgroup":n.mq_key=t.tabSlug,"all-devices"===n.mq_key?n.recurse_key=["important"]:n.onlyRecurse=!0,n.clear.selector=[["styles"],[t.groupSlug]],"group"===r||"flexbox"===t.groupSlug?l=E.get_group(t).find("div.property-tag"):(s=a&&e.data("tab-group"),c=a?Object.keys(TvrMT.data.prog.pg_tab_props[t.groupSlug][s]):TvrMT.data.prog.subGroupKeys[t.subgroupSlug],l=E.get_subgroup_or_tabgroup(t,!1,s),n.clear.selector.push(c),E.maybe_add_nth_index_filter(a,s,t,e,n.clear.selector)),r="group"}E.clear_fields(l,e,r,t,n),n=T.modify_main_js_object("clear",n,{maxDepth:"selector",dontUpdateSavePackage:!0}),n=T.modify_main_js_object("group_to_css",n,{maxDepth:"group",recurse_key:["m_query"]}),n=T.modify_main_js_object("clean",n,{maxDepth:"selector",clean:n.clear}),n=E.js_check_values(n,t),E.editor_and_gui()&&O.gui_to_editor(!1,t),n=z.user_action(n,{items:[r],val:E.title(e),M:t,pathTT:"section"===r,icon:[{icon:z.h_i_class(r,t)},{icon:e.attr("class")}]}),z.ajax_save_settings({settings:n}),I.endT(arguments)},clear_fields:function(e,t,s,o,r){I.startT(arguments),e.each(function(){var e=D(this),t=e.prev(".subgroup-tag"),s=e.find("input.property-input, input.mt-supplementary-picker, textarea.property-input"),r=e.find("span.important-toggle"),a=e.hasClass("has-variable-line");s.val(""),a&&e.find(".tvr-input-wrap:not(:first-child)").remove(),s.hasClass("color")&&E.clear_spectrum_inputs(E.get_meta(e,"property"),!1),s.hasClass("mt-event-input")&&E.adjust_event_fields(s),s.hasClass("tvr-editor-hidden")&&E.is_cur("sel",o.selectorID)&&(a=E.stat.adaptableEditor,e=O.eds[a.attr("id")],a.hasClass("ace_editor")&&e&&O.set_editor_content(a,e,{M:o})),E.post_edit(s),r.hasClass("active")&&E.input_icon_toggle(r,!0,!0),!I.isDomEl(t)||(t=t.find(".chained-toggle")).hasClass("active")&&E.input_icon_toggle(t,!0,!0)}),I.endT(arguments)},update_tab:function(e,t,s,r,a,o,n){I.startT(arguments);var i,l,c=s.find(a+"-"+r);s.find(a).removeClass("active").end().find(o).val(r),c.addClass("active"),n||(e.find(t+".show").removeClass("show"),(i=e.find(t+"-"+r)).addClass("show"),".mq-tab"===a&&e.addClass("show"),".pg-icon"===a&&e.find(t+"-"+r).find(".property-fields").removeClass("show").end().find(".property-fields-"+E.get_mq_focus()).addClass("show"),".dialog-tab"===a&&"display-css-code-dialog"===E.get_dialog_focus(s).attr("id")&&(parseInt(r)!==s.find(a).length-1&&(D.get(E.ajaxUrl+"&generated_css_focus="+r,function(){}),E.pref.generated_css_focus=r),i=(l=i.find("pre").first()).attr("id"),O.generated_css_auto_line_done[i]||(l=O.get_editor(l),O.find_selector_line(l,i,{find:O.current_selector_find_config(c.data("mode"))},!1)))),I.endT(arguments)},mq_tab_pressed:function(e,t,s,r){I.startT(arguments);var a=!0,o="",n=e.attr("rel"),i=E.stat.res.find(".query-tabs");if(!r&&p.check_synced_page_builder_responsive_views(n))return!1;E.pref.mq_device_focus=n,D.get(E.ajaxUrl+"&mq_device_focus="+n,function(){});var l,c,d=I.hasValue(E.selInFocusID);d&&(l=E.get_meta(E.get_pg_focus_obj(),"group"),l=E.ensure_selector_and_pg_loaded(l,t,n,E.pref.pg_focus),a=!1,o=".property-fields",c=E.get_pg_focus_obj()),E.update_tab(c,o,i,n,".mq-tab",".device-focus",a),d&&(E.js_check_values({},l),E.after_tab_switch(l)),I.action_after_timeout("mq_expensive",3,{item:function(e){E.reset_preview_width_for_current_tab(e,!1,s),E.get_local_window_function("reset_mob_previews")()},args:[n]}),I.endT(arguments)},reset_preview_width_for_current_tab:function(e,t,s){e=e||E.get_mq_focus(),E.get_local_window_function("update_iframe_slider")(e,E.mqs[e].min,E.mqs[e].max,t,s)},get_local_window_function:function(e,t){return s=TvrMT.detachedWin,u=window.TvrMT.MTdetached,(!t&&E.detached_window_available(!0)&&!!s.MTlocal&&s.MTLocalFunctionsReady?s:window).MTlocal[e]},detached_window_available:function(e){return!(!TvrMT.detachedWin||!window.TvrMT.MTdetached)&&(s=TvrMT.detachedWin,u=window.TvrMT.MTdetached,!e||e&&E.pref.detach_preview)},after_tab_switch:function(e,t,s,r,a){var o,n;I.startT(arguments),"css"===e||E.pref.show_code_editor||("code"===e.groupSlug?E.stat.tvr.addClass("onlyInlineEditor"):E.stat.tvr.removeClass("onlyInlineEditor"),n=m?E.stat.tvr.add(E.stat.fHTML):E.stat.tvr,"transform"===e.groupSlug&&E.default_to_tab("transform"),"grid"===e.groupSlug?(n.addClass("showGridControls"),E.default_to_tab("grid"),o="show-single-griditem",e.group.find(".property-grid").hasClass(o)?E.stat.grid.addClass(o):E.stat.grid.removeClass(o)):n.removeClass("showGridControls"),"code"!==e.groupSlug&&!E.editor_and_gui()||E.editor_to_gui_running||O.update_adaptable_editor({M:e,directContent:q.resolve_inline_editor_content(e),mode:parseInt(E.pref.allow_scss)?"scss":"css"}),I.action_after_timeout("tab_switch_deferred",3,{item:function(e){E.maybe_scroll_image_fields(e),E.adjust_scroll_buttons(e,"style")},args:[e]})),"css"===e&&(n=r.data("code-type"),O.update_adaptable_editor({M:e,directContent:r.find("textarea").val(),mode:parseInt(E.pref.allow_scss)&&"css"===n?"scss":n})),I.endT(arguments)},open_property_dropdown:function(e){var t=D("#"+E.selInFocusID),s=e.fieldData,e=e.group;if(!I.isDomEl(t)||!s)return!1;s=s[0].prop,e=t.find("div.field-"+e+"-"+s),s=e.hasClass("is-picker")?".property-input, .sp-preview-inner":".combo-arrow";e.find(s).trigger("click")},get_code_meta:function(e){var t=e.selector.find(".group-tag-code"),e=!!t&&t.find("div.property-fields-"+e.tabSlug);return{$group:t,$property_fields:e,$editor:E.stat.adaptableEditor,editor:O.eds["adaptable-editor"]}},js_in_focus:function(){return!(!E.stat.tvr.hasClass("show_code_editor")||"js"!=E.get_css_focus())},default_to_tab:function(e){I.startT(arguments),"mq"===e?E.mq_tab_pressed(E.stat.res.find(".mq-tab-"+E.get_mq_focus())):"css"===e?E.css_tab_pressed(E.stat.code.find(".css-tab-"+E.get_css_focus())):"wizard"===e?E.adv_tab_pressed(D("#adv-tabs").find(".adv-tab-"+E.get_wizard_focus())):"grid"!==e&&"transform"!==e||E.pg_tab_pressed(d.get_pg_fields(e).find("."+e+"-tab-"+E["get_"+e+"_focus"]()),e),I.endT(arguments)},get_mq_focus:function(){var e=E.pref.mq_device_focus;return I.hasValue(e)&&I.hasValue(E.mqs[e])||(e="all-devices"),e},get_wizard_focus:function(e){if(e&&!E.pref.wizard_expanded&&!E.pref.dock_wizard_right)return!1;e=E.pref.adv_wizard_tab;return E.pref.dock_wizard_right?e=e||"refine-targeting":e&&"html-inspector"!=e&&"refine-targeting"!=e||(e="css-computed"),e},get_css_focus:function(){return E.pref.css_focus||"all-browsers"},get_grid_focus:function(){var e=E.pref.grid_focus;return e||"gridtemplate"},get_transform_focus:function(){var e=E.pref.transform_focus;return e||"transform"},get_dialog_tab_focus:function(e){e=(e=(e=e||E.get_dialog_focus()).find("input.dialog-focus").val())||0;return parseInt(e)},get_dialog_focus:function(){return E.stat.dialogs.find("div.tvr-dialog.show")},get_tab_name:function(e){return D("#responsive-bar").find(".mq-tab-"+e).find(".mq-tab-txt").text()},get_pg_focus_obj:function(e){e=e||E.pref.pg_focus;e=D("#"+E.selInFocusID+"-"+e);return!!I.isDomEl(e)&&e},get_group:function(e,t){e=e.group.find("div.property-fields-"+e.tabSlug);return t&&(e=e.find("input.property-input")),!!I.isDomEl(e)&&e},get_pg_fields_obj:function(e,t){I.startT(arguments);var s=e.find("div.property-fields-"+t);return I.endT(arguments),!!I.isDomEl(s)&&s},get_subgroup_or_tabgroup:function(e,t,s){var r=E.get_group(e);if(!I.isDomEl(r))return!1;e=s?"div.tab-control-"+s:"div.subgroup-"+e.subgroupSlug,e=r.find(e);return!!I.isDomEl(e)&&(t&&(e=e.find("input.property-input")),!!I.isDomEl(e)&&e)},maybe_remove_group:function(e,t){if(I.startT(arguments),e){var s=E.get_meta(e,"group");if(!E.pg_check_values(s.group,t,!1)&&!E.input_toggles_enabled(s.group,"group",t))return I.endT(arguments),E.remove_property_group(s,t)}return I.endT(arguments),!1},input_toggles_enabled:function(e,t,s){"group"==t&&(e=e.find("div.property-fields-"+s));var r=!1;return e.find("input.input-toggle-tracker").each(function(e){return!(r=!0)}),r},selector_check_disabled:function(e){I.startT(arguments);var t,s,r=e.selectorM.find("p.sel-toggles"),a=D("#responsive-bar").find(".query-tabs");for(t in TvrMQsCombined)TvrMQsCombined.hasOwnProperty(t)&&(s=a.find("span.mq-tab-"+t).find(".disabled-icon"),I.isDomEl(r.find("input.disabled-tracker-"+t))?s.addClass("active").closest(".mq-tab").addClass("item-disabled"):s.removeClass("active").closest(".mq-tab").removeClass("item-disabled"));I.endT(arguments)},pg_check_values:function(e,t,s,r){var a=E.get_meta(e,"group"),o=!1;E.get_mq_focus();return r=r||"#nothing",a.group.find("div.property-fields-"+t).find("input.property-input, textarea.property-input").not(r).each(function(e){if(I.isDefined(D(this).val()))return!(o=!0)}),o},js_check_values:function(e,t,s,r,a){I.startT(arguments);var o={incRecurse:!0,onlyRecurse:!1,mq_key:!1,M:E.get_meta(t.section||t,"section"),maxDepth:"group"};e.has_values={},e=T.modify_main_js_object("check_values",e,o),o.incRecurse=!1;var n=(e=T.modify_main_js_object("update_dots",e,o)).has_values;return n.current_sel_checked&&(E.update_tab_dots(n),E.update_group_dots(n),"grid"===E.pref.pg_focus&&(o={itemsWithValues:n.itemsWithValues},E.grid.isAllItems&&d.update_grid_and_radio_item_formatting("itemdots",o),E.update_pgtab_dots(n)),"transform"===E.pref.pg_focus&&E.update_pgtab_dots(n)),r&&z.silent_save(!1,e.savePackage),I.endT(arguments),e},update_tab_dots:function(e){for(var t in TvrMQsCombined){var s;TvrMQsCombined.hasOwnProperty(t)&&(s=E.item_has_styles(e,"tab",t),E.update_style_signal(E.stat.res.find(".mq-tab-"+t),s))}},update_pgtab_dots:function(e){var t=E.get_pg_meta(),s=T.get_selector_data(t,t.tabSlug).data,r=I.isDefined(s.nth_item)?s.nth_item:1;if(t){var s=t.groupSlug,a={},o=I.checkObject(e,["propsWithValues",s]);if(o)for(var n=Object.keys(o),i=0;i<n.length;i++){var l=n[i],c=E.get_property_tab_control(l);c&&("griditems"===c?I.checkObject(o,[l,"value",r]):1)&&(a[c]=1)}t.group.find("span.mt-tab").each(function(){var e=D(this),t=e.attr("rel"),t=a[t];E.update_style_signal(e,t)})}},update_group_dots:function(s,e){E.stat.css_icons.find("li.pg-icon").each(function(){var e=D(this),t=e.attr("rel"),t=E.item_has_styles(s,"group",t);E.update_style_signal(e,t)})},item_has_styles:function(e,t,s){return I.checkObject(e,[t,s])?1:""},update_style_signal:function(e,t){e&&(t?e.addClass("hasValues"):e.removeClass("hasValues"))},css_tab_pressed:function(e){I.startT(arguments);var t=E.get_css_focus(),s=e.attr("rel"),r=s!=t&&E.stat.code.find("div.mt-full-code-"+t),a=E.stat.code,o=a.find(".css-code-tabs");E.update_tab(a,".mt-full-code",o,s,".css-tab",".css-focus"),E.pref.css_focus=s;o=E.stat.code.find("div.mt-full-code-"+s);E.after_tab_switch("css",r,t,o,s),D.get(E.ajaxUrl+"&css_focus="+s),E.toolbar_adjusted(),I.endT(arguments)},pg_tab_pressed:function(e,t,s){var r=e.closest(".property-"+t),a=r.find(".query-tabs"),o=e.attr("rel"),n="."+t+"-tab",e="."+t+"-tab-focus";E.update_tab(r,".tab-control",a,o,n,e),E.pref[t+"_focus"]=o,E.stat.tvr.attr("data-"+t+"-pgtab",o),D.get(E.ajaxUrl+"&"+t+"_focus="+o),E.refresh_comp_css(),"grid"===t&&(E.adjust_grid_line_scroll_buttons(E.get_meta(r,"group")),s&&m&&m.maybe_run_grid_control_update())},adv_tab_pressed:function(e){I.startT(arguments);var t=D("#advanced-wizard"),s=t.find(".query-tabs"),r=e.attr("rel");E.update_tab(t,".adv-area",s,r,".adv-tab",".adv-wizard-focus"),E.pref.adv_wizard_tab=r,E.maybe_update_wizard_panels(),D.get(E.ajaxUrl+"&adv_wizard_tab="+r,function(){}),I.endT(arguments)},maybe_update_wizard_panels:function(e){I.startT(arguments),e=e||{};var t,s=!!I.isDomEl(m.triggerEl,!1,m.stat.doc)&&m.triggerEl;E.intelli&&(t=E.get_wizard_focus(!0),!s||e.exclComp||e.onlyDeferred||"css-computed"!==t||m.getAndUpdateCompStyles(!0,!0,{},"obj"),!s||e.exclActual||e.onlyQuick||"css-inspector"!==t||q.update_stylesheet_rules(),!e.onlyQuick&&t&&e.forceHTMLUpdate&&(e.onlyDoHTMLScroll?E.update_wizard_html_scroll(e):E.update_wizard_html(e),s&&E.update_breadcrumbs(e))),I.endT(arguments)},dialog_tab_pressed:function(e){I.startT(arguments);var t=e.closest(".dialog-main"),s=t.find(".dialog-tabs"),r=e.attr("rel");E.update_tab(t,".dialog-tab-field",s,r,".dialog-tab",".dialog-focus"),I.endT(arguments)},combobox_clicked:function(e,t){I.startT(arguments),e.hasClass("sug-sel")?I.isDomEl(e.closest("li.in-focus"))||E.sug_css_clicked(e):(e.attr("rel"),(e.hasClass("has-arrows")||e.hasClass("cssfilter-combo"))&&E.combo_arrow_clicked(!1,e),e.hasClass("cssfilter-combo")&&E.feature_on(e)),I.endT(arguments)},combo_arrow_clicked:function(e,t){I.startT(arguments);var s="input"==(t=t||e.siblings("input")).prop("tagName").toLowerCase()?t:t.find("input");s.data("wasOpen")?E.close_combo_menu(s):E.open_combo_menu(s),s.hasClass("sug-sel")&&E.sug_css_clicked(s),I.endT(arguments)},open_combo_menu:function(e){e.MTautocomplete(),e.is(":focus")||e.focus(),e.MTautocomplete("search",""),E.combobox_focused(e)},close_combo_menu:function(e){e.MTautocomplete().MTautocomplete("close")},combobox_focused:function(e){e.hasClass("custom_css_unit")&&D("#css_unit_set").val("")},focus_on_current_combo_value:function(e){if(!E.comboIconReflow&&I.isDefined(e.value)){for(var t,s=E.get_custom_autocomplete(e).menu,r=0,a=D("li:not(.ui-autocomplete-category)",s.element),o=new RegExp("^"+I.escapeRegExp(e.value),"i");r<a.length;r++){var n=a.eq(r),i=n.text();if(I.isDefined(i)&&o.test(i)&&I.isDomEl(D(n),!0)){t=n;break}}t&&I.action_after_timeout("focus_menu_item",20,{item:function(){I.isDomEl(D(t),!0)&&s.focus(null,t)},args:[]})}},input_clear_icon_clicked:function(e,t){t=t||"";var s,r=e.siblings("input"+t),a=r.hasClass("sp-input-var")?E.get_related_meta("picker",e.closest(".sp-container")).M:E.get_meta(r,"property"),t=a.property;r.val("").focus(),t.hasClass("has-variable-line")&&(r.hasClass("vl-name-input")?E.toggle_optional_input(e.siblings(".toggle-optional-input")):(s=!1,r.closest(".tvr-input-wrap").find(".property-input").each(function(){if(""!==D(this).val().trim())return!(s=!0)}),s||E.delete_variable_field(t,r,a,!0))),E.maybe_toggle_google_fonts_field(r,""),E.run_input_updated(r)},format_combo_cat_toggle_atts:function(e){return' class="ui-toggle uit-par mt-combo-toggle toggle-sampled-items toggle-'+e+'" data-action="toggle-sampled" data-dyn-tt-root="'+e+'"data-aspect="'+e+'"'},wheelDropdown:{cssf:"",source:[],index:-1},valueChangeDropdown:function(e,t,s){var r=E.wheelDropdown.source.length-1,t=t?E.wheelDropdown.index+1:E.wheelDropdown.index-1;t<0?t=r:r<t&&(t=0);r=E.wheelDropdown.source[t];r===Object(r)&&(r=I.isDefined(r.value)?r.value:r.label),e.val(r),E.maybe_sync_fields(e),E.wheelDropdown.index=t},cycleDrowndownValues:function(e,t,s){var r,a,o=I.prop_to_cssf(e.attr("rel")),n=e.val(),i=E.wheelDropdown.cssf!==o||!I.isDefined(n);i&&(r=(a=E.resolve_combobox_source(e))[1]===Object(a[1])&&"value",E.wheelDropdown.source=a,E.wheelDropdown.cssf=o,a=I.isDefined(n)?I.in_array(n,a,!1,r):!1!==I.in_array(E.compProps[o],a,!1,r)?I.in_array(E.compProps[o],a,!1,r):I.in_array(E.compProps[o],a,!1,"label"),E.wheelDropdown.index=!1!==a?parseInt(a):-1),E.valueChangeDropdown(e,0<t.deltaY,s),i&&E.adjust_comp_span(e,"after"),z.ajax_save_settings({$property:e})},lastAutocompleteResponse:[],resolve_combobox_source:function(e,t,s,r){I.startT(arguments);var a,o,n,i,l,c,d,_,u,p,f=e.attr("rel"),g=(e.hasClass("sug-sel")?m.dom.sels:TvrMT.data.prog).combo[f];return"custom_paths"===f?E.get_site_pages:"css_length_units"===f?v.filter_css_units(g,e.data("prop")):(g=g||[],(e.hasClass("property-input")||e.hasClass("sp-input-var"))&&(a=E.gatheredCSS.root_cat_keys[f],_=I.prop_to_cssf(f),o=!!(c=TvrMT.data.prog.lh[_])&&E.get_default_unit(c.group,c.prop),n=E.support_sampling(f),i=[],l=[],u=[],a&&(d="color_extra"===a?"color":a,_="color_extra"===a,c=E.pref.my_props.sug_values,d=q.sort_number_unit_strings(I.uniqueArray(c[d].recent.concat(c[d].saved)),!1,f,!1,a,!1,_),_=c[a].copiedSrc,"grid_positions"!==a&&"grid_area"!==a||!I.checkObject(E.grid,["templateAreas"])||(c="grid_positions"===a?"implicit_names":"grid_areas",d=d.concat(E.grid.templateAreas[c])),_=q.sort_number_unit_strings(I.uniqueArray(d.concat(_)),!1,f),g.length&&g[0]===Object(g[0])?i=E.format_combo_suggestions(a,"suggestions",d):g=E.format_combo_suggestions(a,"suggestions",_),n&&(q.get_scss_variables("keys"),parseInt(E.pref.show_sampled_values)&&(l=E.format_combo_suggestions(a,"sampled")),E.pref.my_props.sug_variables&&parseInt(E.pref.show_sampled_variables)&&(p=q.sort_number_unit_strings(Object.keys(E.pref.my_props.sug_variables),!1,f,!0,a,o),u=E.format_combo_suggestions(a,"sampled_variables",p)))),p=[],"font_family"===f?p.push(TvrLang.google_font):"list_style_image"!==f&&"background_image"!==f&&"url"!==f||p.push("none"),(g=p.concat(i,g,u,l)).length||g.push("")),r=I.isDefined(r)?"curVal"===r?e.val():r:"",t&&e.MTautocomplete().MTautocomplete("option","source",g),s&&(e.MTautocomplete("search",r),E.maybe_combo_menu_width_change(e)),I.endT(arguments,1),g)},get_custom_autocomplete:function(e){e=D(e).data();return e["custom-MTautocomplete"]||e.customMTautocomplete},maybe_combo_menu_width_change:function(t){var e;t.hasClass("mt-slider")&&(e=E.get_custom_autocomplete(t),e=D(e.menu.element),I.action_after_timeout("new_menu_width",100,{item:function(e){v.hide_slider_set(),v.show_slider_set(t)},args:[e]}))},format_combo_cat_label:function(e,t){return TvrLang[e]},format_combo_suggestions:function(e,t,s){var r=[],a=s||E.pref.my_props.sug_values[e][t],o=E.format_combo_cat_label(t,e);if(a&&a.length)for(var n,i,l,c=0;c<a.length;c++)a[c]&&(l=(n=(i=a[c])===Object(i))?i.val:i,i=n?D.extend(!0,{},i):{},l={label:l,category:o},D.extend(!0,i,l),r.push(i));return r},add_variable_field:function(e,t){var s=e.closest(".property-tag"),r=s.find(".tvr-input-wrap").last(),a=r.find(".vl-post-line-name").find(".property-input").val(),o=r.clone(),e=o.find(".property-input");r.find(".vl-post-line-name").removeClass("show-optional-input").find(".property-input").val(""),o.find(".vl-item").removeClass("show-optional-input"),t.shiftKey||e.val(""),a&&o.find(".vl-pre-line-name").find(".property-input").val(a),o.find(".comp-style").html(""),r.after(o),o.find(".vl-main-input").find(".property-input").focus(),E.adjust_grid_line_scroll_buttons(E.get_meta(s,"group")),t.shiftKey&&z.ajax_save_settings({$property:e})},toggle_optional_input:function(e){e=e.parent();e.hasClass("show-optional-input")?e.removeClass("show-optional-input"):(e.addClass("show-optional-input"),e.find(".property-input").focus())},delete_variable_field:function(e,t,s,r){1<e.find(".tvr-input-wrap").length&&t.closest(".tvr-input-wrap").animate({opacity:0},200,function(){D(this).remove(),r&&E.adjust_grid_line_scroll_buttons(s)})},get_combo_menu_from_input:function(e){return D(E.get_custom_autocomplete(e).menu.element)},combobox_item_selected:function(e,t,s,r){I.startT(arguments);var a,o,n,i,l=s.closest(".property-tag"),c=t.item.value;return!s.hasClass("grid-area-add")&&(s.val(c),s.hasClass("sp-input-var")?(E.run_input_updated(s),!1):(s.hasClass("bg-image-select")&&setTimeout(function(e){I.scroll_input_end(e)},30,s),s.hasClass("property-input")&&(l.hasClass("has-variable-line")&&(""===c||(o=d.parseGridTracks(c).lines)&&1<o.length&&(a=s.attr("rel"),i=E.get_meta(s,"property"),(n=s.closest(".mt-vl-inner")).find(".tvr-input-wrap").remove(),o=E.dom_replacements(!1,"group",D(TvrMT.data.templates.input_wraps[a]),"selector_section",i.sectionSlug,!1,"selector_css",i.selectorSlug,i.selectorH,i.selectorCode,i.tabSlug),n.prepend(o),T.map_property_values_to_field(a,l,c.split(" ")),n=n.find(".tvr-input-wrap").first(),s=(-1<a.indexOf("template")?n.find(".vl-main-input"):n).find(".property-input"))),E.adjust_comp_span(s,"after"),i=E.get_meta(s,"property"),E.maybe_toggle_google_fonts_field(s,c)||E.maybe_sync_fields(s),E.update_input_width_and_scroll(s),z.ajax_save_settings({$property:s,comboAction:r})),"css_unit_set"===s.attr("id")&&(c=s.val(),s.closest("ul").find("input.custom_css_unit").val(c)),"select"===r&&"custom_paths"===s.attr("rel")&&(s.MTautocomplete("close"),E.change_preview_url(s.siblings(".change-preview-url"),t)),"viewed_import_stylesheets"===s.attr("rel")&&(s.MTautocomplete("close"),q.update_import_css_preview(!1,{c:s.closest(".stylesheet-to-import").find(".view-import-stylesheet")},"loadNew")),s.hasClass("sug-sel")&&(s.blur(),E.sug_sel_updated(s,{con:"combo"})),s.hasClass("cssfilter-combo")&&E.pseudo_updated(s,{input:1}),void I.endT(arguments)))},maybe_toggle_google_fonts_field:function(e,t){if(e.hasClass("tvr-font-select")){var s=e.closest(".field-wrap").siblings(".tvr-font-custom");return E.gFontTarget=s.find(".property-input"),t==TvrLang.google_font?E.show_google_fonts_field(s):E.hide_google_fonts_field(e,s),!0}return!1},hide_property_fields:function(e){e.each(function(){var e=D(this),t=e.find(".property-input");t.val(""),E.adjust_comp_span(t,"after"),e.removeClass("show-event-fields")})},sug_css_clicked:function(e){I.startT(arguments);var t=e.closest("li");t.hasClass("in-focus")||(D("#code-suggestions").find("li").removeClass("hover-elsewhere in-focus"),t.addClass("in-focus"),E.sug_sel_updated(e,{con:"sug_css_clicked"})),m.reposition_overlays({con:"intelli",scroll:1}),I.endT(arguments)},toggle_preview_page_menu:function(e){var t=e.parent();t.hasClass("expanded")?t.removeClass("expanded"):(t.addClass("expanded"),E.stat.changeUrlInputWrap.find("input").focus(),t=(e=t.find("span.fake-checkbox")).hasClass("on"),p.anyBuilderIsActive()?t||I.check_fake(e):t&&I.uncheck_fake(e))},get_toggle_data:function(e,t){I.startT(arguments),e?e=e.closest(".uit-par"):"show_interface"==t?e=D("#m-logo"):"hover_inspect"==t?e=D("#hover-inspect-toggle"):"mt_highlight"==t?e=D("#toggle-highlighting"):"show_code_editor"==t?e=D("#toggle-full-code-editor"):"show_text_labels"==t?e=D("#mymtonoffswitch-show_text_labels").closest(".ui-toggle"):"dock_editor_left"==t?e=D("#mymtonoffswitch-dock_editor_left").closest(".ui-toggle"):"dock_options_left"==t?e=D("#mymtonoffswitch-dock_options_left").closest(".ui-toggle"):"detach_preview"==t?e=D("#mymtonoffswitch-detach_preview").closest(".ui-toggle"):"show_sampled_variables"!==t&&"show_sampled_values"!==t||(e=D("#"+t));var s=!1,r=!1,a=!1;"show_code_editor"==(t=t||e.data("aspect"))||"show_code_editor"==e.data("aspect")?(r=e,e=D("#toggle-full-code-editor"),s=D("#code-editor-alias")):"show_extra_actions"==t?(r=e,e=D("#show_extra_actions")):"show_sampled_variables"===t||"show_sampled_values"===t?(r=e,e=D("#"+t)):"hover_inspect"==t?(r=e,e=D("#hover-inspect-toggle")):"selname_code_synced"==t?(r=e,e=D("#selname_code_synced")):"code_manual_resize"==t?(r=e,e=D("#code_manual_resize")):"pseudo_classes"!=t&&"pseudo_elements"!=t&&"page_specific"!=t&&"favourite_filter"!=t||(a=D("#css-filters"),r=e,s=E.get_css_filter_alias(e,t));var o=e.hasClass("on")?0:1;return I.endT(arguments),{clicked:e,aspect:t,turnOn:o,alreadyOn:!o,$alias:s,$aliasTrigEl:r,$filter_scope:a}},feature_on:function(e,t,s){I.startT(arguments),s=s||{};var r=E.get_toggle_data(e,t);s.offFirst&&(E.feature_off(e,t,s.offFirst),r=E.get_toggle_data(e,t)),r.alreadyOn||E.toggle_feature(e,t,s),I.endT(arguments)},feature_off:function(e,t,s){I.startT(arguments),s=s||{},E.get_toggle_data(e,t).alreadyOn&&E.toggle_feature(e,t,s),s.onAgain&&E.feature_on(e,t,s.onAgain),I.endT(arguments)},toggle_inline_gui:function(){var e=O.eds["adaptable-editor"];e.isFocused()?(e.blur(),O.gui_shortcut_clicked()):E.editor_and_gui()?(E.picker_method("hide"),e.focus()):E.trigger_pg_icon_click("code")},toggle_feature:function(e,t,s){I.startT(arguments);var r=E.get_toggle_data(e,t);e=r.clicked,t=r.aspect,s=s||{};var a=r.turnOn,o=r.$filter_scope||!1,n="",i=e.data("pref_sub_key");if("show_interface"===t&&E.pref.detach_preview)return!1;s.pref_sub_key=i||!1,s.tmp&&(E.tmp[t]=a?"turnedOn":"turnedOff"),s.fHTML=I.isDefined(s.fHTML)?s.fHTML:e.data("fhtml"),s.noSave=I.isDefined(s.noSave)?s.noSave:parseInt(e.data("no-save"));var l,c=s.fHTML&&E.stat.fHTML?E.stat.tvr.add(E.stat.fHTML):E.stat.tvr,d=(s.extraClass&&s.extraClass,r.$alias?e.add(r.$alias):e),_=!1;a?(c.addClass(t),E.detached_window_available()&&u.add_html_class(t),d.addClass("on"),"show_time_concurrently"==t&&(s.noSave=1,I.log_concurrent=1),o&&"favourite_filter"!=t||(_=e.data("neg")),"show_rulers"==t?E.get_local_window_function("show_rulers")():"dock_editor_left"===t||"dock_options_left"===t||"detach_preview"===t?E.toggle_layout_view(t,a):"dock_wizard_right"==t?E.move_wizard_right():"enable_beaver_builder"===t?(m&&!s.uiCorrection&&p.activate_builder("FLBuilder"),E.stat.tvr.addClass("FLBuilder_is_on")):"activate_elementor"==t?p.activate_builder("elementor",!1,E.pageOrPostID):"activate_oxygen"==t?p.activate_builder("oxygen",!1,E.pageOrPostID):"selname_code_synced"==t?E.selname_code_synced(r.$aliasTrigEl,a):"code_manual_resize"==t?(E.stat.code.find("div.css-code-wrap").add(E.stat.inlineEditor).css("height",""),O.get_focus_editor().resize(),E.toolbar_adjusted()):"show_code_editor"==t?(E.pref[t]=a,E.default_to_tab("css"),this.modify_active_editors({resize:!0,updateHeight:E.horizontal_only()}),E.toolbar_adjusted()):"hover_inspect"==t?E.iframe_functions_loaded()&&m.bind_wizard_hover():"fullscreen"==t?I.enable_full_screen():"wizard_expanded"==t?(E.pref[t]=a,this.wizard_expanded()):"show_interface"==t?(E.toolbar_adjusted(),"turnedOff"==E.tmp.hover_inspect&&(E.tmp.hover_inspect=!1,E.feature_on(!1,"hover_inspect",{noSave:1}))):"mt_highlight"==t?(s.con&&m&&m.reposition_overlays(s),E.highlightEnabled=!0):o&&e.hasClass("filter-editable")?e.find("input.combobox").select():"favourite_filter"==t&&E.filter_favourited(e,s,t)):("show_time_concurrently"==t&&(s.noSave=1,I.log_concurrent=0),d.removeClass("on"),o&&o.find("ul.flist-"+t).find("li.css-filter-item.on").length||c.removeClass(t),E.detached_window_available()&&u.remove_html_class(t),o&&"favourite_filter"!=t||(_=e.data("pos")),"show_rulers"==t?E.get_local_window_function("hide_rulers")():"dock_editor_left"===t||"dock_options_left"===t||"detach_preview"===t?E.toggle_layout_view(t,a):"dock_wizard_right"===t?E.move_wizard_top():"enable_beaver_builder"===t?(m&&!s.uiCorrection&&p.get("FLBuilder").deactivate(),E.stat.tvr.removeClass("FLBuilder_is_on")):"activate_elementor"===t?p.deactivate_builder("elementor"):"activate_oxygen"===t?p.deactivate_builder("oxygen"):"selname_code_synced"==t?E.selname_code_synced(r.$aliasTrigEl,a):"code_manual_resize"==t?(i=(l=E.stat.adaptableEditor).attr("id"),(c=O.eds[i])&&E.horizontal_only()&&(i=c.session.getLength(),O.editor_update_height(c,l,16*i)),E.toolbar_adjusted()):"hover_inspect"==t?E.iframe_functions_loaded()&&m.unbind_wizard_hover():"show_code_editor"==t?(E.pref[t]=a,E.default_to_tab("mq"),this.modify_active_editors({resize:!0,updateHeight:E.horizontal_only()}),E.adjust_scroll_buttons(!1,"responsive"),E.toolbar_adjusted()):"fullscreen"==t?I.disable_full_screen():"wizard_expanded"==t?(E.pref[t]=a,this.wizard_collapsed()):"show_interface"==t?(E.toolbar_adjusted(),E.feature_off(!1,"hover_inspect",{tmp:1,noSave:1})):"mt_highlight"==t?E.highlightEnabled=!1:"favourite_filter"==t&&E.filter_un_favourited(e,s,t)),s.pref_sub_key?(E.pref[t][s.pref_sub_key]=a,n+="&pref_sub_key="+s.pref_sub_key):E.pref[t]=a,_&&E.refresh_tt(d,_,r.$aliasTrigEl),e.data("text-pos")&&(r=a?e.data("text-neg"):e.data("text-pos"),e.text(r)),o&&E.pseudo_updated(e,{toggle:1,turnOn:a}),"dock_wizard_right"!==t||a?"show_text_labels"===t?E.toolbar_adjusted():"mt_nonlog"===t?E.change_preview_url(E.stat.toolsMenu.find(".change-preview-url"),void 0,!0):"specificity_preference"===t&&m&&m.build_selector_suggestions_2():E.default_to_tab("wizard"),s.noSave||z.save_ui_toggle_update(t,a,n),I.endT(arguments)},wizard_expanded:function(){E.default_to_tab("wizard"),E.maybe_update_wizard_panels({forceHTMLUpdate:1,updateVisEditor:1})},wizard_collapsed:function(){},after_animation:function(e,t){var s="transition"===t.type?"transitionend.tvr webkitTransitionEnd.tvr oTransitionEnd.tvr otransitionend.tvr MSTransitionEnd.tvr":"oanimationend.tvr animationend.tvr webkitAnimationEnd.tvr";e.on(s,function(e){"elementorLeftPanelAdjusted"!==t.aspect||"left"!==e.originalEvent.propertyName&&"width"!==e.originalEvent.propertyName||p.builderLeftPanelAdjusted("elementor",!0)})},sidebar_size:parseInt(TvrMT.data.dyn.pref.sidebar_size),effective_sidebar_size:function(){return this.sidebar_showing()?E.sidebar_size:0},sidebar_sizes_map:{0:0,sm:200,md:300,lg:360,xl:750},sidebar_size_category:function(e){e=e||this.sidebar_size;var t,s=this.sidebar_sizes_map,r="0";for(t in s)s.hasOwnProperty(t)&&e>=s[t]&&(r=t);return{key:r}},modify_active_editors:function(e){var t=E.stat.adaptableEditor,s=O.eds["adaptable-editor"];e.updateHeight&&O.editor_update_height(s,t,16*s.session.getLength()),e.resize&&(s.resize(),O.update_editor_gutter(s))},set_sidebar_size:function(e,t){t=t||E.sidebar_size,e=this.get_sidebar_container(e);return t<360&&(t=360),!!e&&(0!=parseInt(E.stat.front.css("marginLeft"))-t&&(E.stat.front.css("marginLeft",t+"px"),this.sidebar_size_changed(t,e)),e)},get_editor_containers:function(){return{$containers:E.stat.inlineEditor}},get_sidebar_container:function(e,t){return!(E.preview_is_detached()&&!E.all_options_left()&&!t)&&{$containers:e?E.stat.inlineEditor:E.stat.opts.add(E.stat.inlineEditor),size:E.sidebar_size,effective_size:E.effective_sidebar_size()}},sidebar_size_changed:function(e,t){t.$containers.outerWidth(e);t=this.sidebar_size_category(e);this.change_sidebar_size_class(e),E.sidebar_size=e,E.pref.sidebar_size_category=t.key,D.get(E.ajaxUrl+"&sidebar_size="+e+"&sidebar_size_category="+t.key,function(){}),this.modify_active_editors({resize:!0}),E.reset_preview_width_for_current_tab(!1,!0)},change_sidebar_size_class:function(e){e=this.sidebar_size_category(e);return E.stat.tvr.removeClass("mts-sm mts-md mts-lg mts-xl").addClass("mts-"+e.key),e.key},horizontal_only:function(){return!E.pref.dock_editor_left&&!E.pref.dock_options_left&&!E.pref.detach_preview},flexible_field_widths:function(){return!E.pref.dock_options_left},editor_height_settable:function(){return E.horizontal_only()&&!E.pref.code_manual_resize},editor_and_gui:function(){return E.pref.detach_preview||E.pref.dock_editor_left&&!E.pref.dock_options_left},all_options_left:function(){return E.pref.dock_options_left},editor_showing_left:function(){return(E.pref.dock_editor_left||E.pref.dock_options_left)&&!E.pref.detach_preview},show_editor_gutter:function(){return!this.editor_showing_left()||"sm"!==E.pref.sidebar_size_category},editor_only_left:function(){return E.pref.dock_editor_left&&!E.pref.detach_preview&&!E.pref.dock_options_left},options_left_editor_right:function(){return E.pref.dock_options_left&&E.pref.detach_preview},preview_is_detached:function(){return E.pref.detach_preview},sidebar_showing:function(){return!E.pref.detach_preview&&(E.pref.dock_editor_left||E.pref.dock_options_left)||E.pref.detach_preview&&E.pref.dock_options_left},maybe_adjust_side_options:function(e){E.sidebar_showing()&&!E.preview_is_detached()&&this.modify_active_editors({resize:!0})},toggle_layout_view:function(e,t){e=(E.pref[e]=t)?e:e+"_off";E.trigger_pg_icon_click(),this[e](),this.toolbar_adjusted(),E.reset_preview_width_for_current_tab(!1,!0)},reset_sidebar_dimensions:function(e){e=this.get_sidebar_container(e,!0);e&&(e.$containers.css({width:"",height:""}),this.modify_active_editors({resize:!0,updateHeight:!E.preview_is_detached()})),E.stat.front.css("marginLeft",0),E.adjust_scroll_buttons(E.get_pg_meta(),"style")},dock_sidebar_common:function(e){e=this.set_sidebar_size(e);e&&e.$containers.css("height","")},dock_editor_left:function(){E.all_options_left()&&E.feature_off(!1,"dock_options_left"),this.dock_sidebar_common(!0),E.trigger_pg_icon_click()},dock_editor_left_off:function(){this.reset_sidebar_dimensions(!0)},dock_options_left:function(){E.all_options_left()&&E.feature_off(!1,"dock_editor_left"),this.dock_sidebar_common(!1)},dock_options_left_off:function(){this.reset_sidebar_dimensions()},detach_preview:function(){window.frames.viframe.location=E.pluginUrl+"includes/place-holder2.html",window.name="MTroot",window.TvrMT.detachedWin=window.open("admin.php?page=tvr-microthemer-preview-wrap.php","detachedPreview"),E.all_options_left()||this.reset_sidebar_dimensions(E.editor_only_left()),this.modify_active_editors({resize:!0}),E.detached_window_available()&&u.remove_window_inactive_notice()},detach_preview_off:function(){E.editor_showing_left()?this.dock_sidebar_common(E.editor_only_left()):E.horizontal_only()&&this.modify_active_editors({resize:!0,updateHeight:!0}),E.detached_window_available()&&u.deactivate_window(),E.stat.iframeDoc=window.frames.viframe,MTlocal.maybe_load_site_preview()},retrieve_or_load_detached:function(){window.name="MTroot";var e=window.open("","detachedPreview");e&&e.MTdetached?(e.opener=window,e.MTdetached.set_vars(),e.MTlocal.update_TvrMT_and_other_vars(window.TvrMT),u=window.TvrMT.MTdetached,(m=window.TvrMT.MTF)?(m.set_vars(),m.trigger_iframe_loaded(),m.unbind_wizard_hover()):e.MTlocal.maybe_load_site_preview()):E.toggle_layout_view("detach_preview",1)},move_wizard_right:function(){E.stat.front.after(E.stat.wiz.detach());var e=O.eds.wizard_inspector_html;e&&(e.resize(),O.set_code_wrap(e,!1)),E.toolbar_adjusted()},move_wizard_top:function(){E.stat.code.after(E.stat.wiz.detach());var e=O.eds.wizard_inspector_html;e&&O.set_code_wrap(e,!0),E.toolbar_adjusted()},selname_code_synced:function(e,t){var s="selname_code_synced"==e.attr("id")?"wizard":"existing-sel",r=!!t,t=("wizard"==s?D("#code-suggestions").find("li.in-focus").find(".sug-sel"):e.closest(".float-form").find(".selector-css-textarea")).val();t&&("wizard"==s?E.get_nice_name(t,!0,r):e.closest(".float-form").find("input.selector-name-input").val(E.get_nice_name(t,!1,r)))},filter_favourited:function(e,t,s){e=e.closest("li").clone(!0,!1);e.removeAttr("title"),D("#fav-filters").append(e).hide().fadeIn("fast")},filter_un_favourited:function(e,t,s){e=E.pseudo_class_format(e.closest("li").data("pref_sub_key"));D("#fav-filters").find("li."+e).fadeOut("fast",function(){D(this).remove()})},toggle_screen_preview:function(e){I.startT(arguments),((e=e.closest("li.mt-screen-preview")).hasClass("clicked")?E.get_local_window_function("unset_screen_preview"):E.get_local_window_function("set_screen_preview"))(e,"clicked"),I.endT(arguments)},screen_width_adjusted:function(e,t){I.startT(arguments),E.iframe_functions_loaded()&&(E.post_screen_width_adjusted(e,t),I.action_after_timeout("screen_width_adjusted",550,{item:E.post_screen_width_adjusted,args:[e,t]})),I.endT(arguments)},post_screen_width_adjusted:function(e,t){t=t||{},m.reposition_overlays({con:e,scroll:0}),m.getAndUpdateCompStyles(!1,!1),t.skip||E.maybe_update_wizard_panels(t)},map_formatted_comp:function(e,t,s,r,a,o,n,i,l){var c;if(I.startT(arguments),c=l?E.intelliCompProps:E.compProps,"straight"==s&&("var"==t?c[e[r]]=o:(0==a&&(c[e[r]]=[]),c[e[r]][a]=[],c[e[r]][a].val=o,c[e[r]][a].htmlString=n)),"array"==s){var d,_=-1,u=e[r];for(d in u)u.hasOwnProperty(d)&&("var"==t?c[u[d]]=i[++_]:(0==a&&(c[u[d]]=[]),c[u[d]][a]=[],c[u[d]][a].val=i[++_],c[u[d]][a].htmlString=n))}l?E.intelliCompProps=c:E.compProps=c,I.endT(arguments)},format_exceptions:function(e,t,s,r,a,o){var n,i,l,c,d,_,u,p,f,g,m,v;if(I.startT(arguments),"var"==a?n=s:s[r]&&(n=s[r].val,i=s[r].htmlString),!I.hasValue(n))return!1;"font-family"==t||"display"==t||"grid-template-areas"==t||"list-style-type"==t||"border-top-left-radius"==t||"border-top-right-radius"==t||"border-bottom-right-radius"==t||"border-bottom-left-radius"==t?E.map_formatted_comp(e,a,"straight",t,r,n,i,[],o):"text-shadow"==t||"box-shadow"==t?((_=n.match(/(-?\d+px)|(rgba?\(.+\))/g))?"MSIE"!=E.browser&&(p=_[1],l=_[2],d=I.replace_decimals(_[0],1),c=_[3],"text-shadow"==t?_=[p,l,c,d]:"box-shadow"==t&&(_=[p,l,c,_[4],d,_[5]])):(_=[0,0,0,"none"],"box-shadow"==t&&(_[3]=0,_[4]="none",_[5]="")),E.map_formatted_comp(e,a,"array",t,r,n,i,_,o)):"list-style-image"==t?E.map_formatted_comp(e,a,"straight",t,r,I.basename(n),i,[],o):"background-img-full"==t?((g=[])[0]=I.extract_str("bg-image",n),(f=I.extract_str("gradient",n))?(u=/gradient\((.+)\)/.exec(f))?(p=u[1],l=I.get_all_matches(p,/rgba?\([^)]+\)/g,0),c=I.replace_all_matches(p,l,"xxx").split(", "),d="",0<=n.indexOf("webkit")&&(d="webkit-"),u=!(_="top to bottom"),-1<c[p=m=0].indexOf("deg")&&(_=e.keys[d+"gradient-angle"][c[0]],u=!0,p=1),g[1]=_,g[2]=l[m],u&&3<c.length||!u&&2<c.length?(p=c[++p].split(" "),g[3]=l[++m],g[4]=p[1],g[5]=l[++m]):(g[3]=l[++m],g[4]="0",g[5]="none")):-1<f.indexOf("svg")&&(g[1]="IE9 can't report",g[2]="IE9 can't report",g[3]="IE9 can't report",g[4]="IE9 can't report",g[5]="IE9 can't report"):(g[1]="none",g[2]="none",g[3]="none",g[4]="0",g[5]="none"),E.map_formatted_comp(e,a,"array",t,r,n,i,g,o)):"background-position"==t?(m=(v=n.split(", "))[0].split(" "),f=e.keys["background-position-x"][m[0]],g=e.keys["background-position-y"][m[1]],m=(f=f||m[0])+" "+(g=g||m[1]),E.map_formatted_comp(e,a,"straight",t,r,m,i,[],o)):"background-repeat"!=t&&"background-attachment"!=t&&"background-size"!=t&&"background-clip"!=t||(v=n.split(", "),E.map_formatted_comp(e,a,"straight",t,r,v[0],i,[],o)),I.endT(arguments)},filter_css_exceptions:function(e){var t;I.startT(arguments),t=e?E.intelliCompProps:E.compProps;var s,r=TvrMT.data.prog.propExc,a=0;for(s in t)if(t.hasOwnProperty(s)){++a;var o=t[s];if(o===Object(o))for(var n in o)o.hasOwnProperty(n)&&E.format_exceptions(r,s,o,n,"obj",e);else E.format_exceptions(r,s,o,"","var",e)}return I.endT(arguments),a},refresh_comp_css:function(h){if(I.startT(arguments),!E.iframe_functions_loaded())return I.endT(arguments),!1;var e=!!h;if(h=h||D("#"+E.selInFocusID),!e&&!I.isDomEl(h))return I.endT(arguments),!1;if(E.filter_css_exceptions(!1)<1){var t=TvrLang.null_selector;return h.find(".option-value").text(t),h.find("div.field-wrap").removeClass("mixed-cp").find("span.comp-style").text(""),void I.endT(arguments)}var t="div.field-wrap:not(.tvr-editor-area)",t=(E.pref.pg_focus?h.find("li.group-tag-"+E.pref.pg_focus):h).find(t),b=E.get_nth_focus();t.each(function(e){var t=D(this);if(!t.hasClass("group-label")&&!t.hasClass("sub-label")){var s=t.find(".option-label"),r=t.find(".option-value"),a=s.text(),o=t.find("span.comp-style"),n=t.find(".property-input"),i=n.val(),l=o.attr("class").split(" ")[1].replace("cprop-",""),c=l,d=s.data("prop"),_=TvrMT.data.prog.pg_tab_props.grid.griditems[d],s=TvrMT.data.prog.pg_tab_props.grid.allgriditems[d],d=s?1:b-1;E.propAliases[l]&&(l=E.propAliases[l]);var u=("grid"===E.pref.pg_focus&&0<b&&E.grid.items&&E.grid.items.length&&E.grid.items[d]&&(_||s)&&(h.find(".grid-tab-griditems").hasClass("active")||h.find(".grid-tab-allgriditems").hasClass("active"))?E.grid.items[d].comp:E.compProps)[l],s=!1,d=t.hasClass("has-variable-line");"event"===l?u=i||("animation"===E.pref.pg_focus?"page load":"unknown"):"event-target"===l?u=i||"self":"event-value"===l&&(u=i||"not set"),E.compProps[c]=u;var p=0;if(I.isDefined(u))if(u===Object(u)){t.addClass("mixed-cp"),E.update_comp_input_overlay(t,o,"[mix]");var f,g=TvrLang.value_varies,m="";for(f in u)u.hasOwnProperty(f)&&I.isDefined(u[f].val)&&(m+='<tr class="mixed-val" rel="'+p+'"><td>'+ ++p+"</td><td title='"+u[f].htmlString.replace("&#60;","<").replace("&#62;",">")+"'>"+E.colored_box(u[f].val,!0)+"</td></tr>");t.find("table.comp-mixed-table").find("tbody").html(m)}else{g=u;t.removeClass("mixed-cp");var v=u;d||(u=E.truncate_displayed_comp_css(n,u)),t.hasClass("is-picker")?(s=!0,n="background-color:transparent","transparent"!=v&&"none"!=v&&(n="background-color:"+v,g=I.maybe_to_hex(v)),o.html('<span style="'+n+'"></span>')):E.update_comp_input_overlay(t,o,u)}else{g=TvrLang.style_not_applicable;"Content"==a&&(g=TvrLang.not_knowable),o.text("")}g=s?E.trans_gradient_box(v,"computed-color-box")+g:g;r.html(g)}}),h.addClass("visible-computed"),E.flexbox_dynamic_gui(h,{compProps:E.compProps}),"grid"===E.pref.pg_focus&&(d.update_nth_radios(),E.skipGridReflow?E.skipGridReflow=!1:d.itemResising||d.update_grid_canvas()),I.endT(arguments)},update_comp_input_overlay:function(e,t,s){var r;e.hasClass("has-variable-line")?(e=s.split(" "),r=e.length?e:[s],t.each(function(e){D(this).html(r[e])})):t.html(s)},flexbox_dynamic_gui:function(e,t){t.compProps["flex-direction"]&&(e=e.find("div.property-flexbox"),t=t.compProps["flex-direction"],e.removeClass("flex-direction-column flex-direction-column-reverse flex-direction-row-reverse"),I.in_array(t,["column","column-reverse","row-reverse"])&&e.addClass("flex-direction-"+t))},truncate_displayed_comp_css:function(e,t){I.startT(arguments);var s=e.width()/6;return s<t.length&&(t=t.substring(0,s)+"..."),I.endT(arguments),t},colored_box:function(e){if(!e||e.indexOf("rgb")<0||-1<e.indexOf(":"))return e;var t=I.maybe_to_hex(e),e=E.trans_gradient_box(e);return e+='<span class="colored-val">'+t+"</span>"},trans_gradient_box:function(e,t){return'<span class="'+(t=t||"colored-box")+'" style="background-image: linear-gradient(0deg, '+e+", "+e+"), url("+E.pluginUrl+'images/trans.png)"></span>'},slugs_from_id:function(e){var t=e.split("-"),s=t[1],r=t[2],e=(e=I.checkObject(E.uiData,[s,r,"label"]))?e.split("|"):[];return!!t.length&&{sectionSlug:s,selectorSlug:r,selectorH:e[0],selectorCode:e[1]}},default_to_sel:function(){I.startT(arguments);var e=I.checkObject(E.uiData,["non_section","meta","last_viewed_selector"]),e=!!e&&E.slugs_from_id(e);if(e&&I.checkObject(E.uiData,[e.sectionSlug,e.selectorSlug])||(e=T.modify_main_js_object("get_first_sel",{incRecurse:!1,callbackDepth:["selector"]}).slugs),!e)return!1;e=E.load_selector(e,{items:["selectorM"]}),E.tvr_iterate_selectors_v(e),I.endT(arguments)},get_manual_wrap_class:function(e){return e.hasClass("mt-vl-input")?".vl-item":".tvr-input-wrap"},adjust_comp_span:function(e,t){I.startT(arguments);var s=this.get_manual_wrap_class(e);"after"==t?e.val()?this.remove_comp_overlay(e,s):this.add_comp_overlay(e,s):"hover"==t&&e.siblings("span.comp-style:not(.comp-for-picker)").addClass("hidden"),I.endT(arguments)},add_comp_overlay:function(e,t){e.closest(t).removeClass("manual-val"),e.siblings("span.comp-style:not(.comp-for-picker)").removeClass("hidden")},remove_comp_overlay:function(e,t){e.closest(t).addClass("manual-val"),e.siblings("span.comp-style:not(.comp-for-picker)").addClass("hidden")},chain_is_on:function(e){return I.isDomEl(e.subgroup.find("input.chained-tracker"))},sync_fields:function(e,a,o){I.startT(arguments);var t=E.get_subgroup_or_tabgroup(a,"inputs"),n=e.val(),i=!1;t.not(e).not(".vl-name-input").each(function(e){var t,s=D(this),r=s.closest(".property-tag");s.hasClass("color")?(s.hasClass("bound")||E.colorpicker_bind(s.parent()),n?E.maybe_set_variable_color(n,s,!1,!0,!1)||E.update_spectrum(n,s,{},!1):E.clear_spectrum_inputs(E.get_meta(s,"property"))):(s.val(n),I.isDefined(o)&&(t=E.get_meta(s,"property"),v.apply_property_unit(n,n,o,r,t.groupSlug,t.propertySlug,{writeToLabel:1,writeToInput:1,trail:T.get_property_data(t).propLevels}))),0<e&&""===n&&r.hasClass("has-variable-line")&&(E.delete_variable_field(r,s,a,!1),i=!0),E.post_edit(s)}),i&&E.adjust_grid_line_scroll_buttons(a),I.endT(arguments)},maybe_sync_fields:function(e,t){var s;I.startT(arguments),e.hasClass("autofillable")&&(s=E.get_meta(e,"property"),E.chain_is_on(s)&&E.sync_fields(e,s,t)),I.endT(arguments)},sync_important:function(e,s){I.startT(arguments),E.chain_is_on(e)&&E.get_subgroup_or_tabgroup(e).not(e.property).each(function(e){var t=D(this).find("span.important-toggle");("add"==s&&!t.hasClass("active")||"remove"==s&&t.hasClass("active"))&&E.input_icon_toggle(t,!0)}),I.endT(arguments)},bind_keydown_events:function(t){t.on("keydown.tvr",function(e){if(t.hasClass("selector-name-input")&&E.pref.selname_code_synced)return!1}).on("blur",function(){t.off("keydown.tvr")})},run_input_updated:function(e,t){var s=e.attr("class"),r=!1;if(!s)return!1;if(0<=s.indexOf("property-input")){E.inputWaitingObj=e;var a=E.get_meta(e,"property"),o=e.val(),n=o&&0===o.indexOf("=");if(n)if(!E.process_excel_function(o,a.propertySlug).converted)return E.post_edit(e),!0;E.maybe_sync_fields(e),E.post_edit(e)}else if(0<=s.indexOf("selector-css-textarea"))r=!0,E.pref.selname_code_synced&&e.closest(".float-form").find(".selector-name-input").val(e.val());else if(0<=s.indexOf("sp-input")){n=E.get_related_meta("picker",e.closest(".sp-container")),o=E.inputWaitingObj=n.$input;if(-1<s.indexOf("sp-input-opacity")){a=e.val();if(isNaN(a)||a<0||1<a)return;n=o.spectrum("get").toRgb();n.a=a,o.spectrum("set",n),E.update_spectrum_inputs(tinycolor(n),o,e,!0)}else-1<s.indexOf("sp-input-var")?E.maybe_set_variable_color(e.val(),o,e,!0):E.update_spectrum(e.val(),o,e,!0)}r||E.set_input_timer()},maybe_set_variable_color:function(e,t,s,r,a){a=!I.isDefined(a)||a;var o,n,i=!q.isJustColor(e,!0)&&e;return i?(-1<i.indexOf("var(")?(n=q.get_variable_name(i))&&(o=q.get_variable_value(n,"css",!0)):-1<i.indexOf("$")&&(o=q.get_variable_value(n,"scss")),o&&E.update_spectrum(o,t,{},a,!0),s&&s.val(i),t.val(i),a&&E.maybe_sync_fields(t),!0):(r&&(E.update_spectrum(e,t,{},a,!0),t.val("")),!1)},bind_input_events:function(t){I.startT(arguments),E.unbind_input_events(t),t.on("input.tvr propertychange.tvr",function(e){E.run_input_updated(t,e)}),t.on("blur",function(){E.unbind_input_events(t)}),I.endT(arguments)},unbind_input_events:function(e){e.off("input.tvr propertychange.tvr")},update_input_width_and_scroll:function(e,t,s){var r,a;I.startT(arguments),E.flexible_field_widths()&&(a=(r=e.val()).length,a=Math.ceil(a/2.3)+1,E.stat.inputWidthCalc.text(r),e.width(E.stat.inputWidthCalc.innerWidth()+a),s||E.adjust_scroll_buttons(E.get_pg_meta(),"style")),I.endT(arguments)},maybe_scroll_image_fields:function(e){"list"!==e.groupSlug&&"background"!==e.groupSlug||e.group.find(".bg-image-select").each(function(){I.scroll_input_end(D(this))})},done_typing:function(){if(E.isForbiddenProperty(E.inputWaitingObj))return!1;z.ajax_save_settings({$property:E.inputWaitingObj})},get_folders:function(){I.startT(arguments);var s=[];return D("#tvr-menu").find(".section-tag").each(function(e){var t=E.get_meta(D(this),"section");s[e]=t.sectionH}),I.endT(arguments),s},show_wizard:function(e){I.startT(arguments),E.intelli=!0,E.stat.tvr.addClass("show-wizard");var t=E.stat.toolsMenu.width()+5;E.stat.rightStuff.css("right",t+"px"),m.maybe_stop_mutation_observer(),E.screen_width_adjusted("intelli"),TvrMT.data.prog.combo.cur_folders=E.get_folders();var s="";s=E.wiz_update_sel_mode?E.wiz_update_sel_mode.sectionH:I.hasValue(E.selInFocusID)?E.get_meta(D("#"+E.selInFocusID),"selector").sectionH:(t=I.obj_index(0,E.uiData,"non_section"))?t.this.label:"",E.stat.wizFolder.val(s).removeClass("text-label"),I.endT(arguments)},hide_wizard:function(){I.startT(arguments),E.stat.tvr.removeClass("show-wizard"),D("#right-stuff-wrap").css("right",""),E.screen_width_adjusted("reg",{skip:1}),E.intelli=!1,D("#wizard-name").val(""),E.redo_sug_sels("",!0),E.toolbar_adjusted(void 0,!1),E.stat.tvr.removeClass("wiz_update_sel"),E.wiz_update_sel_mode=!1,m.maybe_start_mutation_observer(),I.endT(arguments)},wiz_update_sel:function(e){I.startT(arguments);var t=E.get_meta(e,"selector");E.stat.tvr.addClass("wiz_update_sel"),E.wiz_update_sel_mode=t,E.is_cur("sel",t.selectorID)||E.tvr_iterate_selectors_v(t.selectorM),E.close_all_expanded(!1,!1,!0),E.feature_on(D("#hover-inspect-toggle"),"hover_inspect"),I.endT(arguments)},human_tagname:function(e){I.startT(arguments);var t={h1:"heading 1",h2:"heading 2",h3:"heading 3",h4:"heading 4",h5:"heading 5",h6:"heading 6",p:"paragraph",br:"line break",hr:"horizontal rule",abbr:"abbreviation",b:"bold",em:"emphasis",i:"emphasis",ins:"insert",pre:"preformatted",q:"quote",sub:"subscript",sup:"superscript",optgroup:"option group",img:"image",figcaption:"figure caption",a:"link",ul:"unordered list",ol:"ordered list",li:"list item",th:"table heading",tr:"table row",td:"table data",thead:"table head",tbody:"table body",tfoot:"table foot",col:"column",colgroup:"column group"};return I.endT(arguments),t[e]||e},human_pseudo:function(e){var t,s=I.pseudo_str_to_arr(e),r="";for(t in s)s.hasOwnProperty(t)&&(r+=s[t].replace(/^:nth\-(?:child|of\-type)\((.*)\)$/,":($1)").replace(/^:nth\-last\-(?:child|of\-type)\((.*)\)$/,":L($1)").replace("link","unvisited"));return r},humanize:function(e,t,s){I.startT(arguments),(s=s||{}).keepPre=s.keepPre?e:"";var r=new RegExp("("+e+")([_a-zA-Z0-9"+e+"\\(\\)\\[\\]=\\^\\*'\"\\/\\$~-]+)","g"),a=new RegExp(e,"g");return t=t.match(r),I.endT(arguments),t=t&&t[0]?t[0].replace(a,s.keepPre):"",s.keepDashes||(t=t.replace(/[-_]+/g," ")),t.trim()},ensure_unqique_name:function(e,t,s,r){I.startT(arguments);var a=1,o="create-new"==s?E.get_all_selector_code():{};do{var n=!1,i=new RegExp(" _\\d+$"),l=e.match(i)?(1===a&&(a=2),e.replace(i," _"+a)):1<a?e+" _"+a:e,c=I.convert_to_param(l);if("folderName"==s)n=E.uiData[c];else if("folderWithSpace"==s)n=E.uiData[c]&&I.obj_length(E.uiData[c])>=E.maxSelsPerFolder;else if("import"==s)n=r.unqSels[c]&&r.unqSels[c].code!=t;else if("create-new"==s)for(var d in o)if(o.hasOwnProperty(d)&&I.convert_to_param(o[d].sName)==c){n=!0;break}}while(a++,n);return I.endT(arguments),l},human_css_name:function(e){I.startT(arguments);var t=[],s=e.split(","),r=m.sel_trail(s[0]).pieces.reverse();for(a in r)r.hasOwnProperty(a)&&(t[a]={level:0==a?"child":"parent",tagName:r[a].split(/[#:\.]/)[0],id:E.humanize("#",r[a]),class:E.humanize("\\.",r[a]),pseudo:E.human_pseudo(r[a])});var a,o,n,i,l=[];for(a in t)t.hasOwnProperty(a)&&(o=i="",n=t[a],i=E.human_tagname(n.tagName),n.pseudo&&(o=""+n.pseudo),n.id?l[a]=n.id:n.class?l[a]=n.class:l[a]=i,l[a]+=o);var c="";s[1]&&(c=1==(d=s.length-1)?"& "+E.human_css_name(s[1].trim()):"+"+d+" "+TvrLang.more,l.unshift(c)),I.endT(arguments);var d=l[0];d+=c?" "+c:"";var _,u=c?3:2,p=[];for(_ in l)if(l.hasOwnProperty(_)){if(u<=_)break;p.push(l[_])}c=p.reverse().join(" ");return E.ensure_unqique_name(c,e,"create-new")},get_nice_name:function(e,t,s){var r;I.startT(arguments),e=e||E.intelli_css,I.startT("capitalizeFL"),r=s?e:I.capitalizeFL(E.human_css_name(e)),I.endT("capitalizeFL");var a=D("#wizard-name");if(!t||a.is(":focus")&&!I.isTextSelected(a[0])){I.isTextSelected(a[0]);return I.endT(arguments),r}a.val(r),E.el_selected&&E.maybe_auto_select_label(),I.endT(arguments)},maybe_auto_select_label:function(e){e=e||D("#wizard-name");var t=D("#code-suggestions").find("li.in-focus").find("input.sug-sel"),s=D("#css-filters").find("input.cssfilter-combo:focus"),r=D("#wizard_inspector_html").find("textarea:focus");E.pref.selname_code_synced||t.is(":focus")||s.length||r.length||TvrMT.integrate.elementor||e.trigger("select")},clear_wizard:function(){var e;I.startT(arguments),E.feature_off(0,"mt_highlight",{fHTML:1,noSave:1}),m.triggerEl={},D("#html-computed-css").find("span.comp-prop-value").html(""),D("#wizard-name").val(""),E.redo_sug_sels(""),D("#targets-nothing").removeClass("show"),D("#selector-naming").find(".refine-target-controls").find("span").addClass("disabled"),E.stat.breadcrumbs.html(""),(E.pref.wizard_expanded||E.pref.dock_wizard_right)&&(O.eds.wizard_inspector_html&&((e=O.eds.wizard_inspector_html).gotoLine(1,0),e.scrollToLine(1,!0,!0,function(){})),E.stat.actStyles.html("")),I.endT(arguments)},pseudo_updated:function(e,c){var t,d=e.closest("li");c.input&&(t=E.get_css_filter_alias(e),I.isDomEl(t)&&((t=t.find("input.combobox")).val(e.val()),E.update_input_width_and_scroll(t,4,!0)),E.update_input_width_and_scroll(e,4,!0));e=D("#code-suggestions");e.find("li").each(function(e){c.manual=1,c.$li=d;var t=D(this),s=t.find(".sug-sel"),r=s.attr("rel"),a=t.data("level"),o=m.apply_css_filters(s.val(),m.dom.nodes[a],m.dom,c);if(s.val(o.code),!m.dom.sels.final[e]||m.dom.sels.final[e].refKey!==r)return!0;m.dom.sels.final[e].code=o.code,s.get(0).scrollLeft=s.get(0).scrollWidth;var n=s.attr("rel");if(n&&m.dom.sels.combo[n])for(var i=0;i<m.dom.sels.combo[n].length;i++){var l=m.dom.sels.combo[n][i],o=m.apply_css_filters(l,m.dom.nodes[a],m.dom,c);m.dom.sels.combo[n][i]=o.code}});e=e.find("li.in-focus");I.isDomEl(e)?(E.sug_sel_updated(e.find("input"),{con:"manual"}),m.set_quick_go_options(m.triggerEl)):I.isDomEl(m.triggerEl)&&m.all_targeting_actions(m.triggerEl,{})},sug_sel_updated:function(e,t){var s=e.closest("li"),r=t.val||e.val(),r=E.strip_beyoned_brace(r);t.editingNameField&&(I.isDomEl(e)?e.val(r):(a='<li class="code-suggestion in-focus manual-edit" data-level="0"><span class="sugsel-radio tvr-icon" title="'+TvrLang.choose_suggestion+'"></span><span class="tvr-input-wrap"><input type="text" class="sug-sel combobox" value="'+I.regular_escape_quotes(r)+'" /></span><span class="num-els-icon-wrap">'+E.num_els_icon("")+"</span></li>",E.redo_sug_sels(a),s=D("#code-suggestions").find("li"))),"manual"==t.con&&(D("#code-suggestions").addClass("has-manual-edit").find("li.manual-edit").removeClass("manual-edit"),s.addClass("manual-edit"));var a=m.jquery_compat_sel_elements(r),t=a.length;s.find(".num-els-icon-wrap").add(D("#selector-naming").find(".num-els-icon-wrap")).html(E.num_els_icon(t));var o=!!t;t&&a.each(function(){if(D(this).is(m.triggerEl))return o=!1}),o&&(s=a.first(),m.all_targeting_actions(s,{}),m.element_selected(s)),E.intelli_css=r,m.reposition_overlays({con:"intelli"}),E.update_invalid_selector_msg("#no-element"==a.selector,r,t),E.get_nice_name(r,!0,E.pref.selname_code_synced)},sug_sel_mouseenter:function(e){E.intelli_css=e.hasClass("mt-el-quick-item")?e.data("code"):e.val(),D("#code-suggestions").find("li.in-focus").addClass("hover-elsewhere"),E.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"intelli",css:E.intelli_css,scroll:0})},sug_sel_mouseleave:function(){var e=D("#code-suggestions").find("li.in-focus");I.isDomEl(e)&&(e.removeClass("hover-elsewhere"),E.intelli_css=e.find(".sug-sel").val(),E.iframe_functions_loaded()&&m.reposition_overlays({con:"intelli",scroll:0}))},update_selector_suggestions:function(){I.startT(arguments),D("#code-suggestions").find("li.in-focus").hasClass("manual-edit")||E.get_nice_name(!1,!0,E.pref.selname_code_synced);for(var e="",t=0;t<m.dom.sels.final.length;t++){var s=m.dom.sels.final[t],r='data-level="'+s.level+'"',a=s.isCombo?" combobox has-arrows":"",o=a?'data-appto="#refine-targeting-pane"':"",n=s.isCombo?" combobox-has-arrows ":"",i=a?'<span class="combo-arrow"></span>':"",l=(a&&"x_plus"==s.refKey?"<sup>+</sup>":"")?"+":"",c=a?'rel="'+s.refKey+'"':"";e+='<li class="code-suggestion" '+r+'><span class="sugsel-radio tvr-icon" title="'+TvrLang.choose_suggestion+'"></span><span class="tvr-input-wrap'+n+'"><input type="text" class="sug-sel'+a+'" value="'+I.regular_escape_quotes(s.code)+'" '+c+" "+o+" />"+i+'</span><span class="num-els-icon-wrap">'+E.num_els_icon(s.n,l)+"</span></li>"}E.redo_sug_sels(e),E.update_invalid_selector_msg(m.dom.invalidSel),I.endT(arguments)},redo_sug_sels:function(e,t){var s=D("#code-suggestions");t?s.removeClass("has-manual-edit").html(e):(s.find("li").not(".manual-edit").remove(),s.append(e));e=s.find("li").first();e.addClass("in-focus"),D("#selector-naming").find(".wiz-name").find(".num-els-icon-wrap").html(E.num_els_icon(e.find(".num-els-icon").text())),s.find("input.sug-sel").add(D("#wizard-name")).each(function(){var e=D(this);e.get(0).scrollLeft=e.get(0).scrollWidth})},update_invalid_selector_msg:function(e,t,s){var r,a="",o="";for(r in m.dom.sels.nothing)m.dom.sels.nothing.hasOwnProperty(r)&&(o+="<li>"+m.dom.sels.nothing[r].code+"</li>");e&&(t=t||m.dom.sels.nothing[0].code,a+='<li title="'+TvrLang.invalid_sel_long+'">'+t+"</li>"),D("#targets-nothing-sels").html(o),D("#targets-nothing-invalid").html(a),I.isDefined(s)&&s<1||m.dom.sels.nothing.length||e?(D("#targets-nothing").addClass("show"),E.stat.tvr.addClass("targets_nothing")):(D("#targets-nothing").removeClass("show"),E.stat.tvr.removeClass("targets_nothing")),e?D("#nothing-invalid").addClass("show"):D("#nothing-invalid").removeClass("show"),m.dom.sels.nothing.length?D("#nothing-valid").addClass("show"):D("#nothing-valid").removeClass("show")},num_els_icon:function(e,t){t=t||"";var s=e.toString();return'<span class="num-els-icon'+(0===e?" el-targets-nothing":"")+'" title="'+(1===e?tvrsprintf(TvrLang.n_els,s):tvrsprintf(TvrLang.n_els_plural,s+t))+'">'+e+"</span>"},refresh_wizard_comp_css:function(){I.startT(arguments),E.filter_css_exceptions("intelli");var e=E.intelliCompProps=E.un_flatten_css(E.intelliCompProps),t=E.pgInFocusWiz;D("#comp-"+t).find("li.property-item").remove();var s,r,a,o="",n=1,i="";for(s in e[t])e[t].hasOwnProperty(s)&&(i=I.isOdd(n)?"row-odd":"row-even",r=s.replace(/-/g," "),(a=e[t][s])&&-1<a.toString().indexOf("rgb")&&(a=E.trans_gradient_box(a)+" "+I.maybe_to_hex(a)),o+='<li class="property-item accordion-item '+i+'">',o+='<span class="comp-prop-label">'+r+":</span> ",o+='<span class="comp-prop-value">'+a+"</span>",o+="</li>",++n);o+='<li class="property-item accordion-item bottom-gap"></li>',D("#comp-"+t).append(o),I.endT(arguments)},un_flatten_css:function(e){I.startT(arguments);var t,s,r=[];for(t in E.cssProps)if(E.cssProps.hasOwnProperty(t))for(var a in r[t]=[],E.cssProps[t])E.cssProps[t].hasOwnProperty(a)&&("background-img-full"===(s=E.cssProps[t][a].cssf)||"extracted-gradient"===s||"google-font"===s||E.propAliases[s]||"order-grid"===s||"text-shadow"===s||"box-shadow"===s||"background-image"===s&&"gradient"===t||(r[t][s]=e[s]));return I.endT(arguments),r},wizard_new_or_update_selector:function(e,t,s){if(I.startT(arguments),E.pref.show_code_editor){if(!E.pref.buyer_validated&&15<O.count_editor_selectors())return alert(TvrLang.trial_notice),!1;(s=s||D("#code-suggestions").find("li.in-focus .sug-sel").val())&&O.insert_code_view_selector(s)}else{var r,a=D("#wizard_folder").val();if(!I.hasValue(a)||a===TvrLang.wizard_folder)return alert(TvrLang.wizard_folder_alert),!1;s?r=E.get_nice_name(s,!1,E.pref.selname_code_synced):(r=D("#wizard-name").val(),s=D("#code-suggestions").find("li.in-focus .sug-sel").val());var o,n=I.convert_to_param(a);if(E.uiData[n]&&I.obj_length(E.uiData[n])>=E.maxSelsPerFolder&&(o=a,a=E.ensure_unqique_name(a,!1,"folderWithSpace"),n=I.convert_to_param(a),E.notifyFolderLimit={short:tvrsprintf(TvrLang.notify_folder_limit_short,E.maxSelsPerFolder-1),long:"<p>"+tvrsprintf(TvrLang.notify_folder_limit_long,a,o)+"</p>",type:"info"}),!I.isDomEl(D("#strk-"+n))&&!E.add_section(D("#new-section-add"),a))return!1;a=E.get_meta(D("#strk-"+n),"section");if(0<=t.indexOf("wizard-add")){if(a.sectionM.find(".add-selector-form").find(".selector-name-input").val(r),a.sectionM.find(".add-selector-form").find(".selector-css-textarea").val(s),!E.add_selector(a.sectionM.find("span.add-selector")))return!1}else{a=E.get_meta(D("#"+E.selInFocusID),"selector"),n=a.sectionSlug!==n&&n;if((n||a.selectorSlug!==I.convert_to_param(r)||a.selectorM.find(".selector-css-textarea").val()!==s)&&(a.selectorM.find(".selector-name-input").val(r),a.selectorM.find(".selector-css-textarea").val(s),!E.action_modify_selector(a.selectorM.find("span.edit-selector"),{},n)))return!1}}E.feature_off(!1,"hover_inspect",{noSave:1}),E.clear_css_filters(!0),I.endT(arguments)},ensure_backwards_compat:function(){I.startT(arguments);var e=parseInt(E.pref.manual_recompile_all_css);E.compile_non_compiled_selectors(!e),I.endT(arguments)},compile_non_compiled_selectors:function(e){E.uiData=T.filter_object_keys("clean",E.uiData,0);var t={M:{},template:"ui",no_style_node_update:!0,compile_non_compiled:!0,passNum:1,dataFormattingFixesOnly:e,onlyRun:{recurse_key:["m_query"]},onlyLoop:{recurse_key:["m_query"]}},s={section:[{item:T.ensure_folder_label,args:[!1]},{item:T.update_item_index,args:[!1]}],selector:[{item:T.update_item_index,args:[!1]},{item:T.check_jsu,args:[!1]},{item:T.check_values,args:[!1]}],group:[{item:T.check_values,args:[!1]}],property:[{item:T.update_property_values_structure,args:[!1]},{item:T.update_legacy_unit_structure,args:[!1]}]},e={section:[{item:T.update_dots,args:[!1]}],selector:[{item:T.check_jsu,args:[!e]},{item:T.update_dots,args:[!1]}],group:[{item:T.modify_item,args:["group_to_css",{dontUpdateSavePackage:e}]},{item:T.check_values,args:[!1]}]};t.maxDepth="property",t.cb=s;s=T.run(E.uiData,t).settings;t.settings=s,t.maxDepth="group",t.cb=e,t.passNum++,s=T.run(E.uiData,t).settings;E.client_scss?s=T.run_global_scans(s,["scss_types"]):I.checkObject(E.uiData,["non_section","scss_usage"])&&delete E.uiData.non_section.scss_usage,(s=z.user_action(s,{items:["MT data structure updated"],icon:"data-structure lg-icon"})).savePackage&&s.savePackage.length&&(s.savePackage=!1,s.fullSCSSCompile=E.client_scss,z.ajax_save_settings({settings:s,serialise:!0})),parseInt(E.pref.manual_recompile_all_css)&&(E.pref.manual_recompile_all_css=0,D.get(E.ajaxUrl+"&manual_recompile_all_css=0",function(){}))},load_visual_view:function(e){if(I.startT(arguments),D("#auto-test").autocomplete({source:["Choice1","Choice2","Choice3","Choice4","Choice5"],focus:function(e,t){console.log("focus event,",t,e,e.currentTarget.outerHTML)}}),E.stat.body.addClass("tvr-visual"),O.init_editor_deps(),E.maybe_initiate_sass_js(),E.ensure_backwards_compat(),E.pref.detach_preview||MTlocal.maybe_load_site_preview(),E.pref.returned_ajax_msg&&!E.pref.returned_ajax_msg_seen)for(var t in E.pref.returned_ajax_msg)E.pref.returned_ajax_msg.hasOwnProperty(t)&&z.log(E.pref.returned_ajax_msg[parseInt(t)]);window.history.pushState&&parseInt(D("#clean-ui-url").attr("rel"))&&window.history.pushState(E.uiUrl,null,E.uiUrl),O.bind_editor(E.stat.inlineEditor,{filterClass:"custom-css-pre",mode:parseInt(E.pref.allow_scss)?"scss":"css",M:"css",directContent:"pending"}),d.bind_gridstack(),E.sidebar_showing()&&this.set_sidebar_size(E.editor_only_left(),!1),E.update_wizard_html({bindOnly:!0}),E.default_to_tab("mq"),E.default_to_sel(),E.toolbar_adjusted(),E.toggle_enabled_buttons(),E.pref.detach_preview&&this.retrieve_or_load_detached(),MTlocal.apply_rulers(),E.pref.show_code_editor&&E.default_to_tab("css"),E.pref.dock_wizard_right&&E.move_wizard_right(),window.launchMTUnlock&&E.show_dialog(D("#mt-renew-prompt")),E.adjust_scroll_buttons(!1,"responsive"),p.maybe_update_available_builder_name(),I.endT(arguments)},scss_div:"/*MTSCSSPART*/",sass_preloaded_files:[],sass_worker_to_mt_dir:"../../../../micro-themes/",maybe_initiate_sass_js:function(){E.client_scss&&(E.sass=new Sass,E.uiData.non_section.hand_coded_css,E.sass.options({style:Sass.style.expanded,indent:"\t"},function(){}),E.sass.importer(function(e,t){var s=e.resolved.replace("/sass/",""),r=E.check_file_exists(s,!0);r?I.in_array(r,E.sass_preloaded_files)?t({path:e.path}):z.simple_ajax_request({url:E.ajaxUrl+"&load_sass_import="+encodeURI(r),dataType:"json",plus:TvrLang.loading_sass_import,minus:TvrLang.loading_sass_import_failed,cbFunction:function(t,s){E.sass.writeFile(r,t.content,function(e){E.sass_preloaded_files.push(r),s({content:t.content})})},cbfArgs:[t]}):t({error:"Import failed, no file found: "+s+". Try refreshing Microthemer if path is definitely correct."})}),E.sass.writeFile(TvrMT.data.dyn.preloaded_sass_imports,function(e){E.sass_preloaded_files=Object.keys(TvrMT.data.dyn.preloaded_sass_imports),TvrMT.data.dyn.preloaded_sass_imports=null,E.sass.compile(E.uiData.non_section.hand_coded_css,function(e){})}))},parse_scss:function(e){try{return window.TvrSCSS.parse(e,{syntax:"scss"})}catch(e){}return!1},normalise_scss_type_name:function(e,t){return I.in_array(e,["variable","mixin","function"])?t.replace(/-/g,"_"):t},get_ast_child_node:function(e,t,s){for(var r=0;r<e.length;r++){var a=e[r];if(a.type===t)return s?a[s]:a}return!1},get_variable_node_data:function(e,t,s,r){var a=t.content[0].content,o=t.insideFM||r.insideFM,n=r.isRelatedType;if("property"===s.type){var i="";if((s=E.get_ast_child_node(s.parent.content,"value"))&&(e={value:i=s.toString()}),n&&!E.is_scss_global_var(i))return!(r.localDecs[a]=1)}else if(n&&(r.localDecs[a]||t.insideArg&&!t.insideDec))return!(r.localDecs[a]=1);return!(o&&r.onlyGlobalVars&&!E.is_scss_global_var(e.value)&&!E.is_scss_default_var(e.value))&&{name:a,value:e}},is_scss_global_var:function(e){return"string"==typeof e&&-1<e.indexOf("!global")},is_scss_default_var:function(e){return"string"==typeof e&&-1<e.indexOf("!default")},get_scss_types:function(c){var e=c.parseTree||E.parse_scss(c.code);if(!e)return"parseFail";E.parseTreeDone||(E.parseTreeDone=!0);var d={},_=c.types||E.scss_types,u=!1;return e.traverse(function(e,t,s){var r=e.type,a=!1,o={value:1};("mixin"===r||s&&s.insideFM||"atrule"===r&&E.get_ast_child_node(e.content,"function"))&&(e.insideFM=1),("arguments"===r||s&&s.insideArg)&&(e.insideArg=1),("declaration"===r||s&&s.insideDec)&&(e.insideDec=1);var n=c.isRelatedType&&!I.in_array(r,["property","variable","extend"]);if(!I.in_array(r,_)||n)return!1;switch(r){case"atkeyword":if("import"!==(r=E.get_ast_child_node(e.content,"ident","content")))return!1;l=E.get_ast_child_node(s.content,"string","content");break;case"property":return e.parent=s,!1;case"variable":var i=E.get_variable_node_data(o,e,s,c);if(!i)return!1;l=i.name,o=i.value;break;case"function":if(l=e.content[0].content,I.in_array(l,q.css_functions))return!1;"atrule"===s.type&&(o={value:s.toString()},a={node:s,parent:s});break;case"mixin":l=E.get_ast_child_node(e.content,"ident","content"),o={value:e.toString()},a={node:e,parent:s};break;case"include":r="mixin",l=E.get_ast_child_node(e.content,"ident","content");break;case"extend":var l=E.get_ast_child_node(e.content,"selector").toString(),o={value:"extender"}}l=E.normalise_scss_type_name(r,l),I.checkObject(d,[r,l,"values"])||I.updateObject(d,[r,l,"values"],[]),d[r][l].values.push(o.value),c.isRelatedType||!a||(n=E.get_scss_types({isRelatedType:1,parseTree:a.node,types:["property","variable","extend","include","function"],localDecs:{},insideFM:1}))&&(d[r][l].related_types=n),1!==o.value&&(d[r][l].value=o.value,d[r][l].hasDeclaration=1),u=!0}),!!u&&d},maybe_merge_related_types:function(e,t){t&&(e.related_types||(e.related_types={}),e.related_types=D.extend(!0,e.related_types,t))},cross_update_related_types:function(e,t,s){for(var r=Object.keys(s),a=0;a<r.length;a++)for(var o=r[a],n=Object.keys(s[o]),i=0;i<n.length;i++){var l=n[i];I.checkObject(e,[o,l])||I.updateObject(e,[o,l],{}),E.maybe_merge_related_types(e[o][l],t)}},log_all_scss_usage:function(e,t,s,r,a){for(var o=Object.keys(s),n=0;n<o.length;n++)for(var i=o[n],l=s[i],c=Object.keys(l),d=0;d<c.length;d++){var _=c[d],u=D.extend(!0,{},s[i][_]),p=u.values,f=u.value,g=u.related_types;I.checkObject(t,[i,_,"deps"])||I.updateObject(t,[i,_,"deps"],[]),I.checkObject(t,[i,_,"values"])||I.updateObject(t,[i,_,"values"],[]);var m=t[i][_];p&&(m.values=m.values.concat(p)),g&&(E.maybe_merge_related_types(m,g),p={},I.updateObject(p,[i,_],{}),E.cross_update_related_types(t,p,g)),f&&(m.finalDecVal=f,m.type=f?q.checkStringValue(f):"unknown");g={};f&&(g.hasDeclaration=1),e&&(D.extend(!0,g,{trail:r.trail.selector,mq_key:r.recurse.mq_key,sectionSlug:r.section_key,selectorSlug:r.selector_key}),m.deps.push(g));var v=u.locMeta;if(v){var h=Object.keys(v);for(k=0;k<h.length;k++){var b=h[k],y=D.extend(!0,{},v[b]),w=y.trail.join(".");I.checkObject(m,["locDone",w])||(m.deps.push(y),I.updateObject(m,["locDone",w],1),"removed"===y.action&&T.updateObjectAndSavePackage(r.settings.savePackage,[{action:"delete",trail:r.trail.item.concat(["scss_types","extend",_,"locMeta"]),key:b}]))}}}},get_raw_scss_or_selector:function(e,t){t=t||e;return e.raw_scss||t.label.split("|")[1]+" {\n\n}\n"},tag_extended:function(e,t,s){if(!e.settings.extend)return!1;for(var r=e.settings.extend,a=Object.keys(r),o=E.uiData[e.section_key][e.selector_key],n=E.get_raw_scss_or_selector(t,o),i=0;i<a.length;i++){var l=a[i],c=r[l],d=c.action;if(E.extender_match(l,n)&&c.actions)for(var _=0;_<c.actions.length;_++){d=c.actions[_].action,e.settings.active_scss_types||(e.settings.active_scss_types={}),I.checkObject(e.settings.active_scss_types,["extend",l,"locMeta"])||I.updateObject(e.settings.active_scss_types,["extend",l,"locMeta"],{});var u=e.trail.selector.join(".");e.settings.active_scss_types.extend[l].locMeta[u]={action:d,trail:e.trail.selector,mq_key:s,sectionSlug:e.section_key,selectorSlug:e.selector_key}}}},log_all_scss_selectors:function(e,t,s){var r=e.settings.deps,a=(a=t.raw_scss)||"",o=e.trail.selector,n=e.section_key,t=E.get_selector_index_from_trail(n,o);r[s][t]={code:a,mq_key:s,sectionSlug:n,selectorSlug:e.selector_key,trail:o}},scss_types:["variable","function","mixin","include","extend","property","atkeyword"],prev_full_code_scss_types:{},compare_scss_types:function(e,t){e=e||{},t=t||{};for(var s=D.extend(!0,{},e),r=Object.keys(t),a=0;a<r.length;a++){var o=r[a],n=Object.keys(t[o]);e[o]||(s[o]={});for(var i=0;i<n.length;i++){var l=n[i],c=E.get_value_from_possible_object(I.checkObject(e,[o,l])),d=E.get_value_from_possible_object(t[o][l]);!1===c?s[o][l]={action:"added",actions:E.compare_add_remove_values(I.checkObject(e,[o,l,"values"]),I.checkObject(t,[o,l,"values"])),value:d,form:I.checkObject(v,[o,l,"hasDeclaration"])?"declaration":"instance"}:c===d&&delete s[o][l]}}for(var _=!1,u=Object.keys(s),p=0;p<u.length;p++){o=u[p],n=Object.keys(s[o]);for(var f=0;f<n.length;f++){var g,m,v,h,b,_=!0,l=n[f];"added"!==s[o][l].action&&(b=E.get_value_from_possible_object(I.checkObject(t,[o,l])),g=E.get_value_from_possible_object(I.checkObject(e,[o,l])),m=b?"changed":"removed",v=b?t:e,h=b||g,b=I.checkObject(v,[o,l,"hasDeclaration"])?"declaration":"instance",b={action:m,actions:E.compare_add_remove_values(I.checkObject(e,[o,l,"values"]),I.checkObject(t,[o,l,"values"])),value:h,form:b},"changed"==m&&(b.oldValue=g),s[o][l]=b)}}return!!_&&s},compare_add_remove_values:function(e,t){var s=[];return I.compare_array_values(t,e,"added",s),I.compare_array_values(e,t,"removed",s),!!s.length&&s},get_value_from_possible_object:function(e){return e===Object(e)?I.combine_array_values(e.values):e},get_co_dependent_types:function(e,t,s){var r={},a=!1,o=["extend"];if(t||o.push("variable"),e)for(var n=0;n<o.length;n++){var i=o[n],l=I.checkObject(e,[i]);l&&(r[i]=l,a=!0)}return!s||(s=E.get_extenders(s))&&(D.extend(!0,r,s),a=!0),!!a&&r},get_changed_and_co_dependents_types:function(e,t,s,r){var a=E.get_co_dependent_types(t,s,r);return!(!e&&!a)&&{changed:e,co_types:E.get_co_dependent_types(t,s,r)}},extender_match:function(e,t){e=I.escapeRegExp(e),e=new RegExp("(?<!@extend\\s)"+e+"(?:[\\s{,]+)");return t.match(e)},get_extenders:function(e){var t=I.checkObject(E.uiData,e.split("."));if(!t)return!1;e=I.checkObject(E.uiData,["non_section","scss_usage","extend"]);if(!e)return!1;for(var s=E.get_raw_scss_or_selector(t),r=!1,a=Object.keys(e),o={extend:{}},n=0;n<a.length;n++){var i=a[n];E.extender_match(i,s)&&(o.extend[i]={},r=!0)}return!!r&&o},cachedDeps:!1,prepare_scss_sources_obj:function(){return{sectionNodes:{},deps:E.cachedDeps||E.prepare_dependent_sels_obj(),fullstring:"",parts:[]}},add_selective_sources:function(e,t,s){var r=E.get_changed_and_co_dependents_types(t.scss_types_changed,t.scss_types,t.codeEditorEdited,t.selIdentifier);s?(e.fullstring+=t.code+E.scss_div,e.parts.push(t)):(o=t.sectionIndex+t.index,e.deps[t.mq_key][o]=t);var a=I.checkObject(E.uiData,["non_section","scss_usage"]),s={selsAdded:{},relatedTypesChecked:{}},o=Object.keys(TvrMQsCombined);r&&a&&(e.deps=E.gather_dependent_selectors(e,r,a,s)),"hand_coded_css"!==t.editor_slug&&(t.scss_types||1<e.numSels)?(!(t=I.checkObject(E.uiData,["non_section","code_editors","hand_coded_css","scss_types"]))||(t=E.get_co_dependent_types(t,!1,!1))&&(e.deps=E.gather_dependent_selectors(e,{co_types:t},a,s)),E.scss_deps_to_string_parts(e,e.deps,o),E.add_full_code_scss_part(e)):E.scss_deps_to_string_parts(e,e.deps,o)},prepare_dependent_sels_obj:function(e,t){e=e||{},t=t||Object.keys(TvrMQsCombined);for(var s=0;s<t.length;s++)e[t[s]]=[];return e},gather_dependent_selectors:function(e,t,s,r){for(var a,o=e.deps,n=Object.keys(t),i=0;i<n.length;i++){var l=n[i];if(t[l])for(var c=Object.keys(t[l]),d=0;d<c.length;d++)for(var _=c[d],u=Object.keys(t[l][_]),p=0;p<u.length;p++){var f=u[p],g=t[l][_][f],m="changed"===l?g:{};I.checkObject(r.relatedTypesChecked,[_,f])||(I.updateObject(r.relatedTypesChecked,[_,f],1),(g=I.checkObject(s,[_,f,"related_types"]))&&(o=E.gather_dependent_selectors(e,{related_types:g},s,r)));var v=I.checkObject(s,[_,f,"deps"]);if(v&&0<v.length)for(var h,b,y,w,T=v.length-1;0<=T;T--)v[T]&&(h=(a=D.extend(!0,{},v[T])).action,b=a.hasDeclaration,"changed"===l&&m.form,"co_types"===l&&"variable"===_&&!b||(w=(y=a.trail).join("."),r.selsAdded[w]||(b=I.checkObject(E.uiData,y))&&(y=E.get_selector_index_from_trail(a.sectionSlug,y),a.code=E.get_raw_scss_or_selector(b),o[a.mq_key][y]=a,r.selsAdded[w]=1,e.numSels++,(w=E.get_co_dependent_types(b.scss_types,!1,w))&&(o=E.gather_dependent_selectors(e,{co_types:w},s,r))),h&&("removed"===h?v.splice(T,1):"added"===h&&delete a.action)))}}return o},toggle_scss_import_compile_note:function(e){"show"===e?(E.stat.scss_compile_notes.hide(),E.stat.scss_import_compile_notes.show()):(E.stat.scss_compile_notes.show(),E.stat.scss_import_compile_notes.hide())},log_client_scss_error:function(e,t,s,r){var a=t.file&&"stdin"!==t.file;if(e)return a?(n=E.check_file_exists(t.file.replace("/sass/",""),!0),E.sass.readFile(n,function(e){E.log_client_scss_error(!1,t,e,r)}),E.toggle_scss_import_compile_note("show"),E.stat.scss_error_file.text(n)):(E.log_client_scss_error(!1,t,E.previousSCSSCompile,r),E.toggle_scss_import_compile_note("hide")),!1;var o=TvrLang.scss_error_line,e=E.stat.view.find(".tab-field-scss_compile").attr("rel"),n=a?E.stat.scss_import_compile_notes.html():"",a=t.message.replace(r,"");E.scss_error={log:{short:TvrLang.scss_error,long:"<p>"+TvrLang.scss_error_long+'.</p><p style="font-weight: bold">'+a+".</p>"+n+'<p><span id="scss-line-error" class="link show-dialog" rel="display-css-code" data-tab="'+e+'" data-line="'+t.line+'" title="'+o+'">'+o+"</span></p>"},tabKey:e,fullString:s},z.update_full_logs(E.scss_error.log),D.extend(!0,E.scss_error,t),E.stat.tvr.addClass("cur_scss_error")},clear_client_scss_error:function(){z.clear_messages(),E.stat.tvr.removeClass("cur_scss_error"),E.scss_error=!1,E.toggle_scss_import_compile_note("hide"),E.dialog_tab_pressed(E.stat.view.find("span.dialog-tab-"+E.pref.generated_css_focus))},scssCompileNext:{},compileQueue:[],enqeueCompile:function(e){E.compileQueue.push(e)},deqeueCompile:function(){E.compileQueue.shift()},pendingCompile:function(){return E.compileQueue[0]||!1},mt_compile_scss:function(s,r,a,e,o){if(E.compilingSCSS)return E.enqeueCompile([s,r,a,e,o]),!1;I.startT("prep_and_compile_scss"),I.startT("prep_scss"),E.compilingSCSS=!0;var n=s.settings,t=n.preprocessor,i=E.prepare_scss_sources_obj(),l=n.fullSCSSCompile||t.importChanged||E.fullCompileNeeded;E.fullCompileNeeded=l,i.numSels=0,l&&!E.scssCompileNext.run?(z.update_prog_indicator("plus",TvrLang.compile_scss),E.scss_compile_everything(i)):E.add_selective_sources(i,t,e),E.cachedDeps=D.extend(!0,{},i.deps),I.endT("prep_scss",1),I.startT("compile_scss"),E.sass.compile(i.fullstring,function(e){l&&z.update_prog_indicator("minus",!1,TvrLang.compile_scss),I.endT("compile_scss",1),I.endT("prep_and_compile_scss"),E.compilingSCSS=!1,I.startT("post_scss_node_update_or_error");var t=new RegExp(I.escapeRegExp(E.scss_div),"g");E.previousSCSSCompile=i.fullstring.replace(t,""),e.status&&3!==e.status?E.log_client_scss_error(!0,e,!1,t):(E.fullCompileNeeded=!1,E.scss_error&&E.clear_client_scss_error(),n=E.update_nodes_with_compiled_css(n,i,e),E.cachedDeps=!1),I.endT("post_scss_node_update_or_error"),I.endT("user_input_to_style_render",1);e=E.pendingCompile();if(e)return E.deqeueCompile(),E.mt_compile_scss.apply(this,e),!1;z.save_or_start_timer(s,r,a,o)})},update_nodes_with_compiled_css:function(e,t,s){var s=s.text?s.text.trim():"",r=E.extract_compiled_parts(s),a="";";"===r[r.length-1]&&r.pop(),t.parts.length,r.length;for(var o=0;o<r.length;o++){var n,i,l=t.parts[o];l.isJunk||l.trail&&!I.checkObject(E.uiData,l.trail)||(n=l.compiled_css_trail||l.trail.concat(["compiled_css"]),a=r[o].trim()+"\n",l.node_trail&&(a=a.replace(z.full_editor_placeholder_comment,"")),i={action:"replace",trail:n,data:a=E.apply_sass_post_css(a)},e.savePackage?T.updateObjectAndSavePackage(e.savePackage,i):I.updateObject(E.uiData,n,a,i),l.node_trail&&m&&m.update_preview_style_node(l.node_trail,a))}for(var c=Object.keys(t.sectionNodes),d=0;d<c.length;d++){var _=c[d].split("."),u=_[0],p=_[1],_=[u,p];a=T.get_section_css(!1,!1,T.get_js_object_data([p],u).data),m&&m.update_preview_style_node(_,a,T.get_media_query(u))}return e},apply_sass_post_css:function(e){e=q.parse_css(e,!0);return e.stylesheet.rules=q.add_final_compile_data(e.stylesheet.rules),q.stringify_css(e,{opts:{},tabDepth:0,tab:""})},get_selector_index_from_trail:function(e,t){e=E.get_section_index(e),t=2<t.length?t.slice(Math.max(t.length-2,1)):t;return e+E.get_selector_index(t)},scss_deps_to_string_parts:function(e,t,s){for(var r=0;r<s.length;r++){var a,o,n,i,l=s[r],c=t[l].filter(Boolean),d="all-devices"!==l&&c.length,_=d?"\t":"";for(o in d&&(l="\n\n/*( "+(a=E.pref.m_queries[l]).label+" )*/\n",e.fullstring+=l+a.query+" {\n"+E.scss_div,e.parts.push({isJunk:!0})),c)c.hasOwnProperty(o)&&(n=c[o],I.checkObject(E.uiData,[n.sectionSlug,n.selectorSlug])&&(i="\n"+_+"/** "+E.get_section_name(n.sectionSlug)+" >> "+E.get_selector_name([n.sectionSlug,n.selectorSlug])+" **/\n"+_+E.scss_div,e.fullstring+=i,e.parts.push({isJunk:!0}),"all-devices"!==n.mq_key&&(n.code=n.code.replace(/\n/g,"\n\t")),e.fullstring+=n.code+E.scss_div,e.parts.push({trail:n.trail,mq_key:n.mq_key}),e.sectionNodes[n.mq_key+"."+n.sectionSlug]=1));d&&(e.fullstring+="\n}\n"+E.scss_div,e.parts.push({isJunk:!0}))}},add_full_code_scss_part:function(e){if(!E.uiData.non_section.hand_coded_css)return!1;var t=q.get_trail_from_name("tvr_mcth[non_section][hand_coded_css_compiled]"),s=D.extend([],t),r="/*= Full Code Editor CSS ============ */\n\n"+E.scss_div;e.fullstring=E.uiData.non_section.hand_coded_css+E.scss_div+e.fullstring,e.parts.unshift({compiled_css_trail:t,node_trail:s}),e.fullstring=r+e.fullstring,e.parts.unshift({isJunk:!0})},scss_error:!1,scss_compile_everything:function(e){E.add_full_code_scss_part(e),e.deps=T.run_global_scans({},["get_all_scss"]).deps,E.scss_deps_to_string_parts(e,e.deps,Object.keys(TvrMQsCombined))},get_section_name:function(e){return I.checkObject(E.uiData,[e,"this","label"])},get_selector_name:function(e){return I.checkObject(E.uiData,e.concat(["label"])).split("|")[0]},get_section_index:function(e){return I.checkObject(E.uiData,[e,"this","index"])},get_selector_index:function(e){return I.checkObject(E.uiData,e.concat(["index"]))},check_update_scss_changes:function(e,t){var s=this.get_scss_types(t);if("parseFail"===s)return!1;var r=I.checkObject(E.uiData,t.scss_types_trail),a=E.compare_scss_types(r,s);if(a){if(0<I.obj_length(a.extend)&&(E.search_scss_extendable_selectors(e,t,a.extend,s),s=e.active_scss_types),s.extend)for(var o=Object.keys(s.extend),n=0;n<o.length;n++){var i=o[n];I.checkObject(a,["extend",i])||(s.extend[i]=r.extend[i])}T.updateObjectAndSavePackage(e.savePackage,{action:"replace",trail:t.scss_types_trail,data:s})}return a},search_scss_extendable_selectors:function(e,t,s,r){e.extend=s,e.active_scss_types=r,t.mq_key&&(e.mq_key=t.mq_key);t=T.run_global_scans(e,["tag_extended"]);e.active_scss_types=t.active_scss_types},extract_compiled_parts:function(e){return e.split(E.scss_div).filter(Boolean)},check_file_exists:function(e,t){var s=TvrMT.data.dyn.micro_files,r=e.split("/"),a=r.length-1,e=r[a],o=[r];if(t)for(var t=(t=I.file_extension(e))&&t[1],e=I.strip_extension(e).replace("_",""),n=t?[t]:["scss","sass","css"],i=[e,"_"+e],o=[],l=0;l<n.length;l++)for(var c=0;c<i.length;c++){var d=i[c],_=n[l],u=D.extend([],r);u[a]=d+"."+_,o.push(u)}for(var p=0;p<o.length;p++){var f=o[p];if(I.checkObject(s,f))return f.join("/")}return!1},toolbar_adjusted:function(e,t,s){return I.startT(arguments),I.startT("maybe_adjust_side_options"),E.maybe_adjust_side_options("height"),I.endT("maybe_adjust_side_options"),I.endT(arguments),!1},toggle_enabled_buttons:function(){I.startT(arguments),E.totalSels<1&&(E.reset_global_vars(),D("#starter-message").removeClass("hidden"),D("#quick-nav").addClass("hidden"),E.expanded("quick_section")&&E.close_quick_edit(),D("#current-selector").text(""),E.stat.tvr.removeClass("tvr-sels-exist").addClass("tvr-no-sels")),0<E.totalSels&&(D("#starter-message").addClass("hidden"),D("#quick-nav").removeClass("hidden"),E.stat.tvr.addClass("tvr-sels-exist").removeClass("tvr-no-sels")),I.endT(arguments)},remember_page_viewed:function(e){if(I.startT(arguments),!m)return!1;var t=e||m.get_current_url();if(!t)return!1;t=I.strip_page_builder_and_other_params(t);var s,r=I.extract_url_path(t,E.blog_details);I.hasValue(t)&&!E.placeholderFrame&&(s=m.get_current_page_title(r,!0),D.get(E.ajaxUrl+"&mt_preview_url="+encodeURIComponent(t)+"&mt_preview_path="+encodeURIComponent(r)+"&mt_path_label="+s+"&mt_item_id="+E.pageOrPostID,function(){}),E.stat.changeUrlInputWrap.find("input").val(""),D("#back-to-frontend").attr("href",t),E.pref.preview_url=t,D("#pref-preview-url-input").val(t),(t=I.in_array(r,TvrMT.data.prog.combo.custom_paths,!1,"value"))&&TvrMT.data.prog.combo.custom_paths.splice(t,1),TvrMT.data.prog.combo.custom_paths.unshift({value:r,label:s}),TvrMT.data.prog.combo.custom_paths=TvrMT.data.prog.combo.custom_paths.slice(0,8)),I.endT(arguments)},remember_css_import_file:function(){I.startT(arguments);var e=D("#stylesheet_to_import").val();if(!I.hasValue(e))return!1;D.get(E.ajaxUrl+"&import_css_url="+encodeURI(e));var t=I.in_array(e,TvrMT.data.prog.combo.viewed_import_stylesheets);!1!==t&&TvrMT.data.prog.combo.viewed_import_stylesheets.splice(t,1),TvrMT.data.prog.combo.viewed_import_stylesheets.unshift(e),I.endT(arguments)},exclStylesheetSubStrings:{always:[{str:"wp-includes/css",unless:null},{str:"wp-includes/js"},{str:"admin-bar"},{str:"dashicons"},{str:"font-awesome"},{str:"genericons"},{str:"microthemer/css/frontend"},{str:"animate.min.css"},{str:"fonts.googleapis.com"},{str:"elementor/assets",unless:"frontend.min.css"}],FLBuilder:[{str:"bb-plugin/css"},{str:"foundation-icons"}],oxygen:[{str:"component-framework/vendor"},{str:"component-framework/toolbar"},{str:"wp-includes/js/tinymce"},{str:"jquery-ui.css"},{str:"buttons.min.css"},{str:"mediaelementplayer-legacy.min.css"},{str:"wp-mediaelement.min.css"},{str:"imgareaselect.css"},{str:"wp-includes/css/editor.min.css"}]},ignore_stylesheet:function(e,t){if(!e)return!(!t.ownerNode||"ct_svg_sets"!==t.ownerNode.className);var s,r=E.exclStylesheetSubStrings;for(s in r)if(r.hasOwnProperty(s)&&("always"===s||TvrMT.integrate[s]))for(var a in r[s])if(r[s].hasOwnProperty(a)){var o=r[s][a];if(-1<e.indexOf(o.str)&&(!o.unless||e.indexOf(o.unless)<0))return!0}return!1},filter_excluded_stylesheets:function(e){for(var t=e.length-1;0<=t;t--)E.ignore_stylesheet(e[t].href,e[t])&&e.splice(t,1);return e},refresh_stylesheet_list:function(e){var t,e=e.siblings("input"),s=m.stat.doc.styleSheets,r=["admin-bar","dashicons","genericons","microthemer/css/frontend"],a=[];for(t in s)if(s.hasOwnProperty(t)){var o=s[t].href,n=!1;if(o){for(var i in r)if(r.hasOwnProperty(i)&&-1<o.indexOf(r[i])){n=!0;break}n||a.push(o)}}TvrMT.data.prog.combo.viewed_import_stylesheets=D.extend(!0,[],a),e.focus().MTautocomplete().MTautocomplete("search","")},update_prev_next_sel_buttons:function(e){if(I.startT(arguments),!e)return D("#vb-focus-prev, #vb-focus-next").addClass("disabled"),!1;var t=E.slugs_from_id(e),s=D("#vb-focus-prev"),r=D("#vb-focus-next"),a=E.itemScan("selector","prev","getID",t.sectionSlug,t.selectorSlug,{incCurrentSection:!0}),t=E.itemScan("selector","next","getID",t.sectionSlug,t.selectorSlug,{incCurrentSection:!0});a?s.removeClass("disabled"):s.addClass("disabled"),t?r.removeClass("disabled"):r.addClass("disabled"),I.endT(arguments)},itemScan:function(e,t,s,r,a,o){var n=(o=o||{}).incCurrentSection?"IncCurrent":"",i=I.editArray(Object.keys(E.uiData),"non_section","remove"),i=I.editArray(i,r,t+"Items"+n);"prev"===t&&i.reverse();for(var l=0;l<i.length;l++){var c=i[l];if("section"===e)switch(s){case"getPreviousNode":var d=T.format_css_node_id([o.mq_key,c]),d=m.frontend_jquery_select("#"+d);if(I.isDomEl(d))return d;break;case"getID":return"strk-"+c}if("selector"===e){var _=I.editArray(Object.keys(E.uiData[c]),"this","remove"),_=r===c?I.editArray(_,a,t+"Items"):_;"prev"===t&&_.reverse();for(var u=0;u<_.length;u++){var p=_[u];switch(s){case"getPreviousNode":var f=T.format_css_node_id([o.mq_key,c,p]),f=m.frontend_jquery_select("#"+f);if(I.isDomEl(f))return f;break;case"getID":return"strk-"+c+"-"+p}}}}switch(s){case"getPreviousNode":return m.frontend_jquery_select("#"+T.format_css_node_id([o.mq_key]));case"getID":return!1}return!1},itemScanOld:function(e,t,s,r,a){var o=(a=a||{}).incCurrentSection?"IncCurrent":"",n=I.editArray(Object.keys(E.uiData),"non_section","remove"),n=I.editArray(n,s,e+"Items"+o);"prev"===e&&n.reverse();for(var i=0;i<n.length;i++){var l=n[i],c=I.editArray(Object.keys(E.uiData[l]),"this","remove"),c=s===l?I.editArray(c,r,e+"Items"):c;"prev"===e&&c.reverse();for(var d=0;d<c.length;d++){var _=c[d];switch(t){case"getPreviousNode":var u=T.format_css_node_id([a.mq_key,l,_]),u=m.frontend_jquery_select("#"+u);if(I.isDomEl(u))return u;break;case"getID":return"strk-"+l+"-"+_}}}switch(t){case"getPreviousNode":return m.frontend_jquery_select("#"+T.format_css_node_id([a.mq_key]));case"getID":return!1}return!1},tvr_iterate_selectors_v:function(e,t,s){I.startT(arguments),t=t||e.attr("id"),e=I.isDomEl(e,!0)?e:E.load_selector(E.slugs_from_id(t),{items:["selectorM"]}),E.stat.opts.add(E.stat.nav).find("li.in-focus").removeClass("in-focus");var r=E.get_meta(e,"selector"),a=E.load_selector(r,{items:["selector"]});(r=E.get_meta(a,"selector")).selector.add(r.selectorM).add(r.section).addClass("in-focus"),E.menuSelInFocusID&&E.menuSelInFocusID!==r.selectorMID&&"copy"!==s&&D("#"+E.menuSelInFocusID).remove(),E.update_global_vars(r),E.unload_all_option_selectors(),E.update_prev_next_sel_buttons(r.selectorID),E.maybe_default_to_pg(),E.js_check_values({},r),E.selector_check_disabled(r),E.toolbar_adjusted(),E.briefly_highlight_selector(),E.startSel=!1,I.endT(arguments)},briefly_highlight_selector:function(){if(I.startT(arguments),":root"===E.curSelCSS)return!1;E.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"reg"}),setTimeout(function(){E.feature_off(0,"mt_highlight",{fHTML:1,noSave:1})},1e3),I.endT(arguments)},iframe_functions_loaded:function(){return m},maybe_default_to_pg:function(){var e=E.pref.pg_focus,e=e?".pg-icon-"+e:".pg-icon-font";E.pg_icon_pressed(E.stat.css_icons.find(e),!0)},quick_nav:function(e){if(I.startT(arguments),e.hasClass("disabled")||!E.selInFocusID)return!1;var t=E.get_meta(D("#"+E.selInFocusID),"selector"),s="vb-focus-prev"===e.attr("id")?"prev":"next";E.tvr_iterate_selectors_v(!1,E.itemScan("selector",s,"getID",t.sectionSlug,t.selectorSlug,{incCurrentSection:!0}))}};var E=TvrMT.TvrUi;MTlocal.set_vars(),I.set_vars(),O.set_vars(),p.set_vars(),T.set_vars(),q.set_vars(),z.set_vars(),e.set_vars(),d.set_vars(),v.set_vars(),E.init()});