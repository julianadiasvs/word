jQuery(document).ready(function(D){var I=TvrMT.TvrCom,v=TvrMT.MTF,u=TvrMT.MTdetached,s=TvrMT.detachedWin,O=TvrMT.mod.MTace,p=TvrMT.mod.MTint,T=TvrMT.mod.MTloop,E=TvrMT.mod.MTdd,P=TvrMT.mod.MTsave,e=TvrMT.mod.MTsass,d=TvrMT.mod.MTgrid,q=(TvrMT.mod.MTtransform,TvrMT.mod.MTlayout),m=TvrMT.mod.MTwidget,t=TvrMT.data.dyn.pref,r=parseInt(t.allow_scss),a=TvrMT.data.dyn.client_scss,t=D("body").width();TvrMT.TvrUi={cssFilters:TvrMT.data.prog.CSSFilters,cssProps:TvrMT.data.prog.CSSProps,gatheredCSS:TvrMT.data.prog.gatheredCSS,templates:TvrMT.data.templates,blog_details:TvrMT.data.dyn.blog_details,TVR_DEV_MODE:TVR_DEV_MODE,scss_enabled:r,client_scss:a,server_scss:!1,pref:TvrMT.data.dyn.pref,uiData:TvrMT.data.dyn.ui,sass:!1,jsuVersion:7,jsuEvents:{js_css_compilation:3,synced_code_gui:4,imp_only_sh_and_grad_fix:5,property_value_structure:6,separate_css_units:7},sRules:CSSUtilities,reinitRules:!0,tooMuchCSS:!1,tmp:{},uiUrl:D("#ui-url").attr("rel"),pluginUrl:D("#plugin-url").attr("rel"),innoFireall:parseInt(D("#inno-firewall-issue").attr("rel")),adminUrl:D("#admin-url").attr("rel"),microUrl:D("#micro-url").attr("rel"),cssMin:D("#css-min").attr("rel"),cssStub:D("#css-stub").attr("rel"),totalSecs:parseInt(D("#total-sec-count").text()),TvrSugCSS:{},breadcrumbNodesCache:{},highlightEnabled:!1,colorPickerDragging:!1,progStatus:[],intelli:!1,awaitingIFrame:!0,placeholderFrame:!0,compProps:{},grid:{container:!1,items:[]},intelliCompProps:{},nodeCSS:{},intellinodeCSS:{},mixedElKey:0,update_gf_url:!1,g_url:"",comboScrollTopPos:0,pageOrPostID:!1,numSug:100,numRecent:6,numSampled:15,numMiniTiles:12,numSavedTiles:56,numSiteTiles:56,maxSelsPerFolder:41,proGroups:{flexbox:1,grid:1,animation:1,transition:1,transform:1},samplingProps:["font_family","font_size","line_height","color","padding_top","padding_right","padding_bottom","padding_left","margin_top","margin_right","margin_bottom","margin_left","row_gap","column_gap","border_width","border_radius"],gridTrackProps:["grid-template-rows","grid-template-columns","grid-auto-rows","grid-auto-columns"],propAliases:TvrMT.data.prog.propAliases,cssFuncAliases:TvrMT.data.prog.cssFuncAliases,domChanged:{updateHTMLPane:!1,updateFrontIndexes:!1},mutationObserver:!1,selectorLabelEditing:!1,retargetSelector:!1,draftSelector:{atts:{},ace:{}},draftFolders:[],draft_user_action:{new:{},retarget:{}},stat:{win:window,doc:document,head:document.head,$doc:D(document),body:D("body"),tvr:D("#tvr"),vis:D("#visual-view"),styleComponents:D("#style-components"),nav:D("#tvr-nav"),mainMenu:D("#mt-folders"),searchFoldersInput:D("#search-folders-input"),mainMenuInner:D("#tvr-menu"),top:D("#mt-top-controls"),code:D("#hand-css-area"),codeInner:D("#tvr-inner-code"),grid:D("#grid-control-wrap"),inlineEditor:D("#inline-editor"),adaptableEditor:D("#adaptable-editor"),view:D("#display-css-code-dialog"),res:D("#responsive-bar"),css_icons:D("#css-group-icons"),slider:D("#v-mq-slider"),opts:D("#tvr-options"),front:D("#v-frontend-wrap"),frontInner:D("#v-frontend"),wiz:D("#advanced-wizard"),currentFolderItem:D("#current-folder-item"),refineTarget:D("#refine-target-controls"),cssModifiers:D("#cm-css-filters"),contextMenu:D("#mt-context-menu"),addSelectorForm:D("#cm-edit-folder-options").find(".add-selector-form"),editSelectorForm:D("#cm-selector-options").find(".edit-selector-form"),suggestionsMenu:D("#mt-suggestions-menu"),suggestionsAdvanced:D("#mt-suggestions-panel"),curSecTrailText:D("#sec-in-focus"),curSelTrailText:D("#cur-sel-trail-text"),curStateTrailText:D("#cur-state-trail-text"),curSecInput:D("#sec-hierarchy-input"),curSelInput:D("#sel-hierarchy-input"),curCodeInput:D("#code-hierarchy-input"),publishButton:D("#mt-publish-action"),breadcrumbs:D("#full-breadcrumbs"),sliderDragbar:D("#mtss-dragbar"),actStyles:D("#actual-styles"),settingsMenu:D("#program-settings-menu"),notifications:D("#mt-notifications"),iframe:D("#viframe"),iframeDoc:!1,dialogs:D("#dialogs"),cssUnitGrid:D("#css-units-grid"),scss_compile_notes:D("#scss-error-notes"),scss_import_compile_notes:D("#scss-import-error-notes"),scss_error_file:D("#scss-error-file"),widthTest:D("#tvr-width-input"),changeUrlInputWrap:D("#previewPath").parent(),inputWidthCalc:D("#inputWidthCalc"),codeInputWidthCalc:D("#codeInputWidthCalc")},tOut:6e4,hi:{section:"folder-icon tvr-icon",selector:"selector-icon tvr-icon",tab:"edit-media-queries lg-icon"},baseFontSize:16,browser:D("#user-browser").attr("rel"),meta:{},inputWaitingObj:{},timer:{typing:0,quickTarget:0,deferredTarget:0,prog:[]},previous_selector:"",joined_selectors:[],jumpTo:!1,something_wrong:!1,debugCount:0,wasOpen:!1,dataLoading:!1,intelliAfterLoad:!1,ajaxUrl:D("#wpAjaxUrl").attr("rel"),toolbarHeight:0,frameHeight:0,frameWidth:0,previewWidth:0,rulerVal:0,prev:!1,fullWidth:t,resSliderWidth:0,tabsWidth:0,sortableMenuDims:{},mqs:[],totalSels:parseInt(D("#total-sel-count").text()),trial:"1"!=D("#plugin-trial").attr("rel"),trialNotice:TvrLang.trial_notice,gFontTarget:Object(),selsToLoad:0,totalToLoad:0,pgInFocusWiz:"font",aceTypingInterval:50,inputTypingInterval:50,beforeSaveInterval:1200,beforeAutoConvertInterval:2e3,saveInProgress:!1,pendingAutoSave:function(){return I.obj_length(F.pendingAutoSaveConfig)},pendingAutoSaveConfig:{},reSave:!1,siteUrl:D("#site-url").attr("rel"),homeUrl:D("#home-url").attr("rel"),itemAlreadyExpanded:!1,tooltipDelay:300,edge_mode:parseInt(D("#edge-mode").attr("rel")),init:function(){window!=window.top&&window.parent.TvrMT&&(window.location=F.homeUrl),TvrMT.init.add_listeners()},set_default_theme_mode:function(){window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&F.toggle_feature(D("#mymtonoffswitch-mt_dark_mode").closest(".mt-ui-toggle")),F.pref.theme_mode_set=1,P.save_multiple_preferences({mt_dark_mode:F.pref.mt_dark_mode,theme_mode_set:1},1)},ua_detected:function(){F.something_wrong=!1},JSerrors:[],prevJSerrors:[],catch_js_errors:function(){if(window.top.Cypress||!parseInt(F.pref.monitor_js_errors))return!1;window.onerror=function(e,t,s){F.JSerrors.push({error:e,URL:t,line:s,source:TvrLang.interface}),F.instant_show_js_error("ui")}},instantPreviewNotSass:function(){return!parseInt(F.pref.allow_scss)},instant_show_js_error:function(e){var t=F.JSerrors[0].error,t={short:t+=" (line "+F.JSerrors[0].line+")",long:"<p>"+TvrLang.js_error_site+":</p>"+F.js_error_deets(),type:"warning"};"ui"==e?P.update_full_logs(t):P.log(t)},js_error_deets:function(e){I.startT(arguments);var t="",s=e?F.prevJSerrors:F.JSerrors;if(0<s.length){for(var r in t+="<ol>",s)if(s.hasOwnProperty(r)){var a,o=s[r];for(a in t+="<li>",o)if(o.hasOwnProperty(a)){var n=o[a];if("URL"==a)n='<a target="_blank" href="'+n+'">'+I.root_rel(n)+"</a>",n+=" (line "+o.line+")";else if("line"==a)continue;t+="<b>"+I.ucwords(a)+":</b> "+n+"<br />"}t+="</li>"}t+="</ol>",F.prevJSerrors=D.extend(!0,[],F.JSerrors),F.JSerrors=[]}return I.endT(arguments),t},isProGroup:function(e){e=F.get_meta(e,"group");return F.proGroups[e.groupSlug]},isForbiddenProperty:function(e){return!(F.pref.buyer_validated||!I.isDomEl(e)||!e.hasClass("property-input")||!F.isProGroup(e))&&(e.val(""),alert(TvrLang.trial_notice),!0)},adjust_mqs_for_unit:function(e){I.startT(arguments);var t,s=["min","max"];for(t in e)if(e.hasOwnProperty(t))for(var r=0;r<s.length;++r){var a=s[r];e[t][a]=parseFloat(e[t][a]),e[t][a+"_unit"]&&"px"!=e[t][a+"_unit"]&&(e[t][a]=parseFloat(e[t][a])*F.baseFontSize)}return I.endT(arguments),e},maybe_pair_class:function(e,t){var s=I.get_pseudo_class(e);if(!s)return!1;var r=s[0];if(!F.get_pseudo_config(s)[r].strip)return!1;s="mt-"+I.convert_to_param(r,"");if("class"==t)return s;if("selector"==t||"full"==t){r=new RegExp(r+"(?!.*"+r+")"),s=e.replace(r,"."+s);return"selector"==t?s:e+", "+s}},get_pseudo_config:function(e){var t,s={};for(t in e)e.hasOwnProperty(t)&&(s[e[t]]={});var r,a=["page_specific","pseudo_elements","pseudo_classes"];for(r in a)if(a.hasOwnProperty(r)){var o,n,i=a[r];for(o in F.cssFilters[i].items)F.cssFilters[i].items.hasOwnProperty(o)&&(n=o.replace("::",":"),(s[o]||s[n])&&(s[n=s[n]?n:o]=D.extend(!0,{},F.cssFilters[i].items[o]),s[n].pCE=o))}return s},psuedo_is_set:function(){var e,t=F.stat.tvr.attr("class"),s=["pseudo_classes","page_specific","pseudo_elements"];for(e in s)if(s.hasOwnProperty(e)&&-1<t.indexOf(s[e]))return!0;return!1},support_sampling:function(e,t){return!0},get_property_tab_control:function(e){e=e.replace(/_/g,"-");return I.checkObject(TvrMT.data.prog.lh,[e,"tab_control"])},pseudo_class_format:function(e){return"filter-"+e.replace(/[:\(\)]+/g,"")},get_pseudo:function(e,t){if("val"==e){t=F.pseudo_class_format(t.pseudoCE);return F.stat.cssModifiers.find("ul.css-filter-list").find("li."+t).find("input").val()}},get_local_window_function:function(e,t){return s=TvrMT.detachedWin,u=window.TvrMT.MTdetached,(!t&&q.detached_window_available(!0)&&!!s.MTlocal&&s.MTLocalFunctionsReady?s:window).MTlocal[e]},keyboard_save_action:function(e,t){F.ua_detected(),F.draftSelector.ace.deferSave=!1;var s=parseInt(F.pref.show_code_editor)?"full":"inline",r="fullSCSSCompile"===t;O.get_focus_editor().session.getMode();if("inline"==s){if(F.selInFocusID){var a=D("#"+F.selInFocusID+"-code-code-css-"+F.get_mq_focus());if(I.isDomEl(a))return P.ajax_save_settings({$editor:F.stat.adaptableEditor,noSaveDelay:!r,$property:a.find("textarea.property-input"),settings:r?{fullSCSSCompile:1}:{}}),e.preventDefault(),!1;t={},a="All settings saved (Ctrl + S)";r&&(t.fullSCSSCompile=1,a="Full Sass compile (Ctrl + Alt + P)"),t=P.user_action(t,{items:[a],icon:"mtif-save"}),P.ajax_save_settings({noSaveDelay:!r,settings:t})}}else O.ace_instant_save(s,O.ace_sync_details.$textarea,F.stat.adaptableEditor,!r,r);e.preventDefault()},keyPressDone:{},shortcutOnce:function(e){F.keyPressDone[e.action]||(e.item.apply(this,e.args),F.keyPressDone[e.action]=1)},setup_keyboard_shortcuts:function(e){var t,a,o;I.startT(arguments),function(e,r,t){function s(e,t,s){e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent("on"+t,s)}function v(e){if("keypress"!=e.type)return l[e.which]||o[e.which]||String.fromCharCode(e.which).toLowerCase();var t=String.fromCharCode(e.which);return t=!e.shiftKey?t.toLowerCase():t}function h(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function b(e,t){var s,r,a=[],o=e;for(o="+"===o?["+"]:(o=o.replace(/\+{2}/g,"+plus")).split("+"),r=0;r<o.length;++r)s=o[r],d[s]&&(s=d[s]),t&&"keypress"!=t&&c[s]&&(s=c[s],a.push("shift")),h(s)&&a.push(s);if(o=s,!(r=t)){if(!i)for(var n in i={},l)95<n&&n<112||l.hasOwnProperty(n)&&(i[l[n]]=n);r=i[o]?"keydown":"keypress"}return{key:s,modifiers:a,action:r="keypress"==r&&a.length?"keydown":r}}function a(e){function i(e){e=e||{};var t,s=!1;for(t in p)e[t]?s=!0:p[t]=0;s||(m=!1)}function l(e,t,s,r,a,o){var n,i=[],l=s.type;if(!_._callbacks[e])return[];for("keyup"==l&&h(e)&&(t=[e]),n=0;n<_._callbacks[e].length;++n){var c,d=_._callbacks[e][n];!r&&d.seq&&p[d.seq]!=d.level||l!=d.action||((c="keypress"==l&&!s.metaKey&&!s.ctrlKey)||(c=d.modifiers,c=t.sort().join(",")===c.sort().join(",")),c&&(c=r&&d.seq==r&&d.level==o,(!r&&d.combo==a||c)&&_._callbacks[e].splice(n,1),i.push(d)))}return i}function c(e,t,s,r){_.stopCallback(t,t.target||t.srcElement,s,r)||!1!==e(t,s)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function t(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t,s=v(e);s&&("keyup"==e.type&&g===s?g=!1:_.handleKey(s,(t=[],(s=e).shiftKey&&t.push("shift"),s.altKey&&t.push("alt"),s.ctrlKey&&t.push("ctrl"),s.metaKey&&t.push("meta"),t),e))}function n(t,e,s,r){function a(e){c(s,e,t),"keyup"!==r&&(g=v(e)),setTimeout(i,10)}for(var o=p[t]=0;o<e.length;++o){var n=o+1===e.length?a:function(e){return function(){m=e,++p[t],clearTimeout(u),u=setTimeout(i,1e3)}}(r||b(e[o+1]).action);d(e[o],n,r,t,o)}}function d(e,t,s,r,a){_._directMap[e+":"+s]=t;var o=(e=e.replace(/\s+/g," ")).split(" ");1<o.length?n(e,o,t,s):(s=b(e,s),_._callbacks[s.key]=_._callbacks[s.key]||[],l(s.key,s.modifiers,{type:s.action},r,e,a),_._callbacks[s.key][r?"unshift":"push"]({callback:t,modifiers:s.modifiers,action:s.action,seq:r,level:a,combo:e}))}var _=this;if(e=e||r,!(_ instanceof a))return new a(e);_.target=e,_._callbacks={},_._directMap={};var u,p={},g=!1,f=!1,m=!1;_._handleKey=function(e,t,s){for(var r=l(e,t,s),a=0,o=!(t={}),n=0;n<r.length;++n)r[n].seq&&(a=Math.max(a,r[n].level));for(n=0;n<r.length;++n)r[n].seq?r[n].level==a&&(o=!0,t[r[n].seq]=1,c(r[n].callback,s,r[n].combo,r[n].seq)):o||c(r[n].callback,s,r[n].combo);r="keypress"==s.type&&f,s.type!=m||h(e)||r||i(t),f=o&&"keydown"==s.type},_._bindMultiple=function(e,t,s){for(var r=0;r<e.length;++r)d(e[r],t,s)},s(e,"keypress",t),s(e,"keydown",t),s(e,"keyup",t)}if(e){var i,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(t=1;t<20;++t)l[111+t]="f"+t;for(t=0;t<=9;++t)l[t+96]=t;a.prototype.bind=function(e,t,s){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,s),this},a.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},a.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},a.prototype.reset=function(){return this._callbacks={},this._directMap={},this},a.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" tvr-mousetrap ")||function e(t,s){return null!==t&&t!==r&&(t===s||e(t.parentNode,s))}(t,this.target))&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},a.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},a.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t]);i=null},(a.init=function(){var e,t=a(r);for(e in t)"_"!==e.charAt(0)&&(a[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))})(),e.TvrMousetrap=a,"undefined"!=typeof module&&module.exports&&(module.exports=a),"function"==typeof define&&define.amd&&define(function(){return a})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?e:null),t=TvrMousetrap,a={},o=t.prototype.stopCallback,t.prototype.stopCallback=function(e,t,s,r){return!!this.paused||!a[s]&&!a[r]&&o.call(this,e,t,s)},t.prototype.bindGlobal=function(e,t,s){if(this.bind(e,t,s),e instanceof Array)for(t=0;t<e.length;t++)a[e[t]]=!0;else a[e]=!0},t.init(),TvrMousetrap.bindGlobal(["alt"],function(e){return v&&v.hoveredElement&&F.shortcutOnce({action:"select_hovered_element",item:v.select_element,args:[v.hoveredElement,{e:e,scroll:!1}]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+b","ctrl+alt+b"],function(e){return F.shortcutOnce({action:"toggle_builder",item:p.keyboard_toggle_builder}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+c","ctrl+alt+c"],function(e){return F.shortcutOnce({action:"show_code_editor",item:F.toggle_feature,args:[!1,"show_code_editor"]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+d","ctrl+alt+d"],function(e){return F.shortcutOnce({action:"detach_preview",item:F.toggle_feature,args:[!1,"detach_preview"]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+r","ctrl+alt+r"],function(e){return F.shortcutOnce({action:"editor_focus",item:function(){var e=O.eds["adaptable-editor"];e&&e.focus()},args:[]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+g","ctrl+alt+g"],function(e){return F.shortcutOnce({action:"view_generated_code",item:F.show_dialog,args:[F.stat.settingsMenu.find("li.item-display-css-code")]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+h","ctrl+alt+h"],function(e){return F.shortcutOnce({action:"toggle_highlighting",item:function(){parseInt(F.pref.mt_highlight)?F.feature_off(0,"mt_highlight",{fHTML:1,noSave:1}):F.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"reg"})}}),!1},"keydown"),TvrMousetrap.bindGlobal(["command+alt+j","ctrl+alt+j"],function(e){return F.shortcutOnce({action:"toggle_inline_gui",item:F.toggle_inline_gui}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+n","ctrl+alt+n"],function(e){return F.shortcutOnce({action:"toggle_preview_page_menu",item:F.toggle_preview_page_menu,args:[F.stat.settingsMenu.find(".program-settings-tab-preview_page")]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+p","ctrl+alt+p"],function(e){return F.shortcutOnce({action:"fullSCSSCompile",item:function(){F.close_dialog(),F.keyboard_save_action(e,"fullSCSSCompile")}}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+s","ctrl+s"],function(e){return F.shortcutOnce({action:"keyboard_save_action",item:F.keyboard_save_action,args:[e,"save"]}),!1}),TvrMousetrap.bindGlobal(["command+alt+t","ctrl+alt+t"],function(e){return F.shortcutOnce({action:"hover_inspect",item:F.toggle_feature,args:[!1,"hover_inspect",{noSave:1}]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+,","ctrl+alt+,"],function(e){return F.shortcutOnce({action:"nav_prev_item",item:F.quick_nav,args:[D("#vb-focus-prev")]}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+.","ctrl+alt+."],function(e){return F.shortcutOnce({action:"nav_next_item",item:F.quick_nav,args:[D("#vb-focus-next")]}),!1},"keypress"),D(e).on("keydown",function(e){var t;38!==e.which&&40!==e.which||(t=D(e.target),I.isDomEl(t)&&t.hasClass("mt-slider")&&!t.next(".combo-arrow").hasClass("on")&&m.increment_change(e,40===e.which))}),D(e).on("keyup",function(e){return F.keyPressDone={},18===e.which?(e.preventDefault(),!1):void(13!==e.which&&27!==e.which||(t=!(!e.target||!e.target.className)&&e.target.className)&&(s=e.target.id,r=D(e.target),e=13===e.which,r.closest("body").hasClass("tvr-visual")&&(0<=t.indexOf("selector-css-textarea")||0<=t.indexOf("selector-name-input")?(a=e?".tvr-button":".cancel",r.closest(".mt-folder-form").find(a).trigger("click")):0<=t.indexOf("add-section-label-input")||0<=t.indexOf("edit-section-label-input")?e?r.closest(".mt-folder-form").find(".tvr-button").trigger("click"):F.close_context_menu():"previewPath"===s&&e?r.closest(".tvr-input-wrap").find(".change-preview-url").trigger("click"):0<=t.indexOf("new-item-input")&&e?r.closest(".tvr-new-item").find(".new-item-add").trigger("click"):"sel-hierarchy-input"===s||"sec-hierarchy-input"===s?F.selectorLabelEditing?e?F.save_selector_label_edit():F.cancel_selector_label_edit():e?F.save_draft_selector(F.retargetSelector,!0):F.cancel_selector_label_edit(F.retargetSelector):"import_from_pack_name"!==s&&"export_pack_name"!==s||(a=e?".dialog-button":".close-dialog",r.closest(".tvr-dialog").find(a).trigger("click")))));var t,s,r,a}),I.endT(arguments)},toggle_main_menu:function(e){var t=!F.stat.mainMenu.hasClass("expanded"),s=e.data("trigger"),e=s===F.stat.mainMenu.data("trigger");if(!t&&e)return F.hide_folders_or_settings("folders","left"),!1;t&&F.show_folders_or_settings("folders","left"),F.search_filter||("all"===s?I.scroll_to({scrollDiv:F.folders_scrollable_area(),top:!0}):F.maybe_show_current_folder_item_view()),F.stat.mainMenu.data("trigger",s)},expand_interface_if_collapsed:function(){parseInt(F.pref.hide_interface)&&F.feature_off(!1,"hide_interface")},show_folders_or_settings:function(e,t){F.expand_interface_if_collapsed();var s=q.get_sidebar_container(e,!1,t);s.$el.addClass("expanded on"),s.$toggle.addClass("on"),F.stat.tvr.addClass("mt-"+e+"-showing"),"folders"===e&&!parseInt(F.pref.dock_folders_left)||q.update_sidebar_z_indexes(e,t)},hide_folders_or_settings:function(e,t,s){F.clean_tooltips();var r=q.get_sidebar_container(e,!1,t),a=r.$toggle;r.$otherToggle&&(a=a.add(r.$otherToggle)),r.$el.removeClass("expanded on"),a.removeClass("on"),F.stat.tvr.removeClass("mt-"+e+"-showing"),s||((s=q.return_another_panel_to_top(e,t))&&s!==e?q.update_sidebar_z_indexes(s,t):r.$el.removeClass("mt-top-panel"))},close_all_expanded:function(e){I.startT(arguments);for(var t=e.data("forpopup"),s={contextMenu:{$el:F.stat.contextMenu,run:F.close_context_menu},folders:{$el:F.stat.mainMenu,run:F.hide_folders_or_settings,args:["folders","left"],closeException:function(e){return"mymtonoffswitch-dock_folders_left"===e.attr("id")||"folders"===F.stat.contextMenu.data("relatedto")}},settingsMenu:{$el:F.stat.settingsMenu,run:F.hide_folders_or_settings,args:["settings","right"],closeException:function(e){return!!F.doNotCloseSettingsMenu&&!(F.doNotCloseSettingsMenu=!1)}},picker:{$el:F.stat.styleComponents.find(".sp-container"),run:F.picker_method,args:["hide"]},units:{$el:m.stat.cssUnitMenu,run:m.hide_unit_menu,args:[]}},r=Object.keys(s),a=0;a<r.length;a++){var o=r[a],n=s[o],i=n.$el;!(I.isDomEl(i)&&i.hasClass("expanded"))||n.closeException&&n.closeException(e)||t===o||D.contains(i[0],e[0])||I.isDomEl(e.closest(".ui-autocomplete"))||n.run.apply(this,n.args||[])}(e.hasClass("grid-control")||e.hasClass("pg-icon-grid"))&&m.hide_slider_set(),I.endT(arguments)},close_tooltip:function(e,t){e.attr("title",t.text()).removeAttr("aria-describedby"),t.remove()},clean_tooltips:function(){if(I.startT(arguments),"native"==F.tooltipDelay)return!1;if("native"!=F.tooltipDelay){var e,t=F.stat.body.data("ui-tooltip");if(I.hasValue(t)){for(var s in t.tooltips)t.tooltips.hasOwnProperty(s)&&(e=D(t.tooltips[s].element[0]),s=D(t.tooltips[s].tooltip[0]),F.close_tooltip(e,s));F.tt=!1,F.tt_trigger={}}}I.endT(arguments)},reset_global_vars:function(){I.startT(arguments),F.selInFocusID="",F.menuSelInFocusID="",F.curSelCSS="#no-element",F.intelli_css="#no-element",I.endT(arguments)},update_global_vars:function(e){I.startT(arguments),F.selInFocusID=e.selectorID,F.menuSelInFocusID=F.selInFocusID.replace("opts","strk"),F.curSelCSS=I.custom_escape_quotes(e.selectorCode),F.previous_selector=e.selectorCode,F.curSelEls=v?v.jquery_compat_sel_elements(F.curSelCSS):{},F.retargetSelector||F.draftSelector.atts.id||F.save_last_viewed_selector(F.selInFocusID),F.update_current_selector_controls(e),F.update_cur_item_disabled_state(e,"both"),I.endT(arguments)},update_cur_item_disabled_state:function(e,t){var s,r;"section"!==t&&"both"!==t||!F.is_cur("section",e.sectionSlug)||(s=F.is_dis(e.sectionM),r=F.stat.curSecTrailText.hasClass("item-disabled"),s&&!r?F.stat.curSecTrailText.addClass("item-disabled"):!s&&r&&F.stat.curSecTrailText.removeClass("item-disabled")),e.selectorM&&("selector"===t||"both"===t)&&F.is_cur("selector",e.selectorID)&&e.selectorM&&(t=F.is_dis(e.selectorM),e=F.stat.curSelInput.hasClass("item-disabled"),t&&!e?F.stat.curSelInput.addClass("item-disabled"):!t&&e&&F.stat.curSelInput.removeClass("item-disabled"))},save_last_viewed_selector:function(e){I.updateObject(F.uiData,["non_section","meta","last_viewed_selector"],e),F.dontLogSelectorChange||P.silent_save("",[{trail:["non_section","meta","last_viewed_selector"],action:"replace",data:e}])},menu_object:function(e){return D("#"+e.replace("opts","strk"))},section_slug:function(e){var t=D("#"+e);return!!I.isDomEl(t)&&F.get_meta(D("#"+e),"selector").sectionSlug},is_cur:function(e,t){if(I.hasValue(F.selInFocusID)){if("section"==e){if(t==F.section_slug(F.selInFocusID))return!0}else if("selector"==e&&t==F.selInFocusID)return!0;return!1}},is_dis:function(e){return!!e.hasClass("item-disabled")},allowed_action:function(e,t){var s=!1;return!F.trial||("Edit Sel"===t&&I.isDomEl(e.selectorM.hasClass(".trial-disabled"))&&(s=!0),!(s="Add Sel"===t&&15<=F.totalSels?!0:s)||(alert(F.trialNotice),!1))},sel_trail:function(e){return{pieces:e.split(/\s?>\s?|\s?\+(?![^(]*\))\s?|\s?~\s?|\s/)}},load_css_ref:function(e){I.startT(arguments),F.show_dialog(e),I.endT(arguments)},show_google_fonts_field:function(e){e.is(":visible")?F.show_dialog(e.find(".g-font")):(e.removeClass("hidden"),F.adjust_scroll_buttons(F.get_pg_meta(),"style"))},hide_google_fonts_field:function(e,t){F.gFontTarget.val("").prop("val",""),t.addClass("hidden"),F.adjust_scroll_buttons(F.get_pg_meta(),"style")},insert_google_font:function(e){F.close_dialog(),F.gFontTarget.val(e).focus(),F.post_edit(F.gFontTarget),P.ajax_save_settings({$property:F.gFontTarget})},launch_img_uploader:function(s){wp.media.editor.send.attachment=function(e,t){t=(e.size?t.sizes[e.size]:t).url;F.update_bg_image(s,t)},wp.media.editor.open("wpMediaFakePostID")},update_bg_image:function(e,t){e=F.get_meta(e,"property").property.find(".property-input");t=-1<t.indexOf(F.siteUrl)&&!parseInt(F.pref.abs_image_paths)?I.root_rel(t,F.siteUrl):t,e.val(t),F.adjust_comp_span(e,"after"),I.scroll_input_end(e),P.ajax_save_settings({$property:e})},clear_bg_image:function(e){I.startT(arguments),F.update_bg_image(e,""),I.endT(arguments)},get_animation_name:function(e){return e.groupTab.find("input.property-input").val()},refresh_event_binding:function(){v&&v.stat.win.MT_Events_Manager&&v.stat.win.MT_Events_Manager.refresh_event_binding()},user_play:function(e,t,s,r){e=e.animationConfig;v&&e.flashCSSRules&&e.animationName&&v.trigger_animation(e,r)},mt_scroll:{style:{offsets:[],rightPositions:[],rightPosIndex:-1},responsive:{offsets:[],rightPositions:[],rightPosIndex:-1},gridcolumns:{offsets:[],rightPositions:[],rightPosIndex:-1},gridrows:{offsets:[],rightPositions:[],rightPosIndex:-1}},scroll_row:function(e){var t,s=e.data("type");if("style"===s||"gridcolumns"===s||"gridrows"===s){var r=F.get_pg_meta();if(!r)return!1;t="style"===s?(o=r.groupTab,r.groupTab.find(".pg-inner")):(o=r.group.find(".tab-control-"+F.pref.grid_focus+"."+s).find(".mt-variable-line")).find(".mt-vl-inner")}else"responsive"===s&&(o=F.stat.res.find(".query-tabs-wrap"),t=F.stat.res.find(".query-tabs"));if(t){r=F.get_row_excess(o,t,s);if(!r)return!1;var a,o=o.width(),n=Math.abs(parseInt(t.css("marginLeft")));if(e.hasClass("mt-scroll-left"))a=F.mt_scroll[s].rightPositions[F.mt_scroll[s].rightPosIndex-1],I.isDefined(a)?(F.mt_scroll[s].rightPositions.splice(F.mt_scroll[s].rightPosIndex,1),F.mt_scroll[s].rightPosIndex--):(a=0,F.mt_scroll[s].rightPositions=[],F.mt_scroll[s].rightPosIndex=-1);else{for(var i=n+o,l=r<i?r:i,c=F.mt_scroll[s].offsets,d=0;d<c.length;d++)if(l<c[d]){var _=c[d-1],u=c[d],l=n<_&&i<u?_:u;break}if(n===l)return!1;F.mt_scroll[s].rightPositions.push(l),F.mt_scroll[s].rightPosIndex++,a=l}t.css("marginLeft",(a*=-1)+"px")}},adjust_scroll_buttons:function(e,t){if(I.startT(arguments),!e&&"responsive"!==t)return!1;var s,r,a,o,n=!1,i=!1;switch(t){case"style":r=(s=F.get_group(e)).find(".pg-inner"),a=e.selector.find("li.scroll-lr-buttons-"+t),n="code"===e.groupSlug||"grid"===e.groupSlug,i="grid"===e.groupSlug;break;case"responsive":s=F.stat.res.find(".query-tabs-wrap"),r=F.stat.res.find(".query-tabs"),a=F.stat.res.find("div.scroll-lr-buttons");break;case"gridcolumns":case"gridrows":r=(s=e.group.find(".tab-control-"+F.pref.grid_focus+"."+t).find(".mt-variable-line")).find(".mt-vl-inner"),a=e.selector.find("li.scroll-lr-buttons-"+t)}if(!r)return!1;o=F.get_row_excess(s,r,t,"checkShow"),s.removeClass("pending-overflow-check"),o&&!n?(a.addClass("buttons-showing"),s.addClass("hor-scroll-needed"),F.mt_scroll[t].rightPositions=[]):(F.mt_scroll[t].rightPositions=[],F.mt_scroll[t].rightPosIndex=-1,r.css("marginLeft","0px"),a.removeClass("buttons-showing"),s.removeClass("hor-scroll-needed")),i&&F.adjust_grid_line_scroll_buttons(e),I.endT(arguments)},adjust_grid_line_scroll_buttons:function(e){F.adjust_scroll_buttons(e,"gridcolumns"),F.adjust_scroll_buttons(e,"gridrows")},get_row_excess:function(e,t,s,r){I.startT(arguments);var a=e.width(),o=0,n=[],i=e.hasClass("property-grid");return(i?t.children().filter(".tab-control-"+F.pref.grid_focus):t.children()).each(function(e){var t=D(this);t.is(":visible")&&parseInt(t.css("opacity"))&&(o+=t.outerWidth(!0),n.push(o))}),(e.hasClass("property-border")||i)&&(o/=2),0<o-a&&(o+=50),a=o-a,F.mt_scroll[s].offsets=n,I.endT(arguments),0<a&&a},input_icon_toggle:function(e,t,s){I.startT(arguments);var r,a,o,n,i,l,c=e,d=e.attr("data-input-type"),_=e.attr("data-input-level"),u="pgtab"===_?"group":_,p=F.title(e),g=e.hasClass("active")?"":1,f=!1,m=d+"-tracker",v=!1,h={domDepth:_,maxDepth:"selector",clean:{},cleanMaxDepth:"selector"},b=!1,y="disabled"===d&&"tab"===_?F.context_menu_data.mq_key:F.get_mq_focus(),w=F.get_input_stems(y),T=w.mq,w=w.imp;if("important"===d){var x,S="tvr_mcth[non_section][important]"+w+"["+(x=F.get_meta(e,"property")).sectionSlug+"]["+x.selectorSlug+"]["+x.groupSlug+"]["+x.propertySlug+"]",k=I.get_name_attr_index(x.property.find("input.property-input").attr("name"));!1!==k&&(S+="["+k+"]"),h.mq_key=y,h.recurse_key=["important"],h.clean.selector=[],v=!0}else if("disabled"===d){var C,v=!0;h.itemWasDisabled=_,x=F.get_meta_for_context(e,u),"section"===_?S=(j=F.disabled_quick_edit(x.sectionM,_,x)).find("input.section-display-name").attr("name").replace("[label]","["+d+"]"):"selector"===_?(S=(j=F.disabled_quick_edit(x.selectorM,_,x)).find("input.selector-label").attr("name").replace(/\[label\]$/,"["+d+"]"),h.clean.selector=[[d]]):"tab"===_?(j=F.stat.res.find(".mq-tab-"+y),m+="-"+y,S=T+"["+x.sectionSlug+"]["+x.selectorSlug+"][tab]["+d+"]",c=x.selectorM.find("span.disabled-responsive-tabs"),h.domDepth="selector",h.mq_key=y,h.onlyRecurse="all-devices"!==y,h.incRecurse=h.onlyRecurse,h.recurse_key=["m_query"],h.clean.selector=[["tab"],[d]]):"subgroup"===_||"pgtab"===_?(j=e.closest("span.quick-opts-wrap"),w=(C="pgtab"===_)&&e.data("tab-group"),k=C?"pgtab_"+d:"pg_"+d,u=C?e.data("tab-group"):x.subgroupSlug,S=T+"["+x.sectionSlug+"]["+x.selectorSlug+"]["+k+"]["+u+"]",h.domDepth="group",h.mq_key=y,h.onlyRecurse="all-devices"!==y,h.incRecurse=h.onlyRecurse,h.recurse_key=["m_query"],h.clean.selector=[[k],[u]],(f=F.maybe_add_nth_index_filter(C,w,x,e,h.clean.selector))&&(S+="["+f+"]"),C&&(_="group")):"script"===_&&(j=e.closest("div.item-row"),S="tvr_preferences[enq_js]["+I.convert_to_param(j.find(".script-name").text(),"")+"][disabled]")}else if("chained"===d)v=!0,x=F.get_meta(e,"subgroup"),g&&(f=F.get_subgroup_or_tabgroup(x,"inputs"),C=(a=!!I.isDomEl(F.inputWaitingObj)&&F.inputWaitingObj)?a.val():"",o=I.isDefined(C),D.fn.MTreverse=[].reverse,f.MTreverse().each(function(e){var t=D(this),s=t.val();o&&t.attr("name")===a.attr("name")&&(n=a),I.isDefined(s)&&(r=t)}),r&&(C=void 0,f=(n=n||r).closest(".property-tag").find(".css_unit-tracker"),I.isDomEl(f)&&(C=n.closest(".property-tag").find(".css_unit-tracker").val()),F.sync_fields(n,x,C))),S=T+"["+x.sectionSlug+"]["+x.selectorSlug+"][pg_"+d+"]["+x.subgroupSlug+"]",h.domDepth="group",h.mq_key=y,h.recurse_key=["m_query"],h.clean.selector=[["pg_"+d],[x.subgroupSlug]];else if("flexitem"===d||"griditem"===d){var j=e.closest("div.property-fields"),b=!0,T="tvr_mcth["+(x=F.get_meta(j.find("div.sub-label"),"group")).sectionSlug+"]["+x.selectorSlug+"]";if(S=T+"[pg_"+d+"]",h.domDepth="group",h.mq_key=y,h.recurse_key=["m_query"],h.clean.selector=[["pg_"+d]],"griditem"===d){y={};return E.fill_object_from_name(y,S,g),E.fill_object_from_name(y,T+"[nth_item]",g?0:1),P.quick_save_data(!1,y),"griditems"!==F.get_grid_focus()&&(F.pref.grid_focus="griditems"),F.trigger_pg_icon_click("grid"),!1}}g?(M='<input class="input-toggle-tracker '+m+'" type="hidden" name="'+S+'" value="1" />',e.addClass("active"),i="add",e.attr("data-neg"),"disabled"===d&&"tab"===_?c.append(M):c.before(M),"disabled"===d&&(j.addClass("item-disabled"),F.update_cur_item_disabled_state(x,_)),"flexitem"!==d&&"griditem"!==d||j.add(F.stat.grid).addClass("show-single-"+d)):(e.removeClass("active"),i="remove",e.attr("data-pos"),(l=c.siblings("."+m)).val(""),"disabled"===d&&(j.removeClass("item-disabled"),F.update_cur_item_disabled_state(x,_)),"flexitem"!==d&&"griditem"!==d||j.add(F.stat.grid).removeClass("show-single-"+d));var M=P.h_i_class(_,x),c=e.attr("class"),m=!1,j=!1;"important"===d&&(c+=" lg-icon",j="",m=!!F.chain_is_on(x)&&x.subgroupH+" "+TvrLang.fields_sync,m&&!t&&F.sync_important(x,i)),s||(h.M=x,"chained"!==d&&(h.mtData={},E.fill_object_from_name(h.mtData,S,g)),"script"===_?D.extend(!0,F.pref,h.mtData):(t&&(h.return="mtData"),h=E.dom_to_data(h))),g||l.remove(),s||t||(b||(h=P.user_action(h,{items:[_],val:p,valTT:m,M:x,pathTT:!0,icon:[{icon:M},{icon:c,iconC:j}]})),v&&q.editor_and_gui()&&x&&x.selector&&O.gui_to_editor(!1,x),P.ajax_save_settings({settings:h})),I.endT(arguments)},get_input_stems:function(e){var t="tvr_mcth",s="";return"all-devices"!==e&&(t+="[non_section][m_query]["+e+"]",s="[m_query]["+e+"]"),{mq:t,imp:s}},maybe_add_nth_index_filter:function(e,t,s,r,a){r=e?s.group.find(".property-tag.tab-control-"+t).first():r.closest(".subgroup-tag").next(".property-tag");if(r.hasClass("has-variable-line"))return!1;r=r.find("input.property-input"),r=!!I.isDomEl(r)&&I.get_name_attr_index(r.attr("name"));return!1!==r&&a.push(["value"],[r]),r},disabled_quick_edit:function(e,t,s){return"section"===t&&F.is_cur("section",s.sectionSlug)&&(e=e.add(F.stat.curSecTrailText)),e="selector"===t&&F.is_cur("selector",s.selectorID)?e.add("#sel-in-focus"):e},tt_config:function(i){return{position:{my:"center top",at:"center bottom+10",collision:"flipfit"},hide:!1,show:{effect:"none",duration:0,delay:F.tooltipDelay},create:function(e,t){},open:function(e,t){I.startT(arguments),F.itemIsBeingDragged&&F.clean_tooltips();var s=F.get_tt(t),r=i.get_tt_trigger(e,this),a=r.data("dyn-tt-root"),o=!!a&&D("#"+a);s.data("mt-tt-trigger",a?o:r),a&&(n=(n=o.hasClass("on")?o.data("neg"):o.data("pos"))||o.attr("title"),s.html(n));var n=s.find(".ui-tooltip-content").html();n&&(n=I.regular_escaped_to_non_escaped(n.replace(/&amp;/g,"&").replace(/\n/g,"<br />")),s.html(n));n=s.parent();I.isDomEl(n)&&"body"!==n[0].tagName.toLowerCase()&&(r=r.offset(),s.appendTo("body"),s.css({top:r.top+40+"px",left:r.left-40+"px"})),I.endT(arguments)},close:function(e,t){F.tt=!1,F.tt_trigger={}}}},title:function(e){var t=e.data("ui-tooltip-title");return t||e.attr("title")},enable_tt:function(e){e.tooltip(F.tt_config(F))},get_tt:function(e){return F.tt=e.tooltip},get_tt_trigger:function(e,t){return F.tt_trigger=D(e.originalEvent.target||e.originalEvent.srcElement).closest(D(t).tooltip("option","items")),F.tt_trigger},refresh_tt:function(e,s,r){I.startT(arguments),e.each(function(e){var t=D(this);"native"==F.tooltipDelay||!F.tt||r&&!t.is(r)?(t.attr("title",s),r&&r.data("dyn-tt-root")&&F.update_tt(F.tt,s,t)):F.update_tt(F.tt,s,t)}),I.endT(arguments)},update_tt:function(e,t,s){if(!I.isDomEl(e)||!e.data("mt-tt-trigger").is(s))return!1;s=e.find(".ui-tooltip-content");(s=I.isDomEl(s)?s:e).html(t.replace("\n","<br />")),F.tt_trigger.data("ui-tooltip-title",t)},parse_editor_selectors:function(e){var i={},l=0,t=parseInt(F.pref.allow_scss)?"scss":"css";if(e){t=F.parse_scss_or_css(e,t);if(!t)return!1;t.forEach("ruleset",function(e){var t=e.content;++l;for(var s=0;s<t.length;s++){var r=t[s];"block"===r.type?t.splice(s,1):"selector"===r.type&&0}var a=e.end.line-1,e=e.toString().trim();if(e.match(/\*/)){for(var o=e.split(","),n=o.length-1;0<=n;n--)"*"===o[n].trim()&&o.splice(n,1);e=o.join(",")}e&&(i["hand_coded_css-"+l]={type:"hand_coded_css",sName:e,code:e,line:a})})}return i},get_all_selector_code:function(e){I.startT(arguments);var t,s,r=I.checkObject(F.uiData.non_section,["meta","fullCodeSelectors"]),a=r?D.extend(!0,{},r):{};for(t in F.uiData)if(F.uiData.hasOwnProperty(t)&&"non_section"!=t&&F.uiData.hasOwnProperty(t))for(var o in F.uiData[t])F.uiData[t].hasOwnProperty(o)&&"this"!=o&&t+"_"+o!==F.ignoreSelector&&(!F.uiData[t][o]||!F.uiData[t][o].label||e&&(F.uiData[t][o].isDraft||F.uiData[t][o].isDraftRetarget)||(s=F.uiData[t][o].label.split("|"),a["strk-"+t+"-"+o]={fName:F.uiData[t].this.label,sName:s[0],code:s[1]}));return I.endT(arguments),a},get_dom_item:function(e,t,s,r,a,o){var n,i=a?D.extend(!0,{},e,a):e,s="menu"===s?"strk":"opts";switch(t){case"section":case"selector":case"group":n=i.trail.item;break;case"subgroup":case"property":var l=I.prop_to_cssf(e.property_key),c=I.checkObject(TvrMT.data.prog.lh,[l,"sub_slug"]),l="subgroup"===t?"subgroup":e.property_key;if(!(c="animation"===e.group_key?"animation":c))return!1;n=i.trail.root_to_group.concat([c,l,e.recurse.mq_key])}return s="#"+s+"-"+n.join("-"),o=o?o.find(s):D(s),!!I.isDomEl(o)&&(r?{$item:o,id:s,M:F.get_meta(o,t)}:o)},get_selector_in_focus:function(){return!!F.selInFocusID&&F.get_meta(D("#"+F.selInFocusID),"selector")},get_context_from_container:function(e){return e.parent().data("context")},get_meta_for_context:function(e,t,s){switch(s=s||F.get_context_from_container(e)){case void 0:case"folders-menu":return F.get_meta(e,t);case"popup-form":case"folder-popup":return F.context_menu_data.M;case"current-item":return F.get_selector_in_focus()}return!1},get_meta:function(e,t){I.startT(arguments),F.meta={};var s,r,a=["stub","section","selector","group","subgroup","property"];for(s in a)a.hasOwnProperty(s)&&a[s]==t&&(r=(e.attr("class")&&0<=e.attr("class").indexOf(t+"-tag")?e:e.closest("."+t+"-tag")).attr("id").split("-"));var o,n,i,l="";for(o in r)r.hasOwnProperty(o)&&0!=o&&6!=o&&7!=o&&(t=a[o],l+="-"+r[o],"property"==t||"subgroup"==t?(n="property"==t?l+"-"+r[6]:l+"-subgroup-"+r[6],"all"==r[6]&&(r[6]+="-devices",n+="-devices"),F.meta.tabSlug=r[6],F.meta[t]=D("#opts"+n),F.meta.pgTabControlSlug=F.meta[t].data("pgtabcontol")):F.meta[t]=D("#opts"+l),n=r[o],F.meta[t+"Slug"]=n,"section"==t?(F.meta[t+"M"]=D("#strk"+l),F.meta[t+"H"]=F.meta.sectionM.find(".section-display-name").val(),F.meta[t+"ID"]="opts-"+F.meta.sectionSlug,F.meta[t+"MID"]="strk-"+F.meta.sectionSlug):"selector"==t?(F.meta[t+"M"]=D("#strk"+l),i=F.meta.selectorM.find(".selector-label").val().split("|"),F.meta[t+"H"]=i[0],F.meta[t+"Code"]=i[1],F.meta[t+"ID"]="opts-"+F.meta.sectionSlug+"-"+F.meta.selectorSlug,F.meta[t+"MID"]="strk-"+F.meta.sectionSlug+"-"+F.meta.selectorSlug):"group"==t?(F.meta[t+"ID"]="opts-"+F.meta.sectionSlug+"-"+F.meta.selectorSlug+"-"+F.meta.groupSlug,i=F.get_mq_focus(),F.meta[t+"Tab"]=F.meta[t].find("div.property-fields-"+i),F.meta[t+"H"]=F.stat.css_icons.find("ul.styling-option-icons").find(".pg-icon-"+F.meta.groupSlug).attr("title"),"animation"==n||"transition"==n?(F.meta.event=F.meta[t+"Tab"].find("input.mt-event-input").first().val(),F.meta.eventKey=F.meta.event?I.convert_to_param(F.meta.event,""):"",F.meta.eventValue=F.meta[t+"Tab"].find("input.mt-event-value-input").first().val()):F.meta.event=F.meta.eventKey=F.meta.eventValue=""):"subgroup"==t||"property"==t&&(F.meta.subgroupH=F.meta.subgroup.find("span.subgroup-label").text(),F.meta[t+"H"]=F.meta[t].find("span.option-label").text()));return F.meta.tabSlug||(F.meta.tabSlug=F.get_mq_focus()),F.meta.tabH=F.get_tab_name(F.meta.tabSlug),I.endT(arguments),F.meta},get_pg_meta:function(e){if(!F.selInFocusID||!F.pref.pg_focus)return!1;var t=D("#"+F.selInFocusID);if(!I.isDomEl(t))return!1;t=e?t.find("li.group-tag-"+F.pref.pg_focus).find("group-row-"+e):t.find("li.group-tag-"+F.pref.pg_focus);return!!I.isDomEl(t)&&F.get_meta(t,"group")},colorpicker_bind:function(e,t){I.startT(arguments);D("<div></div>");var s=!1,r=t?e:e.find("input.color:not(.bound)");r.each(function(){s=!0;var e=D(this),t=e.closest(".property-tag").attr("id");e.mtspectrum({appendTo:F.stat.styleComponents,belongsTo:t,containerClassName:"picker-belongs-to-"+t,showAlpha:!0,showInput:!1,allowEmpty:!0,showInitial:!0,preferredFormat:"rgb",showButtons:!1,showSelectionPalette:!0,localStorageKey:"shared_palette",maxSelectionSize:9,hide:function(e){F.$pickerContainer.draggable("destroy"),F.$pickerContainer.removeClass("expanded")},show:function(e){I.startT(arguments);var t=F.inputWaitingObj=D(this),s=F.get_meta(t,"property"),r=".picker-belongs-to-"+s.property.attr("id"),a=F.$pickerContainer=F.stat.styleComponents.find(r);a.hasClass("ui-draggable")||a.draggable({cancel:".combo-arrow, input, .palette-tile, .sp-palette-row-initial, .ui-menu, .palette-button, .refresh-icon, .sp-alpha, .sp-alpha-inner, .sp-alpha-handle"}),a.hasClass("extra-fields-added")||(a.addClass("extra-fields-added").find(".sp-mt-inputs").prepend('<input type="number" min="0" max="1" step="0.1" class="sp-input-opacity sp-input">'),a.find(".sp-clear").on("click.mt",function(e){F.clear_spectrum_inputs(s,!0)})),a.addClass("expanded").data("popupName","picker"),F.draw_palette(a);var o=a.css(["top","left"]),r=parseInt(o.top),o=parseInt(o.left),o=F.pref.dock_styles_left?{top:r+10+"px",left:"0px"}:{top:"-1px",left:o+40+"px"};a.css(o),t.val()?F.maybe_set_variable_color(t.val(),t,a.find(".sp-input-var"))||F.update_spectrum_inputs(e,t,{},!0):(a=s.property.find("span.comp-style").find("span").attr("style"))&&("transparent"!=(a=a.split("background-color:"))[1]&&"rgba(0, 0, 0, 0)"!=a[1]||(a[1]="rgba(0, 0, 0, 1)"),F.update_spectrum(a[1],t,{},!0,!0),t.val(""),s.property.find(".sp-preview-inner").css("background-color","transparent").addClass("sp-clear-display")),I.endT(arguments)},move:function(e){F.color_tile_selected&&I.isDomEl(F.color_tile_selected,!0)&&(F.color_tile_selected.removeClass("tile-selected"),F.color_tile_selected=!1,F.$palette.find(".mt-save-color").addClass("show"),F.$palette.find(".mt-remove-color").removeClass("show")),F.update_spectrum_inputs(e,D(this),{},!0),F.set_input_timer(10)}}).on("dragstart.spectrum",function(e,t){F.colorPickerDragging=!0,F.get_local_window_function("maybe_hide_mt_highlight")()}).on("dragstop.spectrum",function(e,t){F.colorPickerDragging=!1,F.get_local_window_function("maybe_reinstate_mt_highlight")()}).addClass("bound")}),s&&t&&r.mtspectrum("show"),I.endT(arguments)},format_autocomplete_id:function(e,t){var s=e.closest(".property-tag"),r=s.attr("id"),a=t+"-belongs-to-"+r,t=s.hasClass("tab-control-gridtemplate"),s=s.hasClass("tab-control-gridauto");return(t||s)&&(a+="-input-nth-index-"+(e.closest(".tvr-input-wrap").index()+1),t&&(a+="-input-filter-"+e.closest(".vl-item").data("input-filter"))),{containerID:a,fieldID:r}},get_related_meta:function(e,t,s){var r,a,o,n,i,l=e+"-belongs-to";return!s&&t.hasClass("picker"===e?"sp-container":"ui-autocomplete")?(o=t.data(l),n=t.attr("id"),i=t,s=F.get_meta(D("#"+o),"property"),a=".tvr-input-wrap",(l=n.split(/(?:-input-nth-index-|-input-filter-)/g))[1]&&(a+=":nth-child("+l[1]+")"),l[2]&&(a+=" ."+l[2]),a=s.property.find(a).find("input.property-input"),"combo"===e&&i.siblings(".sp-input-var").length&&(r=i.siblings(".sp-input-var"))):(s=s||F.get_meta(t,"property"),a=("picker"===e?s.property:t.parent()).find("input.property-input"),o=(e=F.format_autocomplete_id(a,e)).fieldID,n=e.containerID,i=D("#"+n)),{$input:a,$colorVarInput:r,$container:i,containerID:n,fieldID:o,M:s}},draw_palette:function(n){var e=F.get_meta(F.inputWaitingObj,"property"),i=this.get_related_meta("picker",!1,e),e=(n=n||i.$container).find("ul.mt-picker-palette");I.isDomEl(e)?e.replaceWith(F.color_palette()):n.prepend(F.color_palette()),F.$palette=n.find("ul.mt-picker-palette"),n.find("ul.mt-picker-palette").on("click.mt-spectrum","span.full-palette-toggle, span.palette-button, span.refresh-icon, span.tile-color",function(e){var t,s,r,a=D(e.target),o=i.$input;a.hasClass("full-palette-toggle")?F.toggle_feature(a):a.hasClass("tile-color")?(F.$palette.find("span.tile-selected").removeClass("tile-selected"),s=a.data("color"),F.maybe_set_variable_color(s,o,n.find(".sp-input-var"))||F.update_spectrum(s,o,{},!0),t=a.data("id"),P.ajax_save_settings({context:"redrawPalette",$property:o}),e=(a=F.$palette.find("span."+t)).parent(),a.addClass("tile-selected"),F.color_tile_selected=a,t=(r=F.$palette.find("div.saved-colors-wrap")).find("span.mt-save-color"),r=r.find("span.mt-remove-color"),e.hasClass("saved-tile")?(t.removeClass("show"),r.addClass("show")):(t.addClass("show"),r.removeClass("show"))):a.hasClass("palette-button")?(r=s=n.find(".sp-input-var").val()||o.mtspectrum("get").toRgbString(),o=!1,a.hasClass("mt-remove-color")&&(r=!1,o=s=F.$palette.find("span.tile-selected").data("color")),E.splice_sug_val(r,o,"color","saved",{redrawPalette:1,save:!0})):a.hasClass("refresh-icon")&&E.refresh_sug_values({specific:"color",$resample:a})})},color_palette:function(){var e=D("#mt-picker-palette").clone().removeAttr("id"),t=e.find("li.view-full-palette"),s=F.pref.my_props.sug_values.color,r=s.recent,a=s.saved,o=s.sampled;return F.pref.full_color_palette&&(s=t.find("span.full-palette-toggle")).addClass("on").attr("title",s.data("neg")),e.find("ul.mt-picker-palette").html(D(F.color_palette_tiles("mini","recent",F.numMiniTiles-1,r)).add(t)),e.find("ul.recent-full-palette").html(F.color_palette_tiles("full","recent",F.numMiniTiles,r)),e.find("ul.saved-full-palette").html(F.color_palette_tiles("full","saved",F.numSavedTiles,a)),e.find("ul.site-full-palette").html(F.color_palette_tiles("full","site",F.numSiteTiles,o)),e},isVariableTile:function(e){var t="";return e&&(-1<e.indexOf("var(")?t="var":-1<e.indexOf("$")&&(t="$")),t},color_palette_tiles:function(e,t,s,r){for(var a="",o=0;o<s;++o){var n=r[o],i=n&&-1<n.indexOf("$")?E.get_variable_value(n,"scss"):n,l=F.pref.color_as_hex?I.maybe_to_hex(n):n,c=n?'title="'+l+'"':"",d=n?'style="background-color:'+i+'"':"",_=n?"has-color":"no-color",l=e+"-"+t+"-"+o,i=F.isVariableTile(n);a+='<li class="'+e+"-tile "+t+"-tile  palette-tile "+_+'">'+(n?'<span class="tile-color '+l+'" data-color="'+n+'" data-id="'+l+'" '+d+" "+c+">"+i+"</span>":"")+"</li>"}return a},picker_method:function(e){I.startT(arguments),I.isDomEl(F.inputWaitingObj)&&("hide"===e?F.inputWaitingObj.mtspectrum("hide"):"clickpick"===e&&F.get_meta(F.inputWaitingObj,"property").property.find(".sp-container").trigger("mouseup")),I.endT(arguments)},update_spectrum:function(e,t,s,r,a){I.startT(arguments);var o=tinycolor(e),n=o.toRgb();tinycolor(n).isValid()&&(t.mtspectrum("set",n),F.update_spectrum_inputs(o,t,s,r,a),a||F.adjust_comp_span(t,"after"),I.endT(arguments))},update_spectrum_inputs:function(e,t,s,r,a){var o;I.startT(arguments),e?(o=e.toRgbString(),a||t.val(o).css("background-color",o),(o=this.get_related_meta("picker",t).$container).find(".sp-input-hex").not(s).val(e.toHexString()),o.find(".sp-input-rgb").not(s).val(e.toRgbString()),o.find(".sp-input-hsl").not(s).val(e.toHslString()),o.find(".sp-input-opacity").not(s).val(e.toRgb().a),o.find(".sp-input-var").not(s).val(""),r&&!a&&F.maybe_sync_fields(t),I.isDomEl(s)&&s.focus(),I.endT(arguments)):t.val("")},clear_spectrum_inputs:function(e,t){I.startT(arguments);var s=e.property.find("input.color");e.property.find("input.sp-input, input.color").val("").end().find("div.sp-alpha-inner, div.sp-preview-inner").css("background-color","transparent").end().find("div.sp-preview-inner").addClass("sp-clear-display"),F.adjust_comp_span(s,"after"),t&&(F.picker_method("hide"),F.maybe_sync_fields(s)),I.endT(arguments)},update_count:function(e,t,s,r,a){I.startT(arguments),I.hasValue(a)||(a=0);var o,n,i,l=parseInt(e.attr("rel"));"add"==t?o=l+parseInt(s):"subtract"==t&&(o=l-parseInt(s)),e.attr("rel",o),"section"!=r&&(0==l&&e.after(' <span class="folder-count-wrap count-wrap">(<span class="folder-state-count state-count"></span>)</span>'),0==o?e.next("span").remove():e.next("span").find(".state-count").text(parseInt(o))),"section"==r?(i=D("#total-sec-count"),n=parseInt(i.text()),l<o?(F.totalSecs=parseInt(n+s),i.text(F.totalSecs),F.totalSels=F.totalSels+parseInt(a)):(F.totalSecs=parseInt(n-s),i.text(F.totalSecs),F.totalSels=F.totalSels-parseInt(a)),D("#total-sel-count").text(parseInt(F.totalSels))):"selector"==r&&(n=D("#total-sel-count"),i=parseInt(n.text()),F.totalSels=l<o?parseInt(i+s):parseInt(i-s),n.text(F.totalSels)),F.toggle_enabled_buttons(),I.endT(arguments)},com_data_loading:function(e,t,s){I.startT(arguments),e.find("."+t+"-row").append(D(F.templates.loaders[t]).removeAttr("id")),P.update_prog_indicator("plus",TvrLang.load_style_opt),I.endT(arguments)},com_data_finished_loading:function(e,t){I.startT(arguments),e.find("img.ajax-loader").remove(),P.update_prog_indicator("minus",t,TvrLang.load_style_opt),I.endT(arguments)},ajax_load_revisions_table:function(){I.startT(arguments),P.update_prog_indicator("plus",TvrLang.load_revisions_table,!1,!0),D.ajax({type:"GET",url:F.ajaxUrl,data:"mt_action=get_revisions",async:!0,timeout:F.tOut,error:function(e,t){I.startT(arguments),P.update_prog_indicator("minus",{short:TvrLang.load_revisions_table_failed,long:"<p>"+F.handle_ajax_error(e,t)+"</p>"},TvrLang.load_revisions_table),I.endT(arguments)},success:function(e){I.startT(arguments);var t=D(e).html();D("#revision-area").html(t),P.update_prog_indicator("minus",!1,TvrLang.load_revisions_table),I.endT(arguments)},complete:function(){I.startT(arguments)}}),I.endT(arguments)},update_wizard_html:function(e){I.action_after_timeout("wizard_html_expensive",3,{item:function(e){I.startT("update_wizard_html_inner");var t,s,r="";e.bindOnly||(v.dom,t=v.stat.html[0].outerHTML,v.maybe_refresh_front_N_index(!0),s="(?:(?:tvr-hover-element)?\\s?tvr-trigger-el(?: tvr-element-overlay)?)|(?:tvr-element-overlay)",s=new RegExp('\\s?class="(?:'+s+')?"|'+s,"g"),t=t.replace(s,""),s=F.custom_wizard_html_replace(),t=F.truncate_html_string(t,["noscript","script","style","path"],!1,s.pattern,s.repl),r=html_beautify(t,{html:{no_preserve_newlines:!0,max_preserve_newlines:0,indent_inner_html:!0,indent_handlebars:!0,indent_size:2,wrap_line_length:0,inline:[],extra_liners:[],unformatted:[],content_unformatted:[]}})),O.update_arbitrary_editor({context:"wizardHTML",editorID:"wizard_inspector_html",data:r,mode:"html",filterClass:"wizard_inspector_html",containerClass:".css-code-wrap",dontSetHeight:!0,readOnly:!0,fontSize:"13px",noValidation:!0,directContent:r,dontScrollHTML:e.dontScrollHTML,doNotFocusEditor:e.doNotFocusEditor,maintainCurrentLine:e.maintainCurrentLine,bindOnly:e.bindOnly}),I.endT("update_wizard_html_inner")},args:[e]})},custom_wizard_html_replace:function(){var e={pattern:!1,repl:""},t=p.get_active_builder();return t&&p.get(t).runIfExists("wizardHtmlReplace",[e]),e},truncate_html_string:function(e,t,s,r,a,o){I.startT(arguments);return e=e.replace(/(?=<!--)([\s\S]*?)-->/gm,""),t&&(e=e.replace(new RegExp(E.reg.html_tag({tag:t.join("|")}),"gm"),"<$1>(MT truncated)</$1>")),s&&(e=e.replace(new RegExp(E.reg.html_att({att:s.join("|")}),"gm"),'$1="(MT truncated)"')),r&&(e=e.replace(r,a=a||"")),I.endT(arguments),e},update_wizard_html_scroll:function(e){var t=O.getAceRowForTriggerElement(e);return O.go_to_line_in_editor(t,O.eds.wizard_inspector_html,e,!0)},get_breadcrumb_node:function(e,t){var s=F.breadcrumbNodesCache,r=e<0;return(r?s.descendentNodes:s.nodes)[r?-1*e-1:e].siblingsIncSelf[t]},breadcrumb_clicked:function(e,t){if((e=e.closest(".mt-breadcrumb")).hasClass("active-crumb"))return!1;var s=F.stat.breadcrumbs.find(".active-crumb"),r=e.hasClass("full-crumb-item"),a=!r,o=e.data(),n=parseInt(o.level),i=parseInt(o.eq),l=F.get_breadcrumb_node(n,i),o=l.$el;s.removeClass("active-crumb"),F.stat.breadcrumbs.find('.mt-breadcrumb[data-level="'+n+'"]').addClass("active-crumb");i=parseInt(s.data("level"));void 0===F.breadcrumbNodesCache.nestedElLevelAdjust&&(F.breadcrumbNodesCache.nestedElLevelAdjust=0),F.breadcrumbNodesCache.nestedElLevelAdjust+=n-i,F.dom_nav_option_used(o,{e:t,node:l,isNested:a,dontReloadBreadcrumbs:r,level:n,$clicked:e,$prevActiveCrumb:s})},update_breadcrumbs_nested_html:function(e,t,s,r){var a=s.level,o=0===a,n=s.family,i=v.dom.triggerElOffset,l=v.dom.triggerElDimensions,c=I.offsets_match(s.offset,i),d=I.dimensions_match(s.dim,l),_="mt-breadcrumb mt-bc-item mt-ui-element",u=s.pseudo[":nth-child(n)"],p=u-1,g='data-nth="'+u+'" data-total="'+s.totalSiblings+'"',f="",m="mt-bc-item",i=s.bcLabel,l=s.formattedBCLabel,u='<span class="bc-sep mt-ui-element"></span>';o&&(_+=" active-crumb",e.activeBreadcrumbLabel=i),(0<n.next.count||0<n.prev.count)&&(_+=" node-has-siblings"),c&&!o&&(f='<span class="mt-crumb-icon mt-ui-element '+(m+=d?" fully-nested-crumb "+I.iconClasses("square-regular"):" nested-crumb "+I.iconClasses("border-style"))+'"></span>'),e.breadcrumbs+='<span class="'+_+' full-crumb-item" data-level="'+a+'" data-eq="'+p+'" '+g+" >"+l+u+"</span>",(c||o)&&(l=o?l:"",!o&&v.get_matching_selectors(s.$el,F.get_all_selector_code(!0)).length&&(_+=" mt-hasValues mtif"),void 0!==F.breadcrumbNodesCache.nestedElLevelAdjust&&(a+=F.breadcrumbNodesCache.nestedElLevelAdjust),e.nestedTabs+='<span class="'+_+' nested-el-item" data-level="'+a+'" data-eq="'+p+'" title="'+I.escapeHTML(i)+'" '+g+" >"+f+l+u+"</span>")},update_breadcrumbs_and_nested_tabs:function(e){if(I.startT(arguments),!I.isDomEl(v.triggerEl))return v.stat.nestedEls.add(D("#dom-bread").find(".drag-content")).html(""),!1;if(e.dontReloadBreadcrumbs||(F.breadcrumbNodesCache={}),v&&v.dom.search.nodes){for(var t,s,r,a,o,n,i={breadcrumbs:"",nestedTabs:"",activeBreadcrumbLabel:""},l=v.dom.search.nodes.length-1,c=l;0<=c;c--)F.update_breadcrumbs_nested_html(i,c,v.dom.search.nodes[c],l);for(c=0;c<v.dom.search.descendentNodes.length;c++)F.update_breadcrumbs_nested_html(i,c,v.dom.search.descendentNodes[c],-1);v.stat.nestedEls.html(i.nestedTabs),e.dontReloadBreadcrumbs||(t=(n=D("#dom-bread")).find(".drag-containment"),a=n.find(".drag-content"),e.domArrowAdjustment,a.css("width","auto").html(i.breadcrumbs),s=n.width(),r=a.width(),n=o=0,a.width(a=r).css("left","0px"),s<r?(n="-"+(o=r-s)+"px",a=s+2*o,F.stat.breadcrumbs.draggable("enable"),t.addClass("mt-is-draggable")):(F.stat.breadcrumbs.draggable("disable"),t.removeClass("mt-is-draggable")),t.width(a),t.css({left:n}),F.breadcrumbNodesCache={nodes:v.dom.search.nodes,descendentNodes:v.dom.search.descendentNodes})}I.endT(arguments)},update_dom_arrows:function(e){I.startT(arguments);var t,s=F.stat.refineTarget;s.find("span").addClass("disabled"),v.dom.search.nodes&&v.dom.search.nodes.length&&((t=v.dom.search.nodes[0].family).par.count&&s.find("span.tvr-parent").removeClass("disabled"),t.prev.count&&s.find("span.tvr-prev-sibling").removeClass("disabled"),t.next.count&&s.find("span.tvr-next-sibling").removeClass("disabled"),t.child.count&&s.find("span.tvr-child").removeClass("disabled")),I.endT(arguments)},dom_arrow_clicked:function(e,t){var s,r=e.attr("class"),a=0<=r.indexOf("tvr-parent"),o=0<=r.indexOf("tvr-child"),e=F.stat.breadcrumbs.find(".active-crumb");a||o?(s=a?e.prev():e.next(),F.breadcrumb_clicked(s,t)):(a=e.data(),s=parseInt(a.eq),a=parseInt(a.level),0<=r.indexOf("tvr-prev-sibling")?--s:s+=1,(r=F.get_breadcrumb_node(a,s))&&F.dom_nav_option_used(r.$el,{e:t,node:r,level:a,eq:s,domArrowAdjustment:"sibling",$prevActiveCrumb:e}))},dom_nav_option_used:function(e,t){t=D.extend({scroll:!t.isNested,forceHighlight:1},t),v.select_element(D(e),t)},update_view_css:function(e,t,s,r,a){var o;I.startT(arguments),"loadNew"===s?(O.generated_css_auto_line_done={},F.server_scss&&r&&(o=r.find("#scss-line-error"),I.isDomEl(o)?(F.scss_error={line:o.data("line"),tabKey:o.data("tab")},F.stat.tvr.addClass("cur_scss_error")):(F.scss_error=!1,F.stat.tvr.removeClass("cur_scss_error"))),F.stat.view.find("div.dialog-tab-field").each(function(e){var t,s=D(this).find("div.view-file").find("a").first().attr("href");s?P.simple_ajax_request({url:s,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:F.update_view_css,cbfArgs:[e,"aceContent",!1,s]}):(F.stat.view.find(".dialog-tab-"+e),t=!!F.scss_error&&F.scss_error.fullString||F.previousSCSSCompile,F.update_view_css(t,e,"aceContent",!1,s))})):((!a||a.indexOf("micro-themes/min")<0)&&(e=O.beautify_css_or_scss(e)),O.update_arbitrary_editor({context:"viewCSS",editorID:"generated-css-"+t,data:e,filterClass:"generated-css",readOnly:!0,directContent:e,index:t})),I.endT(arguments)},update_inspector_stylesheet:function(e,t,s){I.startT(arguments),"loadNew"==s?P.simple_ajax_request({url:t.url,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:F.update_inspector_stylesheet,cbfArgs:[t]}):O.update_arbitrary_editor({context:"inspectorStylesheet",editorID:"inspect_stylesheet_preview",data:e,filterClass:"inspect_stylesheet_preview",readOnly:!0,directContent:e,containerClass:".content-main",find:t}),I.endT(arguments)},ui_reset:function(e){if(I.startT(arguments),!confirm(TvrLang.reset_settings_confirm))return!1;P.pending_auto_saves("clear");var t=F.ajaxUrl,s=TvrLang.reset_empty_folders;P.general_ajax_submission("reset",t,s,"GET","mt_action=tvr_ui_reset"),I.endT(arguments)},get_css_filter_alias_orig:function(e,t){I.startT(arguments);var s=D("#css-filters"),r=F.pseudo_class_format(e.closest("li").data("pref_sub_key")),r=(I.isDomEl(e.closest("#fav-filters"))?s.find("span.quick-opts-wrap"):D("#fav-filters")).find("li."+r);return I.endT(arguments),"favourite_filter"!=t?r:r.find(".star-icon")},get_css_filter_alias:function(e,t){var s=e.closest("li"),e="li."+F.pseudo_class_format(e.closest("li").data("pref_sub_key"));return F.otherFilters(e,s)},clear_css_filters:function(o){I.startT(arguments),F.stat.cssModifiers.find("li.css-filter-item").each(function(e){var t=D(this),s=t.data(),r=s.type,a=o&&"page_specific"===r;t.hasClass("on")&&!a&&((a=(t=F.get_css_filter_alias(a=t)).length?a.add(t):a).removeClass("on"),delete F.pref[r][s.pref_sub_key])}),F.stat.tvr.removeClass("pseudo_classes pseudo_elements"),I.endT(arguments)},force_styles_analysis:function(){F.tooMuchCSS=!1,F.forceStylesAnalysis=!0,E.update_stylesheet_rules()},site_pages_previous_result:[],site_pages_cache:{},site_pages_latest_term:null,get_item_from_previous_results:function(e,t){t=t||this.site_pages_previous_result;for(var s=0;s<t.length;s++){var r=t[s];if(e===r.value)return r}return!1},filter_code_suggestions:function(e,t){e=e?e.term.toLowerCase():null;t(F.filter_matching_results(e,TvrMT.data.prog.combo.all_sel_suggestions))},filter_matching_results:function(e,t){for(var s=[],r=0;r<t.length;r++){var a=t[r],o=a?a.value+a.label+a.category:"";e&&!o.match(new RegExp(I.escapeRegExp(e),"i"))||s.push(a)}return s},prepend_recent_paths:function(e,t){if(!v)return t;for(var s=[],r=TvrMT.data.prog.combo.custom_paths,a=v.get_current_page_title(),o=0,o=t.length-1;0<=o;o--)(n=t[o]).category===TvrLang.recent&&t.splice(o,1);for(o=0;o<r.length;o++){var n,i=(n=r[o])===Object(n),l=i?n.label:n,i=i?n.value:n;l===a&&(l+=" ("+TvrLang.current_page+")"),-1<i.indexOf("ct_template")||s.push({label:l||i,value:i,category:TvrLang.recent})}return s.concat(t)},clear_recent_page_path:function(e,t){t.preventDefault();for(var t=D("#previewPath"),s=e.closest("li").attr("data-path"),r=TvrMT.data.prog.combo.custom_paths,a=r.length-1;0<=a;a--){var o=r[a];s===(o===Object(o)?o.value:o)&&r.splice(a,1)}t.MTautocomplete("search",t.val()),P.simple_ajax_request({type:"POST",url:F.ajaxUrl+"&update_custom_paths=1",sendData:P.serialized_data_with_single_key(JSON.stringify(r)),plus:"",minus:""})},return_page_results:function(e,t,s,r){F.site_pages_previous_result=s,s=F.prepend_recent_paths(e,s),s=F.filter_matching_results(e,s),r&&(F.site_pages_cache[e]=s,9<(e=Object.keys(F.site_pages_cache)).length&&delete F.site_pages_cache[e[0]]),t(s)},get_site_pages:function(e,s){var r=F.stat.changeUrlInputWrap,t=D("#previewPath").val(),a=e&&e.term?e.term.toLowerCase():I.isDefined(t)?t:null;(F.site_pages_latest_term=a)?(F.site_pages_cache[a]?F.return_page_results(a,s,F.site_pages_cache[a]):F.return_page_results(a,s,F.site_pages_previous_result),r.addClass("active"),I.action_after_timeout("site_page_search",200,{item:function(e){P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&get_site_pages=1&search_term="+a,cbFunction:function(e,t){e=JSON.parse(e);F.return_page_results(F.site_pages_latest_term,s,e,!0),r.removeClass("active")},cbfArgs:[a]})},args:[{}]})):F.return_page_results(a,s,TvrMT.data.dyn.site_pages)},restore_rev:function(e){if(I.startT(arguments),!confirm(TvrLang.restore_settings_confirm))return!1;var t=F.ajaxUrl,s=TvrLang.restore_settings,r=e.attr("rel");P.general_ajax_submission("restore",t,s,"GET",r),I.endT(arguments)},toggle_revision_save_status:function(e){var t,s=e.add(e.closest("tr"));t=e.hasClass("revision-is-saved")?(s.removeClass("revision-is-saved"),0):(s.addClass("revision-is-saved"),1);P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&rev_save_status="+t+"&rev_id="+e.attr("rel")})},set_input_timer:function(e){e=e||F.inputTypingInterval,F.timer.typing&&clearTimeout(F.timer.typing),F.timer.typing=setTimeout(F.done_typing,e)},set_defer_save_timer:function(e,t){t="save"+t;F.timer[t]&&clearTimeout(F.timer[t]),F.timer[t]=setTimeout(P.action_save,F.beforeSaveInterval,e)},extract_inner_styles:function(e){var t=(e=(e=I.remove_only_last_char(e,"}")).split("{"))[1]||"";return t&&(e.shift(),t=e.join("{")),t.trim()},post_edit:function(e){I.startT(arguments),e.each(function(e){var t=D(this);F.update_input_width_and_scroll(t),F.adjust_comp_span(t,"after")}),I.endT(arguments)},adjust_event_fields:function(e){var t,s=I.convert_to_param(e.val(),""),r=e.closest(".field-wrap"),e=r.siblings(".event-target-field"),r=r.siblings(".event-value-field");I.hasValue(s)?(t=r,"css"!==E.event_type(s)?t=t.add(e):F.hide_property_fields(e),t.addClass("show-event-fields")):(t=r.add(e),F.hide_property_fields(t)),v.after_animation(t.first(),{type:"transition",cb:function(){F.adjust_scroll_buttons(F.get_pg_meta(),"style")}})},get_default_unit:function(e,t){return I.checkObject(F.pref,["my_props",e,"pg_props",t,"default_unit"],!0)},get_factory_default_unit:function(e,t){return e=e||I.prop_to_cssf(t),I.checkObject(TvrMT.data.prog.lh,[e,"fdu"],!0)},update_default_unit:function(e,t,s){I.updateObject(F.pref,["my_props",e,"pg_props",t,"default_unit"],s)},maybe_set_unit:function(e,t,s,r,a){if(!r)return!1;var o=void 0!==e.unit?e.unit:F.get_default_unit(t,s);if(I.isDefined(o)){r=r.trim().replace(/=(?:.+)(\(.*?\))/g,function(e){return e.replace(/ /g,"")});var n={val:r,converted:!1,calc:""};if(r.indexOf(" ")<0)n=F.do_conversion(r,o,s,0,a);else{var i,l,c=[],d=r.split(" ");for(i in d)d.hasOwnProperty(i)&&(l=F.do_conversion(d[i],o,s,i,a),c[i]=l.val,l.converted&&(n.converted=!0,n.calc+=0!=i?", "+l.calc:l.calc));n.val=c.join(" ")}return n}},do_conversion:function(e,t,s,r,a){var o={val:e,converted:!1,calc:""};return m.unitCouldBeAdded(e,t)?t&&(o.val=e+t,o.converted=!0):"="===e.charAt(0)&&(o=F.process_excel_function(e,s,r,a)),o},process_excel_function:function(e,t,s,r){var a={val:e,converted:!1,calc:""},o=e.split("(");if(!o[0]||!o[1]||o[1].indexOf(")")<0)return a;var n,i=o[0].replace("=",""),l=o[1].replace(")","").split(",");for(n in l)if(l.hasOwnProperty(n)&&(l[n]=l[n].trim(),!I.isDefined(l[n])))return a;o=F.nodeCSS[0];return o?(l[1]&&(o=F.nodeCSS[l[1]-1]),F.auto_convert(l[0],i,o,t,e,s,r)):(P.log({short:"Auto-conversion could not be calculated",long:"<p>The current selector may not target any elements on the current page.</p>",type:"warning"}),a)},auto_convert:function(e,t,s,r,a,o,n){I.startT(arguments);var i,l,c,d,_,u,p,g={val:a,converted:!1,calc:""},f=r,m=!1,v=TvrMT.data.prog.autoMap;if(v[f]&&v[f][t]){if(!D.isPlainObject(v[f][t])&&!v[f][t][0])return n&&(p={short:"Auto-conversion aborted",long:"<p>"+v[f][t]+"</p>",type:"warning"},P.log(p)),I.endT(arguments),g;i=v[f][t].node,l=v[f][t].prop,l=(l=Array.isArray(l)?l[o]:l).replace(/_/g,"-"),c=parseInt(s[i][l].replace("px","")),I.hasValue(v[f][t].tip)&&(m="<p>"+v[f][t].tip+"</p>")}return"%"===t?(d=e/c*100,_=e+"px / "+c+"px * 100 = "+parseFloat(d.toFixed(3).toString())+t,u=e+"px divided by "+c+"px ("+i+" "+l+") multiplied by 100 = <b>"+d+t+"</b>"):"em"!==t&&"rem"!==t||(l="font-size",d=e/(c="em"==t?(i="font_size"==f?"parent":"element",parseInt(s[i]["font-size"].replace("px",""))):(i="HTML base",F.baseFontSize)),_=e+"px / "+c+"px = "+parseFloat(d.toFixed(3).toString())+t,u=e+"px divided by "+c+"px ("+i+" "+l+") = <b>"+d+t+"</b>"),d&&(n&&(p={short:_,long:"<p>"+TvrLang.auto_conversion_performed+": <b>"+a+"</b><br />"+u+"<br />"+TvrLang.auto_values_rounded+"</p>",type:"info"},m&&(p.long+=m),P.log(p)),g={val:parseFloat(d.toFixed(3).toString())+t,converted:!0,calc:_}),I.endT(arguments),g},update_packs_obj:function(e){TvrMT.data.prog.combo.directories[TvrMT.data.prog.combo.directories.length]=e,TvrMT.data.prog.combo.directories.sort()},set_import_field:function(e){D("#import_from_pack_name").val(e)},handle_ajax_error:function(e,t){return 0==e.status?TvrLang.error_connection:404==e.status?TvrLang.error_404:500==e.status?TvrLang.error_500:"parsererror"==t?TvrLang.error_parser:"timeout"==t?TvrLang.error_timeout:TvrLang.error_unknown+"\n"},email_error_report:function(){I.startT(arguments),P.update_prog_indicator("plus",TvrLang.send_error);var e=F.ajaxUrl+"&mt_action=tvr_error_email",t=D("#error-report-form").serialize();D.ajax({type:"POST",url:e,data:t,timeout:F.tOut,error:function(e,t){P.update_prog_indicator("minus",{short:TvrLang.send_error_failed,long:"<p>"+F.handle_ajax_error(e,t)+"</p>"},TvrLang.send_error)},success:function(e){e=D(e).html();e=null==e?{short:"Email report failed",long:"<p>Reason unknown.</p>"}:P.extract_status(D(e)),P.update_prog_indicator("minus",e,TvrLang.send_error)}}),I.endT(arguments)},show_dialog:function(e){I.startT(arguments),F.close_dialog(!0);var r,a,t,s,o=(e=e.attr("rel")?e:e.closest("*[rel]")).attr("rel");if("not-yet"===o)return!1;D("#"+o+"-dialog").addClass("show"),F.stat.dialogs.addClass("show"),"import-from-pack"==o&&(I.hasValue(e.attr("data-pack-name"))&&D("#import_from_pack_name").val(e.attr("data-pack-name")),D("#preview-import-css-0").hasClass("ace_editor")||E.update_import_css_editor("")),"export-to-pack"==o&&(r="",D("#tvr-menu").find(".section-tag").each(function(){var e=F.get_meta(D(this),"section"),t="",s="";0<parseInt(e.sectionM.find(".selector-count-state").attr("rel"))&&(t='checked="checked"',s="on"),r+='<li><input type="checkbox" name="export_sections['+e.sectionSlug+']" '+t+' /> <span class="fake-checkbox '+s+' mtif mtif-tick-box-unchecked"></span><span class="folder-icon tvr-icon"></span><span class="ef-label">'+e.sectionH+"</span></li>"}),D("#available-folders").html(r),a=D("#custom-css"),F.stat.code.find("textarea.hand-css-textarea").each(function(e){var t=D(this),s=a.find(".custom-"+t.attr("id"));I.hasValue(t.val())?I.check_fake(s):I.uncheck_fake(s)}),D("#export_to_pack").val(1),D("#export_pack_name").val(""),D("#toggle-checked-folders").find("input").prop("checked",!1).end().find(".fake-checkbox").removeClass("on")),"display-css-code"==o&&(s=D("#scss-line-error"),I.isDomEl(s)?F.title(s):F.title(e.find(".mt-menu-text")),P.ajax_save_settings({context:"view-css",settings:{},noSaveDelay:!0})),"inspect-stylesheet"==o&&(s=(t=I.escapeRegExp(e.data("selector")))+"\\s*?{?",s={url:e.data("href"),media:e.data("media"),selector:t,findSelectorParts:!0,selectorPattern:s},F.update_inspector_stylesheet(!1,s,"loadNew")),"display-revisions"==o&&F.ajax_load_revisions_table(),"manage-design-packs"==o&&F.reload_iframe(e,"manage"),"google-fonts"==o&&(F.gFontTarget=e.closest(".field-wrap").find(".property-input"),F.reload_iframe(e,"google_fonts")),"program-docs"===o&&F.reload_iframe(e,"docs",D("#docs-url").attr("rel")),I.endT(arguments)},close_dialog:function(e,t){I.startT(arguments);var s=F.stat.tvr.find("div.tvr-dialog.show");e&&s.length?F.stat.dialogs.addClass("dialog-already-showing"):F.stat.dialogs.removeClass("dialog-already-showing"),F.stat.dialogs.removeClass("show"),s.removeClass("show"),D("#export_to_pack, #new_pack").val(0),I.endT(arguments)},reload_docs_iframe:function(e){I.startT(arguments);var t="docs_iframe",s=D("#docs-url").attr("rel");I.hasValue(e.attr("data-docs-index"))&&(s+="&docs_index=1"),I.hasValue(e.attr("data-prop-group"))&&(s+="&prop_group="+e.attr("data-prop-group")),I.hasValue(e.attr("data-prop"))&&(s+="&prop="+e.attr("data-prop"));D("#"+t);window.frames[t].location=s,I.endT(arguments)},reload_iframe:function(e,t,s,r){var a=t+"_iframe",o=D("#"+a);s=s||o.attr("rel"),"docs"===t&&(I.hasValue(e.attr("data-docs-index"))&&(s+="&docs_index=1"),I.hasValue(e.attr("data-prop-group"))&&(s+="&prop_group="+e.attr("data-prop-group")),I.hasValue(e.attr("data-prop"))&&(s+="&prop="+e.attr("data-prop"))),!r&&"manage"!==t&&"1"===o.attr("data-frame-loaded")||(o.attr("data-frame-loaded",0),window.frames[a].location=s,o.on("load",function(){o.attr("data-frame-loaded",1)}))},toggle_help_info:function(e){e.next().slideToggle("fast",function(){})},toggle_multi_checkboxes:function(e){I.startT(arguments);var t=D("#available-folders, #custom-css");e.hasClass("on")?t.find("input").prop("checked",!1).end().find(".fake-checkbox").add(e).removeClass("on"):t.find("input").prop("checked",!0).end().find(".fake-checkbox").add(e).addClass("on"),I.endT(arguments)},get_dyn_meta:function(e){I.startT(arguments);var t=e.closest(".dyn-wrap");F.dyn_meta={wrap:t,slug:t.data("slug"),add_input:t.find(".new-item-input"),add_button:t.find(".new-item-add"),menu:t.find(".tvr-dyn-menu")};t=e.closest("li.dyn-item");return I.isDomEl(t)&&(F.dyn_meta.item=t),I.endT(arguments),F.dyn_meta},dyn_add_item:function(e){I.startT(arguments);var t=F.get_dyn_meta(e),s=t.add_input.val(),r=t.wrap.data("base-key");if(r)var a={newName:r+=t.menu.find("li.dyn-item").length+1,newNameHuman:s};else if(!(a=I.new_name_checks(s,TvrLang.item)))return!1;a=F.dom_replacements(!1,"dyn_item",D(F.templates[t.slug+"_menu_item"]),"item",a.newName,a.newNameHuman);t.menu.append(a).find("li").filter(":last").hide().fadeIn("fast",function(){t.add_input.val(""),"mqs"==t.slug&&F.toggle_edit_item(D(this).find(".edit-item"))}),I.endT(arguments)},toggle_edit_item:function(e){I.startT(arguments);var t=F.get_dyn_meta(e).item.find(".edit-item-form");t.hasClass("show")?t.removeClass("show"):t.addClass("show"),I.endT(arguments)},delete_item:function(e){I.startT(arguments),e.closest("li").fadeOut("slow",function(){D(this).remove()}),I.endT(arguments)},reveal_form_opts:function(e){I.startT(arguments);var t=e.attr("rel"),t=e.closest("li").siblings(".hidden."+t);t.hasClass("show")?t.removeClass("show"):t.addClass("show"),I.endT(arguments)},toggle_system_menu_options:function(e){I.startT(arguments);var t=(e=e.closest("li")).find(".tvr-input-wrap"),s=e.find(".mt-menu-text"),r=e.closest("ul");t.hasClass("show")?(s.text(s.data("ll")),r.removeClass("expanded"),t.removeClass("show")):(s.text(s.data("sl")),r.addClass("expanded"),t.addClass("show")),I.endT(arguments)},change_preview_url:function(e,t,s){I.startT(arguments);var r=e.closest("li"),a=parseInt(F.pref.mt_nonlog),o=r.find("input.combobox").val(),n=!!o&&I.extract_url_path(o),o=n?I.rtrim(F.homeUrl,"/")+n:"";(o=!o&&v?v.get_current_url():o)&&o.indexOf(F.adminUrl)<0&&P.update_prog_indicator("plus",TvrLang.load_wp);n=!a&&r.find('input[name="launch_builder"]').is(":checked");n&&((r=t?t.item:F.get_item_from_previous_results(I.extract_url_path(o))||{}).url=o,n=p.launchBuilderOnNewPage(r)),n||(o=a?(o=I.strip_page_builder_and_other_params(o),o=I.append_url_param(o,"mt_nonlog"),I.append_url_param(o,"_wpnonce",TvrMT.data.dyn.ui_config.mt_nonlog_nonce)):I.strip_url_param(o,"mt_nonlog"),p.maybeReleaseBuilderEditLockBeforeExit(o)),I.endT(arguments)},toggle_program_menu:function(e){F.stat.settingsMenu.hasClass("expanded")?F.hide_folders_or_settings("settings","right"):F.show_folders_or_settings("settings","right")},after_style_options_deleted:function(e){F.totalSels<1&&q.toolbar_adjusted()},menuOrder:{},refresh_sortable:function(){I.startT(arguments);for(var t=document.getElementById("tvr-menu"),e=t.getElementsByClassName("selector-sub"),s={animation:150,forceFallback:!0,onStart:function(e){F.clean_tooltips();e=D(e.item);I.currentlySorting=e.hasClass("section-tag")?"section":"selector",D(t).addClass("sorting-in-progress"),F.get_dom_order({},e,{prevSec:"",newSec:"",orig_order:["this"],new_order:["this"],map:[]},!1),F.itemIsBeingDragged=!0},onEnd:function(e){I.currentlySorting=!1,D(t).removeClass("sorting-in-progress"),F.get_dom_order({},D(e.item),F.menuOrder,!0),F.itemIsBeingDragged=!1}},r=D.extend(!0,{},s,{group:"folders",handle:".folder-icon",onUpdate:function(e){var t=F.get_meta(D(e.item),"section"),e=t.sectionM.prev().attr("id");I.hasValue(e)?t.section.detach().insertAfter("#"+e.replace("strk","opts")):t.section.detach().prependTo("#tvr-options"),I.hasValue(F.selInFocusID)&&F.update_prev_next_sel_buttons(F.selInFocusID)}}),a=D.extend(!0,{},s,{group:"selectors",handle:".selector-sortable-icon",onMove:function(e,t){if(-1<e.related.className.indexOf("strk-sec"))return!1},onUpdate:function(e){F.mirror_move_and_log({},e)},onAdd:function(e){F.selector_received({},e)}}),o=(new Sortable(t,r),[]),n=0;n<e.length;n++)o[n]=new Sortable(e[n],a);I.endT(arguments)},get_dom_order:function(e,t,s,r,a,o){var n,i=t.closest("ul"),l=t.hasClass("section-tag")?"section":"selector",c="section"==l?["root"]:["section"],d=F.get_meta(t,l);return"selector"==l?(n=i.closest(".section-tag"),r?s.newSec=n.attr("id").replace("strk-",""):s.prevSec=d.sectionSlug,s.moved_item=d.selectorSlug):s.moved_item=d.sectionSlug,a&&!r?(t="section"==l?F.uiData:F.uiData[d.sectionSlug],s.orig_order=Object.keys(t)):i.find("> li").not(".sortable-ghost").each(function(e){var t=D(this),t=F.get_meta(t,l)[l+"Slug"];(r?s.new_order:s.orig_order).push(t)}),r&&(s.syncRenameConfig&&(e=T.modify_main_js_object("rename",e,F.menuOrder.syncRenameConfig),s.syncRenameConfig=!1),e.moveUpdate=[],e.orderUpdate=[],e=T.modify_main_js_object("reorder",e,{callbackDepth:c,maxDepth:c[0],targetSection:d.sectionSlug,targetSelector:d.selectorSlug,menuOrder:s}),e="selector"==l?(n=F.get_meta(n,"section"),e=F.js_check_values(e,n),e=T.modify_main_js_object("update_section_css",e,{M:n,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),s.prevSec!==s.newSec&&(I.checkObject(F.uiData,[s.prevSec,"this","disabled"])!==I.checkObject(F.uiData,[s.newSec,"this","disabled"])&&(e=T.modify_main_js_object("group_to_css",e,{M:d,maxDepth:"group",recurse_key:["m_query"]})),n=F.get_meta(D("#strk-"+s.prevSec),"section"),e=F.js_check_values(e,n),e=T.modify_main_js_object("update_section_css",e,{M:n,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]})),P.user_action(e,{items:["selector"],val:F.title(d.selectorM.find("span.selector-sortable-icon")),M:d,pathTT:!0,icon:"mtif-arrowsx4"})):(v.edit_style_nodes(d,"reorder"),P.user_action(e,{items:["section"],val:F.title(d.sectionM.find("span.folder-icon")),M:d,icon:"mtif-arrowsx4"})),a||P.ajax_save_settings({settings:e})),F.menuOrder=s,e},mirror_move_and_log:function(e,t,s){I.startT(arguments),I.hasValue(F.selInFocusID)&&F.tvr_iterate_selectors_v(!1,F.selInFocusID,{doNotBringStylesTop:1}),I.endT(arguments)},selector_received:function(e,t){I.startT(arguments);var s=D(t.item),r=F.get_meta(s,"selector"),a=F.is_cur("selector",r.selectorID);F.oM=r;var o=F.get_meta(s.closest(".section-tag"),"section");F.update_count(r.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),F.update_count(o.sectionM.find(".selector-count-state"),"add",1,"selector","");var n=I.resolve_unique_name(r.selectorH,o.sectionM,".selector-name","Moved",r.selectorMID),s=I.convert_to_param(n);return F.dom_replacements(r,"selector",r.selector.add(r.selectorM),r.sectionSlug,o.sectionSlug,o.sectionH,r.selectorSlug,s,n,r.selectorCode),s!==r.selectorSlug&&(F.menuOrder.syncRenameConfig={rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:r.sectionSlug,targetSelector:r.selectorSlug,new_key:s,new_label:n,new_code:r.selectorCode}),o=F.get_meta(r.selectorM,"selector"),a&&(F.update_global_vars(o),r.selector.detach().prependTo(o.section.find("ul.selector-sub"))),F.sortableLoading=!1,F.mirror_move_and_log(e,t),I.endT(arguments),o},search_filter:!1,colorCodeSearchDec:!0,search_folders:function(e,t){function s(e){parseInt(F.pref.expand_all_folders)&&(D("#toggle-all-folders").removeClass("on"),F.pref.expand_all_folders=0),e=e.trim();var t=I.escapeRegExp(e),s=".*("+t+").*\\n";I.isDefined(e)?(F.stat.mainMenu.addClass("user-searching"),t={searchText:e,searchRegex:new RegExp(t,"i"),wholeLineRegex:new RegExp(s,"i"),searchMatches:{}},s=T.run_global_scans(D.extend(!0,{},t),["search_folders"]),t.searchMatches=s.searchMatches,F.search_filter=t,F.open_close_all_folders("close"),F.open_close_all_folders("open",!0)):F.clear_folder_search()}t?I.action_after_timeout("search_folders",F.inputTypingInterval,{item:s,args:[e]}):s(e)},clear_folder_search:function(){F.search_filter=!1,F.stat.searchFoldersInput.val(""),F.stat.mainMenu.removeClass("user-searching"),F.open_close_all_folders("close")},flag_search_matches:function(e,t,s){var r=F.colorCodeSearchDec,a=e.settings.searchText,o=e.settings.searchRegex,n=e.settings.searchMatches,t=e.selector,i=F.uiData[e.section_key],l=i[e.selector_key],c=I.checkObject(i,["this","label"]),d=l.label.split("|"),_=d[0]||"",u=d[1]||"",i=F.get_tab_name(s),l="all-devices"!==s,d=F.scss_enabled?t.raw_scss||"":t.compiled_css||"",c=d+c+_+i,_=""===d||d.match(new RegExp("^\\s*"+I.escapeRegExp(u)+"\\s*{\\s*}\\s*$"));if(c.match(o)){var c="",p=[];if(l&&_||!u.match(o)||p.push({pg:"code",property:"css",label:r?'<span class="mt-search-code">'+I.embolden_matched_text(u,a)+"</span>":u}),t.styles)for(var g=Object.keys(t.styles),f=0;f<g.length;f++){var m,v,h,b,y=g[f],w=t.styles[y];for(m in w)w.hasOwnProperty(m)&&"css"!==m&&(h=I.checkObject(w,[m,"value"])||"",b=I.checkObject(w,[m,"unit"])||"",h=(v=I.prop_to_cssf(m))+": "+(h=Array.isArray(h)?h.join(" "):h)+(b=!I.isNumeric(h)?"":b),b=I.embolden_matched_text(h,a),r&&(b=F.color_code_property_value(b)),h.match(o)&&p.push({pg:y,property:m,cssf:v,label:b,declaration:h}))}var T="",u=p.length;if(u||(d=d.match(e.settings.wholeLineRegex))&&(d=d[0].trim(),parseInt(F.pref.css_important)&&(d=d.replace(" !important;","")),p.push({pg:"code",property:"css",label:F.color_code_property_value(I.embolden_matched_text(d,a))}),u=1),u||!_&&i.match(o)){for(f=0;f<p.length;f++){var x=p[f];T+='<div class="mt-search-entry" data-pg="'+x.pg+'" data-property="'+x.property+'" data-mq_key="'+s+'">'+x.label+"</div>"}c+='<div class="mt-search-mq mt-search-entry" data-pg="code" data-property="css" data-mq_key="'+s+'">'+I.embolden_matched_text(i,a)+"</div>"+T}!u&&"all-devices"!==s&&_||I.updateObject(n,[e.section_key,e.selector_key,s],{data:p,html:c})}},color_code_property_value:function(e){e=e.split(":");return e[0]='<span class="mt-search-property">'+e[0]+"</span>",e[1]='<span class="mt-search-value">'+e[1]+"</span>",e.join(":")},maybe_apply_search_results_to_item:function(e,t,s){if(F.search_filter){var r=I.checkObject(F.search_filter,["searchMatches",e.section_key,e.selector_key]);if(r){for(var a=Object.keys(TvrMQsCombined),o="",n=0;n<a.length;n++){var i=a[n],i=I.checkObject(r,[i,"html"]);i&&(o+=i)}t.find("> .item-row").append('<div class="search-results-area">'+o+"</div>"),F.maybe_change_item_name_highlight(t,s)}else t.addClass("search-excluded")}},maybe_change_item_name_highlight:function(e,t,s){e=e.find(".name-text").first();s?e.html(t):F.search_filter&&t.match(F.search_filter.searchRegex)&&e.html(I.embolden_matched_text(t,F.search_filter.searchText))},search_entry_clicked:function(e){var t=F.get_meta(e,"selector"),s=e.data(),r=s.mq_key,e=s.pg,s=s.property;F.is_cur("selector",t.selectorID)||F.tvr_iterate_selectors_v(t.selectorM),t.tabSlug!==r&&F.mq_tab_pressed(F.stat.res.find(".mq-tab-"+r)),O.go_to_ui_property(e,s)},open_close_all_folders:function(r,a,o){F.stat.mainMenu.find(".folder-icon").each(function(){var e=D(this),t=F.get_meta(e,"section"),s=e.hasClass("on");a?!F.search_filter||F.search_filter.searchMatches[t.sectionSlug]||t.sectionH.match(F.search_filter.searchRegex)?(t.sectionM.removeClass("search-excluded"),F.maybe_change_item_name_highlight(t.sectionM,t.sectionH)):t.sectionM.addClass("search-excluded"):F.maybe_change_item_name_highlight(t.sectionM,t.sectionH,!0),(s&&"close"===r||!s&&"open"===r)&&t.sectionSlug!==o&&F.toggle_folder(e)})},maybe_show_current_folder_item_view:function(){var e,t;F.selInFocusID&&!F.search_filter&&((e=(t=F.get_selector_in_focus()).sectionM.find("> .sec-row .folder-icon")).hasClass("on")||(F.toggle_folder(e),t=F.get_selector_in_focus()),e=F.folders_scrollable_area(),t=I.getElPosRelToContainer(t.sectionM,e),I.scroll_to({scrollDiv:e,offset:t}))},toggle_folder:function(e,t){I.startT(arguments);var s=F.get_meta(e,"section");s.sectionM.find("> .sec-row .folder-icon").hasClass("on")?F.close_folder(s,t):F.open_folder(s,t),I.endT(arguments)},open_folder:function(e,t){t||this.load_folder_menu_selectors(e),e.sectionM.addClass("is-open").find("> .sec-row .folder-icon").addClass("on"),e.sectionM.find("> ul.selector-sub").addClass("show")},close_folder:function(e){this.unload_folder_menu_selectors(e),e.sectionM.removeClass("is-open").find("> .sec-row .folder-icon").removeClass("on"),e.sectionM.find("> ul.selector-sub").removeClass("show")},load_folder_menu_selectors:function(e){var t=e.sectionM.find(".selector-sub"),s=F.load_selector(e,{items:["selectorM"]});return t.html(""),t.append(s),F.js_check_values({},F.get_meta(e.sectionM,"section")),s},unload_folder_menu_selectors:function(e){e=e.sectionM.find(".selector-sub").children("li");(e=F.menuSelInFocusID?e.not("#"+F.menuSelInFocusID):e).remove()},unload_all_option_selectors:function(){I.startT(arguments),F.stat.opts.find("ul.selector-sub").find("> li:not(#"+F.selInFocusID+")").remove(),I.endT(arguments)},update_editor_refs:function(e,t,s,r,a,o){return I.startT(arguments),!1},dom_replacements:function(e,t,s,r,a,o,n,i,l,c,d){var _,u,p;return I.startT(arguments),"section"==t&&(s.find("input, textarea.property-input").each(function(e){var t=D(this);I.hasValue(t.attr("name"))&&t.attr("name",t.attr("name").replace("tvr_mcth["+r+"]","tvr_mcth["+a+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+a+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+a+"]"))}),s.find(".section-name .name-text").text(o),s.find(".section-display-name").val(o),s.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(s).each(function(){var e=D(this);e.attr("id",e.attr("id").replace(r,a))})),"selector"==t&&(s.find(".selector-name").attr("title",I.regular_escape_quotes(c)),s.find(".selector-name .name-text").text(l),s.find(".selector-label").val(l+"|"+c)),"group"==t&&(s.removeAttr("id"),s.attr("class",s.attr("class").replace("property-fields-all-devices","property-fields-"+d)),"all-devices"!=d&&s.find("input.property-input, textarea.property-input, input.disabled-tracker, input.chained-tracker, input.post-sel-css, input.post-sel-data").each(function(e){var t=D(this);t.attr("name",t.attr("name").replace("tvr_mcth","tvr_mcth[non_section][m_query]["+d+"]"))}).end().find("div.property-tag, div.subgroup-tag, pre.custom-css-pre").each(function(){var e=D(this);e.attr("id",e.attr("id").replace("-all-devices","-"+d))})),"selector"!==t&&"group"!==t||(s.find("input, textarea.property-input").each(function(e){var t=D(this);I.hasValue(t.attr("name"))&&t.attr("name",t.attr("name").replace("tvr_mcth["+r+"]["+n+"]","tvr_mcth["+a+"]["+i+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+a+"]["+i+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+a+"]["+i+"]"))}),s.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(s).each(function(){try{var e=D(this);e.attr("id",e.attr("id").replace(r+"-"+n,a+"-"+i))}catch(e){}})),"dyn_item"==t&&(_=r,u=a,p=o,s.attr("id",s.attr("id").replace(_,u)),s.find("input, textarea").each(function(){var e=D(this);e.attr("name",e.attr("name").replace("["+_+"]","["+u+"]"))}),s.find(".script-display_name, .mquery-label").val(p),s.find(".name-text").text(p)),I.endT(arguments),s},add_section:function(e,t){I.startT(arguments);e=e||TvrLang.untitled_folder,e=I.resolve_unique_name(e,D("#tvr-menu"),".section-name");var s=F.dom_replacements(!1,"section",D(F.templates.sectionM).add(F.templates.section),"selector_section",I.convert_to_param(e),e);D("#tvr-options").append(s[1]);var r=D("#tvr-menu");r.append(s[0]);s=r.find("li.section-tag").filter(":last"),r=F.get_meta(s,"section");s.hide().fadeIn("fast",function(){var e=D("#section-count-state");F.update_count(e,"add",1,"section")});s=E.dom_to_data({M:r,domDepth:"section",return:"mtData"});return t&&F.draftFolders.push(r.sectionSlug),F.refresh_sortable(),I.scroll_to({scrollDiv:F.folders_scrollable_area(),bottom:!0}),s=P.user_action(s,{items:[e],val:e,icon:"mtif-add"}),F.close_context_menu({filter:".cm-add-folder-options"}),t||P.ajax_save_settings({settings:s}),I.endT(arguments),e},folders_scrollable_area:function(){return F.stat.mainMenu.children(".menu-scrollable")},action_rename_section:function(e){I.startT(arguments);var t,s=F.get_meta_for_context(e,"section","folder-popup"),r=e.closest(".edit-section-form").find(".edit-section-label-input").val();if(I.convert_to_param(r)==s.sectionSlug)(t=[]).newName=s.sectionSlug,t.newNameHuman=r;else if(!(t=I.new_name_checks(r,"folder")))return!1;F.rename_section_updates(s,t,e),I.endT(arguments)},rename_section_updates:function(e,t,s,r){var a=e.sectionM.find("input.section-display-name").val(),o=t.newName,n=t.newNameHuman,i=e.sectionSlug,l=e.sectionM.add(e.section);v&&(l=l.add(D(v.get_style_nodes(e))));t=F.is_cur("section",i);if(F.dom_replacements(e,"section",l,i,o,n),e=F.get_meta(D("#strk-"+o),"section"),t&&F.update_global_vars(F.get_meta(e.section.find("li.in-focus"),"selector")),r)return!1;F.close_context_menu({filter:".cm-edit-folder-options"});i=T.modify_main_js_object("rename",{},{rebuild:!0,callbackDepth:["section"],maxDepth:"section",targetDepth:"section",targetSection:i,new_key:o,new_label:n}),o="";a!=n&&(o+=TvrLang.previous_name+": "+a+"\n",o+=TvrLang.new_name+": "+n),i=P.user_action(i,{items:["section"],val:F.title(s),M:e,valTT:o,icon:[{icon:F.hi.section},{icon:"edit-icon tvr-icon"}]}),P.ajax_save_settings({settings:i})},copy_section:function(e){I.startT(arguments);var t=F.get_meta_for_context(e,"section");F.maybe_save_draft_selector_before_copying(t,"section"),P.log_action(t.sectionM,"copy");var s=t.sectionSlug,r=t.sectionH,a=I.resolve_unique_name(t.sectionH,D("#tvr-menu"),".section-name","Copy"),o=I.convert_to_param(a),n=!1,i=[t.sectionM[0],t.section[0]];v&&(n=v.get_style_nodes(t),i=i.concat(n));i=F.dom_replacements(t,"section",F.proper_clone(D(i)),s,o,a),i=F.reset_copied_active_classes(i);t.sectionM.after(i[0]),t.section.after(i[1]),v&&v.insertCopiedStyleNodes(n,i);s=T.modify_main_js_object("copy",{},{M:t,targetDepth:"section",maxDepth:"section",origSlug:s,origHuman:r,newSlug:o,newHuman:a}),s=T.reorder_after_copy(s,t.sectionM,!0),r=D("#section-count-state"),o=t.sectionM.find("span.selector-count-state").attr("rel");F.update_count(r,"add",1,"section",o),P.unlog_action(t.sectionM,"copy"),I.hasValue(F.selInFocusID)&&F.update_prev_next_sel_buttons(F.selInFocusID),F.refresh_sortable(),s=P.user_action(s,{items:["section"],val:F.title(e),M:t,valTT:a,icon:e.attr("class")}),P.ajax_save_settings({settings:s}),I.endT(arguments)},delete_section:function(e,t){I.startT(arguments);var s=F.get_meta_for_context(e,"section");if(P.action_in_prog(s.sectionM,"delete")||P.action_in_prog(s.sectionM,"all-sels-loading"))return!1;if(1<I.obj_length(F.uiData[s.sectionSlug])&&!confirm(tvrsprintf(TvrLang.delete_folder_confirm,s.sectionH)))return!1;P.log_action(s.sectionM,"delete"),s.sectionM.fadeOut("fast",function(){F.action_delete_section(s,t,e)}),I.endT(arguments)},action_delete_section:function(e,t,s){var r=e.sectionM.find("span.selector-count-state").attr("rel");F.update_count(D("#section-count-state"),"subtract",1,"section",r);var a,o=I.hasValue(F.selInFocusID)&&F.is_cur("section",e.sectionSlug);o&&(a=(a=F.itemScan("selector","next","getID",e.sectionSlug))||F.itemScan("selector","prev","getID",e.sectionSlug)),e.section.remove(),e.sectionM.remove(),v&&v.edit_style_nodes(e,"delete");r=T.modify_main_js_object("delete",{},{rebuild:!0,maxDepth:"section",targetDepth:"section",targetSection:e.sectionSlug});F.after_style_options_deleted("section"),F.close_context_menu({filter:".cm-edit-folder-options"}),o&&!t&&a&&F.tvr_iterate_selectors_v(!1,a,{doNotBringStylesTop:1}),a||F.update_prev_next_sel_buttons(!1),t||(r=P.user_action(r,{items:["section"],val:F.title(s),M:e,icon:s.attr("class")}),P.ajax_save_settings({settings:r}))},toggle_folder_add_options:function(e){F.toggle_context_menu({$clicked:e,filter:".cm-add-folder-options",relatedto:"folders",after_open:function(e){e.$content.find("input.add-section-label-input").focus()},after_close:function(e){e.$content.find("input.add-section-label-input").val("")}})},toggle_folder_more_options:function(e){var t=e.data("level"),s=e.parent().hasClass("current-item-actions"),r=s?F.get_selector_in_focus():F.get_meta(e,t);r[t+"M"];"section"===t?F.toggle_context_menu({M:r,$clicked:e,filter:".cm-edit-folder-options",relatedto:"folders",isCurrentItem:s,before_open:function(e){F.cancel_draft_selector_edit(),e.$content.find("input.edit-section-label-input").val(r.sectionH),F.ensure_correct_disabled_state(r,t,e)},after_close:function(e){e.$content.find("input.selector-css-textarea, input.selector-name-input").val("")}}):F.toggle_context_menu({M:r,$clicked:e,filter:".cm-selector-options",relatedto:"folders",before_open:function(e){e.$content.find("input.selector-name-input").val(r.selectorH),e.$content.find("input.selector-css-textarea").val(r.selectorCode),F.ensure_correct_disabled_state(r,t,e),F.generate_selector_variations(e)}}),I.clearSelection(F.stat.win,F.stat.doc)},ensure_correct_disabled_state:function(e,t,s){var r=s.$content.find(".manage-"+t+"-icons").find(".disabled-toggle"),s=r.prev(".disabled-tracker"),t=F.is_dis(e[t+"M"]);r.removeClass("active"),I.isDomEl(s)&&s.remove(),t&&F.input_icon_toggle(r,!1,!0)},toggle_editor_options:function(e){F.toggle_context_menu({$clicked:e,filter:".cm-editor-options"})},toggle_responsive_tab_options:function(o){F.toggle_context_menu({$clicked:o,filter:".cm-responsive-tab-options",before_open:function(e){var t=o.closest(".mt-tab"),s=t.attr("rel"),r=TvrMQsCombined[s];e.$content.find(".edit-responsive-tab-label-input").val(r.label),e.$content.find(".edit-responsive-tab-query-input").val(r.query),"all-devices"===s?e.$content.addClass("all-devices-tab-actions"):e.$content.removeClass("all-devices-tab-actions");var a=e.$content.find(".disabled-toggle");t.hasClass("item-disabled")?a.addClass("active"):a.removeClass("active"),e.mq_key=s,e.Tab=r,e.M=F.get_selector_in_focus()}})},update_single_responsive_tab:function(e){var t=F.context_menu_data,s=t.$content.find(".edit-responsive-tab-label-input").val(),r=t.$content.find(".edit-responsive-tab-query-input").val(),t=D("#mqs-"+t.mq_key);t.find(".mquery-label").val(s),t.find(".mquery-query").val(r),P.save_media_queries()},selector_checks_values:function(e,t,s){I.startT(arguments);var r,a=F.strip_beyoned_brace(e,"name");if(""==a)return alert(TvrLang.enter_selector_name),!1;if(I.isNumeric(a))return alert("Plain numbers are not permitted as names. Please use some letters too."),!1;if(I.convert_to_param(a)==s)(r=[]).newName=s,r.newNameHuman=a;else if(!(r=I.new_name_checks(a,"selector")))return!1;return t?(r.code=t,I.endT(arguments),r):(alert(TvrLang.enter_css),!1)},show_hide_sel_custom:function(e,t){I.startT(arguments),F.analyse_sel_code(e).custom_styles?t.addClass("custom-styles"):t.removeClass("custom-styles"),I.endT(arguments)},analyse_sel_code:function(e){I.startT(arguments);var t,s=[];return 0<=e.indexOf("{")?(s.custom_styles=!0,t=e.split("{"),s.code=t[0]):(s.custom_styles=!1,s.code=e),I.endT(arguments),s},add_selector:function(e,t,s,r){I.startT(arguments),r=r||{},e=e||F.get_meta_for_context(t,"section","folder-popup");var a=t.closest(".mt-folder-form");if(!F.allowed_action(e,"Add Sel"))return!1;var o=F.selector_checks_values(a.find(".selector-name-input").val(),F.strip_beyoned_brace(a.find(".selector-css-textarea").val()),!1);if(!o)return!1;e.sectionM.hasClass("is-open")||F.open_folder(e);var n=o.newName,i=F.dom_replacements(e,"selector",D(F.templates.selectorM).add(F.templates.selector),"selector_section",e.sectionSlug,e.sectionM.find(".name-text").text(),"selector_css",n,o.newNameHuman,o.code),l=D(i[1]),a=F.pref.pg_focus;T.maybe_add_group_template(l,e.sectionSlug,o.newName,o.newNameHuman,o.code,e.tabSlug,a),q.editor_and_gui()&&"code"!==a&&T.maybe_add_group_template(l,e.sectionSlug,o.newName,o.newNameHuman,o.code,e.tabSlug,"code"),e.sectionM.find(".selector-sub").append(i[0]),e.section.find(".selector-sub").append(l),F.update_count(e.sectionM.find(".selector-count-state"),"add",1,"selector",""),e=F.get_meta(e.section.find(".selector-tag").last(),"selector");l=E.dom_to_data({M:e,domDepth:"selector",keepAsDraft:s,clean:{selector:[["styles"],[a]]},cleanMaxDepth:"selector",skipSassCompile:!0}),a=l;return s&&(F.draftSelector.atts=F.selector_key_atts(e),T.updateObjectAndSavePackage(l.savePackage,[{action:"append",trail:[e.sectionSlug,n],key:"isDraft",data:1}]),a=F.draft_user_action.new),l=T.run_global_scans(l,["update_indexes"]),T.updateObjectAndSavePackage(l.savePackage,[{action:"append",trail:[e.sectionSlug,n],key:"jsu",data:F.jsuVersion}]),r.action="add_draft_selector",r.elementAlreadySelected=1,F.tvr_iterate_selectors_v(e.selectorM,!1,r),F.refresh_sortable(),F.close_context_menu({filter:".cm-edit-folder-options"}),P.user_action(a,{items:["selector"],val:F.title(t),M:e,pathTT:!0,icon:"mtif-add"}),s||P.ajax_save_settings({settings:l}),I.endT(arguments),!0},load_selector:function(e,t){I.startT(arguments);var s=[];if(t.items){var r=!1,a=t.pg_focus||F.pref.pg_focus,o=q.editor_and_gui()&&"code"!==a;if(t.replaceExisting){var n=this.get_code_meta(e);if(I.isDomEl(n.$property_fields)){if("code"===a)return e.selector.find(".group-tag").not(n.$group).remove(),e.selector;r=n.$property_fields.detach()}}for(var i=0;i<t.items.length;i++){var l,c,d,_=t.items[i],u="selectorM"===_?"selector":"property",p="#"+("selectorM"===_?"strk":"opts")+"-"+e.sectionSlug,g=p+"-"+e.selectorSlug,f=D(g);f.length&&!t.replaceExisting||(e.groupSlug=a,c={M:e,load:"selector",templateKey:_,maxDepth:u,callbackDepth:["selector","group","property"]},l=t.mq_key||F.get_mq_focus(),"selector"===_?("all-devices"===l?c.recurse_key=["important"]:c.onlyRecurse=!0,c.mq_key=l):"selectorM"===_&&(c.incRecurse=!1),"selectorM"===_?f=E.data_to_template(e,c):"selector"===_&&(F.stat.styleComponents.html(""),(u=(g=(f=T.get_selector_data(e,l).data?E.data_to_template(e,c):F.dom_replacements(!1,"selector",D(F.templates.selector),"selector_section",e.sectionSlug,!1,"selector_css",e.selectorSlug,e.selectorH,e.selectorCode)).find(".group-tag-"+a)).find("div.property-fields-"+l)).length||(T.maybe_add_group_template(f,e.sectionSlug,e.selectorSlug,e.selectorH,e.selectorCode,l,a),u=g.find("div.property-fields-"+l),"flexbox"!==a&&"grid"!==a||(_=T.get_js_object_data([e.sectionSlug,e.selectorSlug],"all-devices"),I.checkObject(_.data,["pg_"+(c="flexbox"===a?"flexitem":"griditem")])&&(T.flip_flex_or_grid_item_switch(u,u.find(".subgroup-control-"+("flexbox"===a?"flexcontainer":"generalgrid")),_.levels,c),u.add(F.stat.grid).addClass("show-single-griditem"),"grid"===a&&(F.pref.grid_focus="griditems")))),"grid"===a&&(u=T.get_js_object_data([e.sectionSlug,e.selectorSlug],"all-devices").data,d=F.get_nth_focus(u),g.find(".tab-control-griditems:not(.nth-item-radios):not(.sub-label)").find("input.property-input").each(function(){var e=D(this);e.attr("name",I.replace_variable_name_attr(e.attr("name"),d))}),d&&g.find("span.grid-item-num").text(": "+d)),o&&(r?f.find(".group-tag-code").append(r):T.maybe_add_group_template(f,e.sectionSlug,e.selectorSlug,e.selectorH,e.selectorCode,l,"code")),q.sidebar_showing()&&g.addClass("show"),f.addClass("in-focus")),t.replaceExisting?D("#"+t.replaceExisting).replaceWith(f):D(p).find(".selector-sub").append(f)),s[i]=f}}return I.endT(arguments),1<s.length?s:s[0]},get_sel_abs_index:function(e,t){return 0},get_nth_focus:function(e){var t;e||(t=F.getM(),e=F.uiData[t.sectionSlug][t.selectorSlug]);e=I.checkObject(e,["nth_item"]);return!1===e?1:parseInt(e)},getM:function(){return F.get_meta(D("#"+F.selInFocusID),"selector")},strip_beyoned_brace:function(e){return void 0!==e&&(e=e.split("{"))[0]?(e=e[0]).trim():""},getOrCreateFolder:function(e,t){F.totalSels<1&&""===e&&(e=F.default_to_folder());var s=I.convert_to_param(e);if(!I.isDomEl(D("#strk-"+s))){t=F.add_section(e,t);if(!t)return!1;s=I.convert_to_param(t)}return F.get_meta(D("#strk-"+s),"section")},action_modify_selector:function(e,t,s,r,a,o,n){I.startT(arguments),e=e||F.get_meta_for_context(t,"selector","folder-popup");var i=t.closest(".mt-folder-form");s=s||{};var l=F.selector_checks_values(i.find(".selector-name-input").val(),F.strip_beyoned_brace(i.find(".selector-css-textarea").val()),e.selectorSlug);if(!l)return!1;var c=e.selectorM.find(".selector-label").val().split("|"),d=c[0],_=c[1],u=e.selectorSlug,p=_!==l.code,g=l.newName,f=l.newNameHuman,i=e.sectionSlug,c=e.selectorM.add(e.selector);F.dom_replacements(e,"selector",c,i,i,e.sectionH,u,g,f,l.code),c.find("input.color.bound").removeClass("bound").css("display","").next(".sp-replacer").remove(),F.stat.styleComponents.find(".sp-container").remove(),s=T.modify_main_js_object("rename",{keepAsDraft:o,skipSave:n},{rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:i,targetSelector:u,new_key:g,new_label:f,new_code:l.code,orig_code:_});F.is_cur("selector",e.selectorID)&&F.update_global_vars(F.get_meta(e.section.find("li.in-focus"),"selector")),F.iframe_functions_loaded()&&!F.doNotReselectRevertedRetargetSel&&v.reposition_overlays({con:"reg"}),e=F.get_meta(e.selectorM,"selector"),s=T.modify_main_js_object("group_to_css",s,{M:e,maxDepth:"group",recurse_key:["m_query"],triggeredFromEditor:a,selCodeChanged:p&&{oldCode:_,newCode:l.code},skipSave:n}),a||O.update_adaptable_editor({M:e,directContent:E.resolve_inline_editor_content(e),contentShouldChange:!0}),F.retargetSelector&&!F.retargetSelector.initialModifySavePackage?F.retargetSelector.initialModifySavePackage=D.extend(!0,[],s.savePackage):F.retargetSelector.lastModifySavePackage=D.extend(!0,[],s.savePackage);g=s.savePackage.length;if(r){var m=F.getOrCreateFolder(r,o);if(!m)return!1;if(!I.new_name_checks(f,"selector",m.sectionM))return!1;m.sectionM.find("> .sec-row .folder-icon").hasClass("on")||F.open_folder(m),e.sectionM.find("> .sec-row .folder-icon").hasClass("on")||F.open_folder(e),e=F.get_meta(D("#"+e.selectorMID),"selector"),s=F.get_dom_order(s,e.selectorM,{prevSec:"",newSec:"",orig_order:["this"],new_order:["this"],map:[]},!1,!0),e.selectorM.detach().appendTo(m.sectionM.find("ul.selector-sub")),e=F.selector_received({},{item:e.selectorM}),s=F.get_dom_order(s,e.selectorM,F.menuOrder,!0,!0),F.retargetSelector&&(F.retargetSelector.initialFolderMoveSavePackage?F.retargetSelector.lastFolderMoveSavePackage=s.savePackage.slice(g):F.retargetSelector.initialFolderMoveSavePackage=s.savePackage.slice(g))}F.close_context_menu({filter:".cm-selector-options"});p="",m=TvrLang.selector_modified,g="mtif-edit";F.retargetSelector&&o&&(d=F.retargetSelector.selectorH,_=F.retargetSelector.selectorCode,u=F.retargetSelector.selectorSlug),d!==f&&(p+=TvrLang.previous_name+": "+d+"\n",p+=TvrLang.new_name+": "+f),_!==l.code&&(p+=p?"\n":"",p+=TvrLang.previous_code+": "+_+"\n",p+=TvrLang.new_code+": "+l.code);l=s;return o&&(l=F.retargetSelector?(I.checkObject(F.uiData,[e.sectionSlug,e.selectorSlug,"isDraftRetarget"])||T.updateObjectAndSavePackage(s.savePackage,[{action:"append",trail:[e.sectionSlug,e.selectorSlug],key:"isDraftRetarget",data:F.retargetSelector}]),F.draft_user_action.retarget):(F.draftSelector.atts=F.selector_key_atts(e),p=TvrLang.selector_created+": "+f,g="mtif-add",m=TvrLang.selector_created,F.draft_user_action.new)),F.dontLogSelectorChange||P.user_action(l,{items:["selector"],val:m,M:e,valTT:p,pathTT:!0,icon:g}),o||n||P.ajax_save_settings({settings:s,timerName:"modify_selector_"+i+"_"+u}),I.endT(arguments),!0},proper_clone:function(e){I.startT(arguments);var t=e.clone();return t.find("div.sp-replacer, div.sp-container").remove(),t.find("input.color.bound").removeClass("bound"),F.colorpicker_bind(t),I.endT(arguments),t},reset_copied_active_classes:function(e){return e.each(function(){var e=D(this);e.removeAttr("copy-in-prog").removeClass("in-focus").find("li.in-focus").removeClass("in-focus"),e.find(".toggle-folder-more-options").removeClass("on")}),e},maybe_save_draft_selector_before_copying:function(e,t){var s;(F.retargetSelector||F.draftSelector.atts.id)&&(s=F.retargetSelector||F.draftSelector.atts,("selector"===t&&e.selectorID===s.id||"section"===t&&e.sectionSlug===s.sectionSlug)&&F.save_draft_selector(F.retargetSelector,!0))},copy_selector:function(e){var t=F.get_meta_for_context(e,"selector");if(!F.allowed_action(t,"Add Sel"))return!1;var s=F.load_selector(t,{items:["selector"]}),t=F.get_meta(s,"selector");F.maybe_save_draft_selector_before_copying(t,"selector");var r=t.selectorSlug,a=t.selectorH,o=I.resolve_unique_name(t.selectorH,t.sectionM,".selector-name","Copy"),n=I.convert_to_param(o),s=F.dom_replacements(t,"selector",F.proper_clone(D([t.selectorM[0],t.selector[0]])),t.sectionSlug,t.sectionSlug,a,r,n,o,t.selectorCode),s=F.reset_copied_active_classes(s);t.selectorM.after(s[0]),t.selector.after(s[1]);a=T.modify_main_js_object("copy",{},{M:t,targetDepth:"selector",maxDepth:"selector",origSlug:r,origHuman:a,newSlug:n,newHuman:o}),a=T.reorder_after_copy(a,t.selectorM,!0);a=T.modify_main_js_object("update_section_css",a,{M:t,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),F.update_count(t.sectionM.find(".selector-count-state"),"add",1,"selector",""),I.hasValue(F.selInFocusID)&&F.update_prev_next_sel_buttons(F.selInFocusID);n="#strk-"+t.sectionSlug+"-"+n;F.tvr_iterate_selectors_v(D(n),n,{action:"copy",doNotBringStylesTop:1}),a=P.user_action(a,{items:["selector"],val:F.title(e),M:t,pathTT:!0,valTT:o,icon:e.attr("class")}),P.ajax_save_settings({settings:a})},delete_selector:function(e,t){I.startT(arguments);var s=F.get_meta_for_context(e,"selector");if(P.action_in_prog(s.selectorM,"delete")||P.action_in_prog(s.selectorM,"data-load"))return!1;P.log_action(s.selectorM,"delete"),F.close_context_menu({filter:".cm-selector-options"}),s.selectorM.fadeOut("fast",function(){F.action_delete_selector(s,t,e)}),I.endT(arguments)},action_delete_selector:function(e,t,s){var r,a=I.hasValue(F.selInFocusID)&&F.is_cur("selector",e.selectorID);F.update_count(e.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),a&&(r=(r=F.itemScan("selector","prev","getID",e.sectionSlug,e.selectorSlug,{incCurrentSection:!0}))||F.itemScan("selector","next","getID",e.sectionSlug,e.selectorSlug,{incCurrentSection:!0})),e.selector.remove(),e.selectorM.remove();var o=T.modify_main_js_object("delete",{},{rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:e.sectionSlug,targetSelector:e.selectorSlug}),o=T.modify_main_js_object("update_section_css",o,{M:e,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]});F.after_style_options_deleted("selector"),o=F.js_check_values(o,e),a&&r&&!t&&F.tvr_iterate_selectors_v(!1,r,{doNotBringStylesTop:1}),r||F.update_prev_next_sel_buttons(!1),O.ace_sync_details={},t||(o=P.user_action(o,{items:["selector"],val:F.title(s),M:e,pathTT:!0,icon:s.attr("class")}),P.ajax_save_settings({settings:o}))},remove_property_group:function(e,t){I.startT(arguments);var s=e.group.find("div.property-fields-"+t);return s?(s.remove(),I.endT(arguments),!0):(I.endT(arguments),!1)},update_accordion:function(e){var t=e.parent(),s=t.closest(".accordion-wrapper").find(".accordion-heading").not(e),e=t.hasClass("property-menu");s.removeClass("expanded"),e&&(F.pgInFocusWiz=t.attr("id").replace("comp-",""),I.isDomEl(v.triggerEl)&&v.getAndUpdateCompStyles(!0,!0,void 0,"obj"))},toggle_expandable_panel:function(e){var t="open",s=e.attr("rel"),r=F.pref.layout.right.expanded_settings;e.hasClass("accordion-heading")&&F.update_accordion(e),e.hasClass("expanded")?(e.removeClass("expanded"),t="close"):e.addClass("expanded");e=I.in_array(s,r);"open"===t?!1===e&&r.push(s):r.splice(e,1),q.save_layout_preferences()},trigger_pg_icon_click:function(e){e=e||F.pref.pg_focus,F.dontSavePgFocus=!0,F.pg_icon_pressed(F.stat.css_icons.find("ul.styling-option-icons").find(".pg-icon-wrap-"+e)),F.dontSavePgFocus=!1},pg_icon_pressed:function(e,t,s){I.startT(arguments);var r=D("#"+F.selInFocusID);if(!I.isDomEl(r))return!1;e=e.closest(".pg-icon-wrap");var a=F.get_mq_focus(),o=e.attr("rel"),n=F.get_meta(r,"selector");F.pref.pg_focus=o;r=(n=F.ensure_selector_and_pg_loaded(n,t,a,o)).selector.find(".styling-options"),a=F.stat.css_icons.find(".styling-option-icons");F.update_tab(r,".group-tag",a,o,".pg-icon-wrap",".pg-focus"),"grid"!==o&&"transform"!==o||F.js_check_values({},n),F.after_tab_switch(n,s),q.editor_and_gui()&&q.maybe_adjust_side_options(),I.action_after_timeout("pg_expensive",3,{item:function(e){F.iframe_functions_loaded()&&v.get_computed_styles({data:F.curSelCSS,con:"str"}),F.refresh_comp_css()},args:[n]}),F.dontSavePgFocus||P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&pg_focus="+o}),I.endT(arguments)},ensure_selector_and_pg_loaded:function(e,t,s,r){return t||F.load_selector(e,{items:["selector"],replaceExisting:e.selectorID,mq_key:s}).addClass("in-focus"),F.get_meta(F.get_pg_focus_obj(r),"group")},clear_data_level:function(e,t){I.startT(arguments);var s,r=e.attr("data-input-level"),a="pgtab"===r,o=a?"group":r,n={M:t=t||("tab"===r?F.get_meta(D("#"+F.selInFocusID),"selector"):F.get_meta_for_context(e,o)),clear:{},clean:{}},i=["styles","pie","pg_chained","pg_flexitem","pg_griditem","ast"];t.selectorSlug;switch(r){case"section":var l=t.section.find("div.property-tag");if(n.clear.section=[!1,i],1<I.obj_length(F.uiData[t.sectionSlug]))if(!confirm(tvrsprintf(TvrLang.clear_folder_confirm,t.sectionH)))return!1;break;case"selector":l=t.selector.find("div.property-tag"),n.clear.selector=[i];break;case"tab":var c=t.tabSlug;l=t.selector.find("div.property-fields-"+c).find("div.property-tag"),n.mq_key=c,n.onlyRecurse="all-devices"!==c,n.clear.selector=[i];break;case"group":case"pgtab":case"subgroup":n.mq_key=t.tabSlug,"all-devices"===n.mq_key?n.recurse_key=["important"]:n.onlyRecurse=!0,n.clear.selector=[["styles"],[t.groupSlug]],"group"===r||"flexbox"===t.groupSlug?l=F.get_group(t).find("div.property-tag"):(s=a&&e.data("tab-group"),c=a?Object.keys(TvrMT.data.prog.pg_tab_props[t.groupSlug][s]):TvrMT.data.prog.subGroupKeys[t.subgroupSlug],l=F.get_subgroup_or_tabgroup(t,!1,s),n.clear.selector.push(c),F.maybe_add_nth_index_filter(a,s,t,e,n.clear.selector)),"pgtab"===r&&(r="group")}F.clear_fields(l,e,r,t,n),n=T.modify_main_js_object("clear",n,{maxDepth:"selector",dontUpdateSavePackage:!0}),n=T.modify_main_js_object("group_to_css",n,{maxDepth:"group",recurse_key:["m_query"]}),n=T.modify_main_js_object("clean",n,{maxDepth:"selector",clean:n.clear}),n=F.js_check_values(n,t),q.editor_and_gui()&&O.gui_to_editor(!1,t),n=P.user_action(n,{items:[r],val:F.title(e),M:t,pathTT:!0,icon:[{icon:P.h_i_class(r,t)},{icon:e.attr("class")}]}),P.ajax_save_settings({settings:n}),I.endT(arguments)},clear_fields:function(e,t,s,o,r){I.startT(arguments),e.each(function(){var e=D(this),t=e.prev(".subgroup-tag"),s=e.find("input.property-input, input.mt-supplementary-picker, textarea.property-input"),r=e.find("span.important-toggle"),a=e.hasClass("has-variable-line");s.val(""),a&&e.find(".tvr-input-wrap:not(:first-child)").remove(),s.hasClass("color")&&F.clear_spectrum_inputs(F.get_meta(e,"property"),!1),s.hasClass("mt-event-input")&&F.adjust_event_fields(s),s.hasClass("tvr-editor-hidden")&&F.is_cur("selector",o.selectorID)&&(a=F.stat.adaptableEditor,e=O.eds[a.attr("id")],a.hasClass("ace_editor")&&e&&O.set_editor_content(a,e,{M:o})),F.post_edit(s),r.hasClass("active")&&F.input_icon_toggle(r,!0,!0),!I.isDomEl(t)||(t=t.find(".chained-toggle")).hasClass("active")&&F.input_icon_toggle(t,!0,!0)}),I.endT(arguments)},update_tab:function(e,t,s,r,a,o,n){I.startT(arguments);var i,l,c=s.find(a+"-"+r);s.find(a).removeClass("active").end().find(o).val(r),c.addClass("active"),n||(e.find(t+".show").removeClass("show"),(i=e.find(t+"-"+r)).addClass("show"),".mq-tab"===a&&e.addClass("show"),".pg-icon-wrap"===a&&e.find(t+"-"+r).find(".property-fields").removeClass("show").end().find(".property-fields-"+F.get_mq_focus()).addClass("show"),".dialog-tab"===a&&"display-css-code-dialog"===F.get_dialog_focus(s).attr("id")&&(parseInt(r)!==s.find(a).length-1&&(P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&generated_css_focus="+r}),F.pref.generated_css_focus=r),i=(l=i.find("pre").first()).attr("id"),O.generated_css_auto_line_done[i]||(l=O.get_editor(l),O.find_selector_line(l,i,{find:O.current_selector_find_config(c.data("mode"))},!1)))),I.endT(arguments)},mq_tab_pressed:function(e,t,s,r){I.startT(arguments);var a=!(F.rulerManuallyAdjusted=!1),o="",n=e.attr("rel"),i=F.stat.res.find(".query-tabs");if(!r&&p.check_synced_page_builder_responsive_views(n))return!1;F.pref.mq_device_focus=n,P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&mq_device_focus="+n});var l,c,d=I.hasValue(F.selInFocusID);d&&(l=F.get_meta(F.get_pg_focus_obj(),"group"),l=F.ensure_selector_and_pg_loaded(l,t,n,F.pref.pg_focus),a=!1,o=".property-fields",c=F.get_pg_focus_obj()),F.update_tab(c,o,i,n,".mq-tab",".device-focus",a),d&&(F.js_check_values({},l),F.after_tab_switch(l)),I.action_after_timeout("mq_expensive",3,{item:function(e){F.reset_preview_width_for_current_tab(e,!1,s),F.get_local_window_function("reset_mob_previews")()},args:[n]}),I.endT(arguments)},resume_cur_slider_value:function(){},reset_preview_width_for_current_tab:function(e,t,s){e=e||F.get_mq_focus(),F.get_local_window_function("update_iframe_slider")(e,F.mqs[e].min,F.mqs[e].max,t,s)},after_tab_switch:function(e,t){var s,r;I.startT(arguments),t=t||{},"css"===e||F.pref.show_code_editor||(s="styles","code"===e.groupSlug?(F.stat.tvr.addClass("onlyInlineEditor"),F.onlyInlineEditor=1,s="editor"):(F.stat.tvr.removeClass("onlyInlineEditor"),F.onlyInlineEditor=0),"editor"===s&&!F.pref.dock_editor_left||"styles"===s&&!F.pref.dock_styles_left||t.doNotBringStylesTop||q.update_sidebar_z_indexes(s,"left"),q.adjust_preview_margin_and_save_config({skipPGPress:1,side:"left",skipSave:1}),r=v?F.stat.tvr.add(F.stat.fHTML):F.stat.tvr,"transform"===e.groupSlug&&F.default_to_tab("transform"),"grid"===e.groupSlug?(r.addClass("showGridControls"),F.default_to_tab("grid"),s="show-single-griditem",e.group.find(".property-grid").hasClass(s)?F.stat.grid.addClass(s):F.stat.grid.removeClass(s)):r.removeClass("showGridControls"),"code"!==e.groupSlug&&!q.editor_and_gui()||F.editor_to_gui_running||O.update_adaptable_editor({M:e,directContent:E.resolve_inline_editor_content(e),mode:parseInt(F.pref.allow_scss)?"scss":"css"}),I.action_after_timeout("tab_switch_deferred",3,{item:function(e){F.maybe_scroll_image_fields(e),F.adjust_scroll_buttons(e,"style")},args:[e]})),"css"===e&&(r=t.$curObj.data("code-type"),O.update_adaptable_editor({M:e,directContent:t.$curObj.find("textarea").val(),mode:parseInt(F.pref.allow_scss)&&"css"===r?"scss":r}),F.existingSelRadioUsed||O.resume_editor_cursor_pos_and_select()),I.endT(arguments)},open_property_dropdown:function(e,t,s){var r=D("#"+F.selInFocusID);if(t=t||e.group,!(s=s||I.checkObject(e,["fieldData",0,"prop"]))||!I.isDomEl(r))return!1;t=r.find("div.field-"+t+"-"+s),s=t.hasClass("is-picker")?".property-input, .sp-preview-inner":".combo-arrow";t.find(s).trigger("click")},get_code_meta:function(e){var t=e.selector.find(".group-tag-code"),e=!!t&&t.find("div.property-fields-"+e.tabSlug);return{$group:t,$property_fields:e,$editor:F.stat.adaptableEditor,editor:O.eds["adaptable-editor"]}},js_in_focus:function(){return!(!F.stat.tvr.hasClass("show_code_editor")||"js"!=F.get_css_focus())},default_to_tab:function(e){I.startT(arguments),"mq"===e?F.mq_tab_pressed(F.stat.res.find(".mq-tab-"+F.get_mq_focus())):"css"===e?F.css_tab_pressed(F.stat.code.find(".css-tab-"+F.get_css_focus())):"wizard"===e?F.adv_tab_pressed(D("#adv-tabs").find(".adv-tab-"+F.get_wizard_focus())):"grid"!==e&&"transform"!==e||F.pg_tab_pressed(d.get_pg_fields(e).find("."+e+"-tab-"+F["get_"+e+"_focus"]()),e),I.endT(arguments)},get_mq_focus:function(){var e=F.pref.mq_device_focus;return e=!I.hasValue(e)||!I.hasValue(F.mqs[e])?"all-devices":e},get_wizard_focus:function(e){if(e&&!F.pref.wizard_expanded&&!F.pref.dock_wizard_right)return!1;e=F.pref.adv_wizard_tab;return e=!e||"html-inspector"===e||"refine-targeting"===e?"css-computed":e},get_css_focus:function(){return F.pref.css_focus||"all-browsers"},get_grid_focus:function(){var e=F.pref.grid_focus;return e||"gridtemplate"},get_transform_focus:function(){var e=F.pref.transform_focus;return e||"transform"},get_dialog_tab_focus:function(e){e=(e=(e=e||F.get_dialog_focus()).find("input.dialog-focus").val())||0;return parseInt(e)},get_dialog_focus:function(){return F.stat.dialogs.find("div.tvr-dialog.show")},get_tab_name:function(e){return D("#responsive-bar").find(".mq-tab-"+e).find(".mq-tab-txt").text()},get_pg_focus_obj:function(e){e=e||F.pref.pg_focus;e=D("#"+F.selInFocusID+"-"+e);return!!I.isDomEl(e)&&e},get_group:function(e,t){e=e.group.find("div.property-fields-"+e.tabSlug);return t&&(e=e.find("input.property-input")),!!I.isDomEl(e)&&e},get_pg_fields_obj:function(e,t){I.startT(arguments);var s=e.find("div.property-fields-"+t);return I.endT(arguments),!!I.isDomEl(s)&&s},get_subgroup_or_tabgroup:function(e,t,s){var r=F.get_group(e);if(!I.isDomEl(r))return!1;e=s?"div.tab-control-"+s:"div.subgroup-"+e.subgroupSlug,e=r.find(e);return!!I.isDomEl(e)&&(t&&(e=e.find("input.property-input")),!!I.isDomEl(e)&&e)},maybe_remove_group:function(e,t){if(I.startT(arguments),e){var s=F.get_meta(e,"group");if(!F.pg_check_values(s.group,t,!1)&&!F.input_toggles_enabled(s.group,"group",t))return I.endT(arguments),F.remove_property_group(s,t)}return I.endT(arguments),!1},input_toggles_enabled:function(e,t,s){"group"==t&&(e=e.find("div.property-fields-"+s));var r=!1;return e.find("input.input-toggle-tracker").each(function(e){return!(r=!0)}),r},selector_check_disabled:function(e){var t,s,r=e.selectorM.find(".disabled-responsive-tabs"),a=D("#responsive-bar").find(".query-tabs");for(t in TvrMQsCombined)TvrMQsCombined.hasOwnProperty(t)&&(s=a.find("span.mq-tab-"+t),I.isDomEl(r.find("input.disabled-tracker-"+t))?s.addClass("item-disabled"):s.removeClass("item-disabled"))},pg_check_values:function(e,t,s,r){var a=F.get_meta(e,"group"),o=!1;F.get_mq_focus();return r=r||"#nothing",a.group.find("div.property-fields-"+t).find("input.property-input, textarea.property-input").not(r).each(function(e){if(I.isDefined(D(this).val()))return!(o=!0)}),o},js_check_values:function(e,t,s,r,a){I.startT(arguments);var o={incRecurse:!0,onlyRecurse:!1,mq_key:!1,M:F.get_meta(t.section||t,"section"),maxDepth:"group"};e.has_values={},e=T.modify_main_js_object("check_values",e,o),o.incRecurse=!1;var n=(e=T.modify_main_js_object("update_dots",e,o)).has_values;return n.current_sel_checked&&(F.update_tab_dots(n),F.update_group_dots(n),"grid"===F.pref.pg_focus&&(o={itemsWithValues:n.itemsWithValues},F.grid.isAllItems&&d.update_grid_and_radio_item_formatting("itemdots",o),F.update_pgtab_dots(n)),"transform"===F.pref.pg_focus&&F.update_pgtab_dots(n)),r&&P.silent_save(!1,e.savePackage),I.endT(arguments),e},update_tab_dots:function(e){for(var t in TvrMQsCombined){var s;TvrMQsCombined.hasOwnProperty(t)&&(s=F.item_has_styles(e,"tab",t),F.update_style_signal(F.stat.res.find(".mq-tab-"+t),s))}},update_pgtab_dots:function(e){var t=F.get_pg_meta(),s=T.get_selector_data(t,t.tabSlug).data,r=I.isDefined(s.nth_item)?s.nth_item:1;if(t){var s=t.groupSlug,a={},o=I.checkObject(e,["propsWithValues",s]);if(o)for(var n=Object.keys(o),i=0;i<n.length;i++){var l=n[i],c=F.get_property_tab_control(l);c&&("griditems"===c?I.checkObject(o,[l,"value",r]):1)&&(a[c]=1)}t.group.find("span.mt-tab").each(function(){var e=D(this),t=e.attr("rel"),t=a[t];F.update_style_signal(e,t)})}},update_group_dots:function(s,e){F.stat.css_icons.find(".pg-icon").each(function(){var e=D(this),t=e.attr("rel"),t=F.item_has_styles(s,"group",t);F.update_style_signal(e.parent(),t)})},item_has_styles:function(e,t,s){return I.checkObject(e,[t,s])?1:""},update_style_signal:function(e,t){e&&(t?e.addClass("hasValues"):e.removeClass("hasValues"))},css_tab_pressed:function(e){I.startT(arguments);var t=F.get_css_focus(),s=e.attr("rel"),r=(s!=t&&F.stat.code.find("div.mt-full-code-"+t),F.stat.code),t=r.find(".css-code-tabs");F.update_tab(r,".mt-full-code",t,s,".css-tab",".css-focus"),F.pref.css_focus=s;t=F.stat.code.find("div.mt-full-code-"+s);F.after_tab_switch("css",{$curObj:t}),P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&css_focus="+s}),q.toolbar_adjusted(),I.endT(arguments)},pg_tab_pressed:function(e,t,s){var r=e.closest(".property-"+t),a=r.find(".query-tabs"),e=e.attr("rel");F.update_tab(r,".tab-control",a,e,"."+t+"-tab","."+t+"-tab-focus"),F.pref[t+"_focus"]=e,F.stat.tvr.attr("data-"+t+"-pgtab",e),P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&"+t+"_focus="+e}),F.refresh_comp_css(),"grid"===t&&(F.adjust_grid_line_scroll_buttons(F.get_meta(r,"group")),s&&v&&v.maybe_run_grid_control_update())},adv_tab_pressed:function(e){I.startT(arguments);var t=D("#advanced-wizard"),s=t.find(".query-tabs"),r=e.attr("rel");F.update_tab(t,".adv-area",s,r,".adv-tab",".adv-wizard-focus"),F.pref.adv_wizard_tab=r,F.maybeUpdateInspectorPanels({updateComputed:1,updateStyles:1}),P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&adv_wizard_tab="+r}),I.endT(arguments)},settings_tab_pressed:function(e){},maybeUpdateInspectorPanels:function(e){if(I.startT(arguments),!F.pref.wizard_expanded)return F.updateCompAsync(!1,!1,void 0,"obj"),!1;e=e||{};var t=F.get_wizard_focus(!0);e.updateComputed&&F.updateCompAsync(!0,!0,void 0,"obj"),e.updateHTML&&(F.domChanged.updateHTMLPane||e.updateVisEditor?(e.updateVisEditor=1,F.update_wizard_html(e),F.domChanged.updateHTMLPane=!1):F.update_wizard_html_scroll(e)),"css-inspector"===t&&e.updateStyles&&I.action_after_timeout("update_styles_pane",70,{item:function(){E.update_stylesheet_rules()},args:[]}),I.endT(arguments)},updateCompAsync:function(e,t,s,r){I.action_after_timeout("update_comp_async",3,{item:function(){v&&v.getAndUpdateCompStyles(e,t,s,r)},args:[]})},dialog_tab_pressed:function(e){I.startT(arguments);var t=e.closest(".dialog-main"),s=t.find(".dialog-tabs"),r=e.attr("rel");F.update_tab(t,".dialog-tab-field",s,r,".dialog-tab",".dialog-focus"),I.endT(arguments)},combobox_clicked:function(e,t){I.startT(arguments),e.hasClass("sug-sel")?I.isDomEl(e.closest(".code-suggestion.in-focus"))||F.sug_css_clicked(e):(e.attr("rel"),(e.hasClass("has-arrows")||e.hasClass("cssfilter-combo"))&&F.combo_arrow_clicked(!1,e),e.hasClass("cssfilter-combo")&&F.feature_on(e)),I.endT(arguments)},combo_arrow_clicked:function(e,t){I.startT(arguments);var s="input"===(t=t||(e.hasClass("cur-item-dropdown")?e.prev("input"):e.siblings("input"))).prop("tagName").toLowerCase()?t:t.find("input");s.data("wasOpen")?F.close_combo_menu(s):F.open_combo_menu(s),s.hasClass("sug-sel")&&F.sug_css_clicked(s),I.endT(arguments)},open_combo_menu:function(e){e.MTautocomplete(),e.is(":focus")||e.focus(),e.MTautocomplete("search",""),F.combobox_focused(e)},close_combo_menu:function(e){e.MTautocomplete().MTautocomplete("close")},combobox_focused:function(e){e.hasClass("custom_css_unit")&&D("#css_unit_set").val("")},focus_on_current_combo_value:function(e){if(!F.comboIconReflow&&I.isDefined(e.value)){for(var t,s=F.get_custom_autocomplete(e).menu,r=0,a=D("li:not(.ui-autocomplete-category)",s.element),o=new RegExp("^"+I.escapeRegExp(e.value),"i");r<a.length;r++){var n=a.eq(r),i=n.text();if(I.isDefined(i)&&o.test(i)&&I.isDomEl(D(n),!0)){t=n;break}}t&&I.action_after_timeout("focus_menu_item",20,{item:function(){I.isDomEl(D(t),!0)&&s.focus(null,t)},args:[]})}},input_clear_icon_clicked:function(e,t){var s,r=e.siblings("input"+(t=t||"")),a=!1;r.val("").focus(),r.hasClass("search-folders-input")&&F.clear_folder_search(),r.hasClass("property-input")&&(a=F.get_meta(r,"property")),(a=r.hasClass("sp-input-var")?F.get_related_meta("picker",e.closest(".sp-container")).M:a)&&((t=a.property).hasClass("has-variable-line")&&(r.hasClass("vl-name-input")?F.toggle_optional_input(e.siblings(".toggle-optional-input")):(s=!1,r.closest(".tvr-input-wrap").find(".property-input").each(function(){if(""!==D(this).val().trim())return!(s=!0)}),s||F.delete_variable_field(t,r,a,!0))),F.maybe_toggle_google_fonts_field(r,""),F.run_input_updated(r))},format_combo_cat_toggle_atts:function(e){return' class="mt-ui-toggle uit-par mt-combo-toggle toggle-sampled-items toggle-'+e+'" data-action="toggle-sampled" data-dyn-tt-root="'+e+'"data-aspect="'+e+'"'},wheelDropdown:{cssf:"",source:[],index:-1},valueChangeDropdown:function(e,t,s){var r=F.wheelDropdown.source.length-1,t=t?F.wheelDropdown.index+1:F.wheelDropdown.index-1;t<0?t=r:r<t&&(t=0);r=F.wheelDropdown.source[t];r===Object(r)&&(r=I.isDefined(r.value)?r.value:r.label),e.val(r),F.maybe_sync_fields(e),F.wheelDropdown.index=t},cycleDrowndownValues:function(e,t,s){var r,a,o=I.prop_to_cssf(e.attr("rel")),n=e.val(),i=F.wheelDropdown.cssf!==o||!I.isDefined(n);i&&(r=(a=F.resolve_combobox_source(e))[1]===Object(a[1])&&"value",F.wheelDropdown.source=a,F.wheelDropdown.cssf=o,a=I.isDefined(n)?I.in_array(n,a,!1,r):!1!==I.in_array(F.compProps[o],a,!1,r)?I.in_array(F.compProps[o],a,!1,r):I.in_array(F.compProps[o],a,!1,"label"),F.wheelDropdown.index=!1!==a?parseInt(a):-1),F.valueChangeDropdown(e,0<t.deltaY,s),i&&F.adjust_comp_span(e,"after"),P.ajax_save_settings({$property:e})},lastAutocompleteResponse:[],resolve_combobox_source:function(e,t,s,r){I.startT(arguments);var a,o,n,i,l,c,d,_,u,p,g=e.attr("rel"),f=(e.hasClass("sug-sel")?v.dom.sels:TvrMT.data.prog).combo[g];return"custom_paths"===g?F.get_site_pages:"all_sel_suggestions"===g?F.filter_code_suggestions:"css_length_units"===g?m.filter_css_units(f,e.data("prop")):"cur_folders"===g?F.get_folders():"alt_label_suggestions"===g?F.get_label_suggestions():(f=f||[],(e.hasClass("property-input")||e.hasClass("sp-input-var"))&&(a=F.gatheredCSS.root_cat_keys[g],d=I.prop_to_cssf(g),o=!!(c=TvrMT.data.prog.lh[d])&&F.get_default_unit(c.group,c.prop),n=F.support_sampling(g),i=[],l=[],u=[],a&&(_=F.pref.my_props.sug_values,d=E.sort_number_unit_strings(I.uniqueArray(_[c=(d="color_extra"===a)?"color":a].recent.concat(_[c].saved)),!1,g,!1,a,!1,d),_=_[a].copiedSrc,"grid_positions"!==a&&"grid_area"!==a||!I.checkObject(F.grid,["templateAreas"])||(d=d.concat(F.grid.templateAreas["grid_positions"===a?"implicit_names":"grid_areas"])),_=E.sort_number_unit_strings(I.uniqueArray(d.concat(_)),!1,g),f.length&&f[0]===Object(f[0])?i=F.format_combo_suggestions(a,"suggestions",d):f=F.format_combo_suggestions(a,"suggestions",_),n&&(E.get_scss_variables("keys"),parseInt(F.pref.show_sampled_values)&&(l=F.format_combo_suggestions(a,"sampled")),F.pref.my_props.sug_variables&&parseInt(F.pref.show_sampled_variables)&&(p=E.sort_number_unit_strings(Object.keys(F.pref.my_props.sug_variables),!1,g,!0,a,o),u=F.format_combo_suggestions(a,"sampled_variables",p)))),p=[],"font_family"===g?p.push(TvrLang.google_font):"list_style_image"!==g&&"background_image"!==g&&"url"!==g||p.push("none"),(f=p.concat(i,f,u,l)).length||f.push("")),r=I.isDefined(r)?"curVal"===r?e.val():r:"",t&&e.MTautocomplete().MTautocomplete("option","source",f),s&&(e.MTautocomplete("search",r),F.maybe_combo_menu_width_change(e)),I.endT(arguments),f)},get_custom_autocomplete:function(e){e=D(e).data();return e["custom-MTautocomplete"]||e.customMTautocomplete},maybe_combo_menu_width_change:function(t){var e;t.hasClass("mt-slider")&&(e=F.get_custom_autocomplete(t),e=D(e.menu.element),I.action_after_timeout("new_menu_width",100,{item:function(e){m.hide_slider_set(),m.show_slider_set(t,!0)},args:[e]}))},format_combo_cat_label:function(e,t){return TvrLang[e]},format_combo_suggestions:function(e,t,s){var r=[],a=s||F.pref.my_props.sug_values[e][t],o=F.format_combo_cat_label(t,e);if(a&&a.length)for(var n,i,l,c=0;c<a.length;c++)a[c]&&(i=(n=(l=a[c])===Object(l))?l.val:l,l=n?D.extend(!0,{},l):{},D.extend(!0,l,{label:i,category:o}),r.push(l));return r},add_variable_field:function(e,t){var s=e.closest(".property-tag"),r=s.find(".tvr-input-wrap").last(),a=r.find(".vl-post-line-name").find(".property-input").val(),o=r.clone(),e=o.find(".property-input");r.find(".vl-post-line-name").removeClass("show-optional-input").find(".property-input").val(""),o.find(".vl-item").removeClass("show-optional-input"),t.shiftKey||e.val(""),a&&o.find(".vl-pre-line-name").find(".property-input").val(a),o.find(".comp-style").html(""),r.after(o),o.find(".vl-main-input").find(".property-input").focus(),F.adjust_grid_line_scroll_buttons(F.get_meta(s,"group")),t.shiftKey&&P.ajax_save_settings({$property:e})},toggle_optional_input:function(e){e=e.parent();e.hasClass("show-optional-input")?e.removeClass("show-optional-input"):(e.addClass("show-optional-input"),e.find(".property-input").focus())},delete_variable_field:function(e,t,s,r){1<e.find(".tvr-input-wrap").length&&t.closest(".tvr-input-wrap").animate({opacity:0},200,function(){D(this).remove(),r&&F.adjust_grid_line_scroll_buttons(s)})},get_combo_menu_from_input:function(e){return D(F.get_custom_autocomplete(e).menu.element)},combobox_item_selected:function(e,t,s,r){I.startT(arguments);var a,o,n,i,l=s.closest(".property-tag"),c=t.item.value;return!s.hasClass("grid-area-add")&&(s.val(c),F.maybe_run_code_or_synced_label_field_edited(s,t),s.hasClass("sp-input-var")?(F.run_input_updated(s),!1):(s.hasClass("bg-image-select")&&setTimeout(function(e){I.scroll_input_end(e)},30,s),s.hasClass("property-input")&&(l.hasClass("has-variable-line")&&(""===c||(o=d.parseGridTracks(c).lines)&&1<o.length&&(a=s.attr("rel"),i=F.get_meta(s,"property"),(n=s.closest(".mt-vl-inner")).find(".tvr-input-wrap").remove(),o=F.dom_replacements(!1,"group",D(TvrMT.data.templates.input_wraps[a]),"selector_section",i.sectionSlug,!1,"selector_css",i.selectorSlug,i.selectorH,i.selectorCode,i.tabSlug),n.prepend(o),T.map_property_values_to_field(a,l,c.split(" ")),n=n.find(".tvr-input-wrap").first(),s=(-1<a.indexOf("template")?n.find(".vl-main-input"):n).find(".property-input"))),F.adjust_comp_span(s,"after"),i=F.get_meta(s,"property"),F.maybe_toggle_google_fonts_field(s,c)||F.maybe_sync_fields(s),F.update_input_width_and_scroll(s),P.ajax_save_settings({$property:s,comboAction:r})),"css_unit_set"===s.attr("id")&&(c=s.val(),s.closest("ul").find("input.custom_css_unit").val(c)),"select"===r&&"custom_paths"===s.attr("rel")&&(s.MTautocomplete("close"),F.change_preview_url(s.siblings(".change-preview-url"),t)),"viewed_import_stylesheets"===s.attr("rel")&&(s.MTautocomplete("close"),E.update_import_css_preview(!1,{c:s.closest(".stylesheet-to-import").find(".view-import-stylesheet")},"loadNew")),s.hasClass("sug-sel")&&F.sug_sel_updated({val:s.val(),$editedField:s,comboSelected:1,ui:t}),s.hasClass("cssfilter-combo")&&F.pseudo_updated(s,{input:1}),void I.endT(arguments)))},maybe_toggle_google_fonts_field:function(e,t){if(e.hasClass("tvr-font-select")){var s=e.closest(".field-wrap").siblings(".tvr-font-custom");return F.gFontTarget=s.find(".property-input"),t==TvrLang.google_font?F.show_google_fonts_field(s):F.hide_google_fonts_field(e,s),!0}return!1},hide_property_fields:function(e){e.each(function(){var e=D(this),t=e.find(".property-input");t.val(""),F.adjust_comp_span(t,"after"),e.removeClass("show-event-fields")})},sug_css_clicked:function(e){I.startT(arguments);var t,s,r,a,o,n,i,l=e.closest(".mt-selector-suggestion");l.hasClass("in-focus")||(t=e.hasClass("existsel-radio"),s="hand_coded_css"===(i=l.data()).type,a=(r=!t)&&l.find("input.sug-sel"),o=r?a.val():i.code,n=!!t&&i.id,i=F.existingSelSelected!==t,F.existingSelSelected=t,F.sug_sel_updated({switchedNewExisting:i,isCodeViewSel:s,isExisting:t,isNewSug:r,$editedField:a,$item:l,radioSelection:1,val:o,selID:n,scroll:1})),I.endT(arguments)},toggle_preview_page_menu:function(e){var t=F.stat.settingsMenu,s=F.stat.changeUrlInputWrap.find("input"),r=F.stat.settingsMenu.children(".mt-preview_page-heading");r.hasClass("expanded")||F.toggle_expandable_panel(r),t.hasClass("on")?(F.close_combo_menu(s),F.hide_folders_or_settings("settings","right")):(F.show_folders_or_settings("settings","right"),I.action_after_repaint({item:function(){F.open_combo_menu(s)}},270))},get_toggle_data:function(e,t){I.startT(arguments),e?e=e.closest(".uit-par"):"hide_interface"===t?e=D("#toggle-mt-interface"):"hover_inspect"===t?e=D("#hover-inspect-toggle"):"show_code_editor"===t?e=D("#toggle-full-code-editor"):"show_text_labels"===t?e=D("#mymtonoffswitch-show_text_labels").closest(".mt-ui-toggle"):"dock_editor_left"===t?e=D("#mymtonoffswitch-dock_editor_left").closest(".mt-ui-toggle"):"dock_styles_left"===t?e=D("#mymtonoffswitch-dock_styles_left").closest(".mt-ui-toggle"):"detach_preview"===t?e=D("#mymtonoffswitch-detach_preview").closest(".mt-ui-toggle"):"show_sampled_variables"===t||"show_sampled_values"===t?e=D("#"+t):"create_additional_selector"===t&&(e=F.stat.suggestionsAdvanced.find(".additional-selector-toggle"));var s=!1,r=!1,a=!1;"show_code_editor"==(t=t||e.data("aspect"))?(r=e,e=D("#toggle-full-code-editor"),s=D("#code-editor-alias")):"show_extra_actions"==t?(r=e,e=D("#show_extra_actions")):"show_sampled_variables"===t||"show_sampled_values"===t?(r=e,e=D("#"+t)):"hover_inspect"==t?(r=e,e=D("#hover-inspect-toggle")):"selname_code_synced"==t?(r=e,e=D("#selname_code_synced")):"mt_highlight"===t?(r=e,e=D("#toggle-highlighting")):"code_manual_resize"==t?(r=e,e=D("#code_manual_resize")):"pseudo_classes"==t||"pseudo_elements"==t||"page_specific"==t?(a=F.stat.cssModifiers,s=F.get_css_filter_alias(r=e,t)):"create_additional_selector"===t&&(r=e,e=F.stat.suggestionsAdvanced.find(".additional-selector-toggle"));var o=e.hasClass("on")?0:1;return I.endT(arguments),{clicked:e,aspect:t,turnOn:o,alreadyOn:!o,$alias:s,$aliasTrigEl:r,$filter_scope:a}},feature_on:function(e,t,s){I.startT(arguments),s=s||{};var r=F.get_toggle_data(e,t);s.offFirst&&(F.feature_off(e,t,s.offFirst),r=F.get_toggle_data(e,t)),r.alreadyOn||F.toggle_feature(e,t,s),I.endT(arguments)},feature_off:function(e,t,s){I.startT(arguments),s=s||{},F.get_toggle_data(e,t).alreadyOn&&F.toggle_feature(e,t,s),s.onAgain&&F.feature_on(e,t,s.onAgain),I.endT(arguments)},toggle_inline_gui:function(){var e=O.eds["adaptable-editor"];e.isFocused()?(e.blur(),O.go_to_ui_property()):q.editor_and_gui()?(F.picker_method("hide"),e.focus()):F.trigger_pg_icon_click("code")},toggle_feature:function(e,t,s){I.startT(arguments);var r=F.get_toggle_data(e,t);e=r.clicked,t=r.aspect,s=s||{};var a=r.turnOn,o=r.$filter_scope||!1,n="",i=e.data("pref_sub_key");if("hide_interface"===t&&F.pref.detach_preview)return!1;s.pref_sub_key=i||!1,s.tmp&&(F.tmp[t]=a?"turnedOn":"turnedOff"),s.fHTML=I.isDefined(s.fHTML)?s.fHTML:e.data("fhtml"),s.noSave=I.isDefined(s.noSave)?s.noSave:parseInt(e.data("no-save"));var l,c=s.fHTML&&F.stat.fHTML?F.stat.tvr.add(F.stat.fHTML):F.stat.tvr,d=(s.extraClass&&s.extraClass,r.$alias?e.add(r.$alias):e),_=!1;a?(c.addClass(t),q.detached_window_available()&&u.add_html_class(t),d.addClass("on"),"show_time_concurrently"==t&&(s.noSave=1,I.log_concurrent=1),o||(_=e.data("neg")),"show_rulers"==t?F.get_local_window_function("show_rulers")():"dock_folders_left"===t||"dock_styles_left"===t||"dock_editor_left"===t||"detach_preview"===t||"dock_wizard_right"===t||"dock_settings_right"===t?q.toggle_layout_view(t,a,"dock_wizard_right"===t||"dock_settings_right"===t?"right":"left",s):"show_suggestions_menu"===t?F.show_suggestions_menu(v.stat.frontendControls.find(".show-suggestions-icon")):"enable_beaver_builder"===t?(v&&!s.uiCorrection&&p.activate_builder("FLBuilder"),F.stat.tvr.addClass("FLBuilder_is_on")):"activate_elementor"==t?p.activate_builder("elementor",!1,F.pageOrPostID):"activate_oxygen"==t?p.activate_builder("oxygen",!1,F.pageOrPostID):"selname_code_synced"==t?F.selname_code_synced(r.$aliasTrigEl,a):"code_manual_resize"==t?(q.horizontal_only()&&(F.stat.inlineEditor.css("height",F.pref.layout.editor_height.size),O.get_focus_editor().resize(),q.toolbar_adjusted()),F.close_context_menu({filter:".cm-editor-options"})):"show_code_editor"==t?(F.cancel_draft_selector_edit(!0,{elementAlreadySelected:1}),F.pref[t]=a,q.adjust_preview_margin_and_save_config({side:"left",skipSave:1}),F.default_to_tab("css"),s.doNotAutoSelect||O.resume_editor_cursor_pos_and_select()):"mt_dark_mode"===t?O.updateAllEditorsTheme("dark"):"auto_publish_mode"===t?0<F.pref.num_unpublished_saves&&P.publish_settings():"hover_inspect"==t?F.iframe_functions_loaded()&&v.bind_wizard_hover():"fullscreen"==t?I.enable_full_screen():"wizard_expanded"==t?(F.pref[t]=a,this.wizard_expanded()):"hide_interface"==t?(q.toolbar_adjusted(),F.feature_off(!1,"hover_inspect",{tmp:1,noSave:1})):"mt_highlight"===t?(r.$aliasTrigEl&&r.$aliasTrigEl.hasClass("current-item-spotlight")&&(s.con="reg",s.scroll=1),s.con&&v&&v.reposition_overlays(s)):o&&e.hasClass("filter-editable")?e.find("input.combobox").select():"expand_all_folders"===t?(F.clear_folder_search(),F.open_close_all_folders("open")):"selector_auto_name"===t&&(s.doNotUpdateField||F.update_nice_name(!1,F.stat.curCodeInput.val(),F.pref.selname_code_synced))):("show_time_concurrently"==t&&(s.noSave=1,I.log_concurrent=0),d.removeClass("on"),o&&o.find("ul.flist-"+t).find("li.css-filter-item.on").length||c.removeClass(t),q.detached_window_available()&&u.remove_html_class(t),o||(_=e.data("pos")),"show_rulers"==t?F.get_local_window_function("hide_rulers")():"dock_folders_left"===t||"dock_styles_left"===t||"dock_editor_left"===t||"detach_preview"===t||"dock_wizard_right"===t||"dock_settings_right"===t?q.toggle_layout_view(t,a,"dock_wizard_right"===t||"dock_settings_right"===t?"right":"left",s):"enable_beaver_builder"===t?(v&&!s.uiCorrection&&p.get("FLBuilder").deactivate(),F.stat.tvr.removeClass("FLBuilder_is_on")):"activate_elementor"===t?p.deactivate_builder("elementor"):"activate_oxygen"===t?p.deactivate_builder("oxygen"):"selname_code_synced"==t?F.selname_code_synced(r.$aliasTrigEl,a):"code_manual_resize"==t?(q.horizontal_only()&&(i=(l=F.stat.adaptableEditor).attr("id"),(c=O.eds[i])&&(i=c.session.getLength(),O.editor_update_height(c,l,16*i))),q.toolbar_adjusted(),F.close_context_menu({filter:".cm-editor-options"})):"hover_inspect"==t?F.iframe_functions_loaded()&&v.unbind_wizard_hover():"show_code_editor"==t?(O.prev_code_selector=!1,F.cancel_draft_selector_edit(!1),F.pref[t]=a,q.adjust_preview_margin_and_save_config({side:"left",skipSave:1}),F.default_to_tab("mq"),F.adjust_scroll_buttons(!1,"responsive"),!s.doNotAutoSelect&&v&&v.select_current_selector_elements({})):"mt_dark_mode"===t?O.updateAllEditorsTheme("light"):"auto_publish_mode"===t||("fullscreen"==t?I.disable_full_screen():"wizard_expanded"==t?(F.pref[t]=a,this.wizard_collapsed()):"show_suggestions_menu"===t?F.hide_suggestions_menu():"hide_interface"==t?(q.toolbar_adjusted(),"turnedOff"==F.tmp.hover_inspect&&(F.tmp.hover_inspect=!1,F.feature_on(!1,"hover_inspect",{noSave:1}))):"mt_highlight"===t||"expand_all_folders"===t&&F.open_close_all_folders("close"))),s.pref_sub_key?(F.pref[t][s.pref_sub_key]=a,n+="&pref_sub_key="+s.pref_sub_key):F.pref[t]=a,_&&F.refresh_tt(d,_,r.$aliasTrigEl),e.data("text-pos")&&(r=a?e.data("text-neg"):e.data("text-pos"),e.text(r)),o&&F.pseudo_updated(e,{toggle:1,turnOn:a}),"dock_wizard_right"!==t||a?"show_text_labels"===t?q.toolbar_adjusted():"mt_nonlog"===t?F.change_preview_url(F.stat.settingsMenu.find(".change-preview-url"),void 0,!0):"specificity_preference"===t?F.specificity_toggled():"full_height_left_sidebar"!==t&&"full_height_right_sidebar"!==t||q.adjust_preview_margin_and_save_config({skipSave:1,skipPGPress:1,side:"full_height_left_sidebar"===t?"left":"right"}):F.default_to_tab("wizard"),s.noSave||P.save_ui_toggle_update(t,a,n),I.endT(arguments)},specificity_toggled:function(){F.stat.suggestionsAdvanced.find("input.sug-sel").add(F.stat.curCodeInput).each(function(){var e,t=D(this),s=t.attr("rel");I.isDefined(s)&&(e=("all_sel_suggestions"===s?TvrMT.data.prog:v.dom.sels).combo,(e=I.checkObject(e,[s]))&&(v.sort_selector_suggestions(e,parseInt(F.pref.specificity_preference)),e=I.checkObject(e,["0","value"]),I.isDefined(e)&&"all_sel_suggestions"!==s&&(t=t.closest(".code-suggestion").hasClass("in-focus"),F.suggestion_instances({action:["setInputs"],incCurCode:t,val:e,itemFilter:".code-suggestion.refKey-"+s}),t&&parseInt(F.pref.selector_auto_name)&&F.update_nice_name(!1,e,F.pref.selname_code_synced))))})},context_menu_data:!1,toggle_context_menu_using_atts:function(e){var t=e.data();t.$clicked=e,F.toggle_context_menu(t)},toggle_context_menu:function(e){e.$clicked.hasClass("on")?F.close_context_menu():F.show_context_menu(e)},show_context_menu:function(e){if(F.context_menu_data&&F.close_context_menu(),e.offset=e.offset||F.default_context_menu_offset(e.$clicked,e),e.$content=F.stat.contextMenu.find(e.filter),e.title=e.title||e.$content.data("title"),F.context_menu_data=e,!F.maybe_run_context_menu_callback("before_open",e))return!1;I.apply_offset(e.offset,F.stat.contextMenu);var t=F.stat.contextMenu.children(".mt-panel-header");e.hideHeader?t.addClass("header-hidden"):t.removeClass("header-hidden"),F.stat.contextMenu.find(".mt-panel-title").first().text(e.title),F.stat.contextMenu.children().not(e.$content).removeClass("show"),e.$content.addClass("show"),F.stat.contextMenu.addClass("show expanded"),e.relatedto&&F.stat.contextMenu.data("relatedto",e.relatedto),e.$clicked.addClass("on"),F.maybe_run_context_menu_callback("after_open",e),F.context_menu_data=e},close_context_menu:function(e){var t=F.context_menu_data;return(!(e=e||{}).filter||e.filter===t.filter)&&(!!F.maybe_run_context_menu_callback("before_close",t)&&(F.stat.contextMenu.removeClass("show expanded").data("relatedto",""),I.isDomEl(t.$clicked,!0,t.clickedDoc)&&t.$clicked.removeClass("on"),F.maybe_run_context_menu_callback("after_close",t),void(F.context_menu_data=!1)))},maybe_run_context_menu_callback:function(e,t){var s=I.checkObject(t,[e]),e=!0;return!1!==(e=s?s.apply(this,[t]):e)},default_context_menu_offset:function(e,t){var s=e.offset(),r=t.noOffsetSpacing?0:10,a=e.outerWidth(),o=e.outerHeight(),n=t.noWidthOffset?0:a,i=t.noHeightOffset?0:o,e=(t.noFlipWidthOffset,t.noFlipHeightOffset,0),a=0,o=0;"Chrome"!==F.browser&&"Edge"!==F.browser||(e=.5);n={top:s.top+i+r,left:s.left+e+n+r,bottom:"auto",right:"auto"};t.adjustForParentWindow&&(l=F.stat.iframe.offset(),c=v.stat.win,a=l.top-c.scrollY,o=l.left-c.scrollX,n.top=n.top+a,n.left=n.left+o);var l=F.stat.win,c=l.innerWidth,l=l.innerHeight;return n.top+285>l&&(n.bottom=l-(s.top+a)+r,n.top="auto"),n.left+500>c&&(n.right=c-(s.left+o)+r,n.left="auto"),n},show_suggestions_menu:function(e){F.show_context_menu({filter:".cm-suggestions",$clicked:e,clickedDoc:v.stat.doc,adjustForParentWindow:1,noOffsetSpacing:1,noWidthOffset:1,hideHeader:!0}),F.pref.show_suggestions_menu=1},hide_suggestions_menu:function(){F.close_context_menu();var e=v.stat.frontendControls.find(".show-suggestions-icon");I.isDomEl(e,!0,v.stat.doc)&&e.removeClass("on"),F.pref.show_suggestions_menu=0},generate_selector_variations:function(e){var t=TvrMT.data.prog.selector_variations,s=Object.keys(t),r=e.M,a=I.custom_escape_quotes(F.curSelCSS),o=/(?:(\:hover)|(\:focus))$/,n=a.match(o),i="normal",l=F.get_all_selector_code(!0),c={},d='<div class="selector-variation-items fake-radio-parent">';n&&(i=n[1]||n[2]);for(var _=0;_<s.length;_++){var u,p,g=s[_],f=g===i;if(c[g]={label:t[g].label},f)u=r.selectorCode,c[g]={code:u,existing:{id:F.selInFocusID.replace(/^opts-/,"strk-"),sName:r.selectorH}};else{switch(g){case"normal":u=a.replace(o,"");break;case":hover":case":focus":u="normal"===i?a+g:a.replace(o,g)}for(var m in c[g].code=u,l)!l.hasOwnProperty(m)||"hand_coded_css"!==(p=l[m]).type&&u===p.code&&(p.id=m,c[g].existing=p)}var v=TvrMT.data.templates.variation_radio,h=f?" in-focus":"",b=u,f='data-code="'+u+'" data-key="'+g+'"';c[g].existing&&(h+=" variation-exists",b+=" ("+c[g].existing.sName+")",f+='data-id="'+c[g].existing.id+'"'),d+='<div class="mt-variation-item mt-variation-option '+h+'" '+(f+=' title="'+b+'"')+">"+v+'<span class="variation-label mt-variation-option">'+t[g].label+"</span></div>"}d+="</div>",e.$content.find("#mt-selector-state-options").html(d)},switch_selector_variation:function(e){var t=e.closest(".mt-variation-item"),s=t.data(),e=I.convert_to_param(s.key,"");t.addClass("in-focus").siblings().removeClass("in-focus"),F.clear_css_filters(!0),s.id?F.resume_existing_or_set_draft_selector(!1,{},{existingSelector:{id:s.id},forceResume:!0}):(F.toggle_feature(F.stat.cssModifiers.find(".filter-"+e)),F.feature_on(!1,"create_additional_selector"),F.sug_sel_updated({val:s.code,stateSelectorSet:1}))},wizard_expanded:function(){F.default_to_tab("wizard"),F.maybeUpdateInspectorPanels({updateComputed:1,updateStyles:1,updateHTML:1})},wizard_collapsed:function(){},after_animation:function(e,s){var t="transition"===s.type?"transitionend.tvr webkitTransitionEnd.tvr oTransitionEnd.tvr otransitionend.tvr MSTransitionEnd.tvr":"oanimationend.tvr animationend.tvr webkitAnimationEnd.tvr";e.on(t,function(e){var t=TvrMT.integrate.elementor.newResponsiveMode?"margin-left":"left";"elementorLeftPanelAdjusted"!==s.aspect||e.originalEvent.propertyName!==t&&"width"!==e.originalEvent.propertyName||p.builderLeftPanelAdjusted("elementor",!0),"elementorRightPanelAdjusted"===s.aspect&&"width"===e.originalEvent.propertyName&&p.builderRightPanelAdjusted("elementor",TvrMT.integrate.elementor.doUpdatePreviewForRightPanel())})},selname_code_synced:function(e,t){var s="selname_code_synced"==e.attr("id")?"wizard":"existing-sel",r=!!t,a=("wizard"==s?F.stat.curCodeInput:e.closest(".mt-folder-form").find(".selector-css-textarea")).val();a&&(t="wizard"==s?F.get_selector_in_focus():F.context_menu_data.M,F.doNotResizeInputs=!0,t&&(F.ignoreSelector=t.sectionSlug+"_"+t.selectorSlug),"wizard"==s?F.update_nice_name(!1,a,r):e.closest(".mt-folder-form").find("input.selector-name-input").val(F.format_nice_name(a,r)),F.ignoreSelector=!1,F.doNotResizeInputs=!1)},filter_favourited:function(e,t,s){},filter_un_favourited:function(e,t,s){},toggle_screen_preview:function(e){I.startT(arguments),((e=e.closest("li.mt-screen-preview")).hasClass("clicked")?F.get_local_window_function("unset_screen_preview"):F.get_local_window_function("set_screen_preview"))(e,"clicked"),I.endT(arguments)},screen_width_adjusted:function(e,t){I.startT(arguments),F.iframe_functions_loaded()&&(F.post_screen_width_adjusted(e,t),I.action_after_timeout("screen_width_adjusted",550,{item:F.post_screen_width_adjusted,args:[e,t]})),I.endT(arguments)},post_screen_width_adjusted:function(e,t){t=t||{updateComputed:1,updateStyles:1},v.reposition_overlays({con:e,scroll:0}),v.getAndUpdateCompStyles(!1,!1),t.skip||F.maybeUpdateInspectorPanels(t)},map_formatted_comp:function(e,t,s,r,a,o,n,i,l){var c;if(I.startT(arguments),c=l?F.intelliCompProps:F.compProps,"straight"==s&&("var"==t?c[e[r]]=o:(0==a&&(c[e[r]]=[]),c[e[r]][a]=[],c[e[r]][a].val=o,c[e[r]][a].htmlString=n)),"array"==s){var d,_=-1,u=e[r];for(d in u)u.hasOwnProperty(d)&&("var"==t?c[u[d]]=i[++_]:(0==a&&(c[u[d]]=[]),c[u[d]][a]=[],c[u[d]][a].val=i[++_],c[u[d]][a].htmlString=n))}l?F.intelliCompProps=c:F.compProps=c,I.endT(arguments)},format_exceptions:function(e,t,s,r,a,o){var n,i,l,c,d,_,u,p,g,f,m,v;if(I.startT(arguments),"var"==a?n=s:s[r]&&(n=s[r].val,i=s[r].htmlString),!I.hasValue(n))return!1;"font-family"==t||"display"==t||"grid-template-areas"==t||"list-style-type"==t||"border-top-left-radius"==t||"border-top-right-radius"==t||"border-bottom-right-radius"==t||"border-bottom-left-radius"==t?F.map_formatted_comp(e,a,"straight",t,r,n,i,[],o):"text-shadow"==t||"box-shadow"==t?((_=n.match(/(-?\d+px)|(rgba?\(.+\))/g))?"MSIE"!=F.browser&&(p=_[1],l=_[2],d=I.replace_decimals(_[0],1),c=_[3],"text-shadow"==t?_=[p,l,c,d]:"box-shadow"==t&&(_=[p,l,c,_[4],d,_[5]])):(_=[0,0,0,"none"],"box-shadow"==t&&(_[3]=0,_[4]="none",_[5]="")),F.map_formatted_comp(e,a,"array",t,r,n,i,_,o)):"list-style-image"==t?F.map_formatted_comp(e,a,"straight",t,r,I.basename(n),i,[],o):"background-img-full"==t?((g=[])[0]=I.extract_str("bg-image",n),(f=I.extract_str("gradient",n))?(u=/gradient\((.+)\)/.exec(f))?(p=u[1],l=I.get_all_matches(p,/rgba?\([^)]+\)/g,0),c=I.replace_all_matches(p,l,"xxx").split(", "),d="",0<=n.indexOf("webkit")&&(d="webkit-"),u=!(_="top to bottom"),-1<c[p=m=0].indexOf("deg")&&(_=e.keys[d+"gradient-angle"][c[0]],u=!0,p=1),g[1]=_,g[2]=l[m],u&&3<c.length||!u&&2<c.length?(p=c[++p].split(" "),g[3]=l[++m],g[4]=p[1],g[5]=l[++m]):(g[3]=l[++m],g[4]="0",g[5]="none")):-1<f.indexOf("svg")&&(g[1]="IE9 can't report",g[2]="IE9 can't report",g[3]="IE9 can't report",g[4]="IE9 can't report",g[5]="IE9 can't report"):(g[1]="none",g[2]="none",g[3]="none",g[4]="0",g[5]="none"),F.map_formatted_comp(e,a,"array",t,r,n,i,g,o)):"background-position"==t?(m=(v=n.split(", "))[0].split(" "),f=e.keys["background-position-x"][m[0]],g=e.keys["background-position-y"][m[1]],f=f||m[0],m=g||m[1],F.map_formatted_comp(e,a,"straight",t,r,f+" "+m,i,[],o)):"background-repeat"!=t&&"background-attachment"!=t&&"background-size"!=t&&"background-clip"!=t||(v=n.split(", "),F.map_formatted_comp(e,a,"straight",t,r,v[0],i,[],o)),I.endT(arguments)},filter_css_exceptions:function(e){var t;I.startT(arguments),t=e?F.intelliCompProps:F.compProps;var s,r=TvrMT.data.prog.propExc,a=0;for(s in t)if(t.hasOwnProperty(s)){++a;var o=t[s];if(o===Object(o))for(var n in o)o.hasOwnProperty(n)&&F.format_exceptions(r,s,o,n,"obj",e);else F.format_exceptions(r,s,o,"","var",e)}return I.endT(arguments),a},refresh_comp_css:function(h){if(I.startT(arguments),!F.iframe_functions_loaded())return I.endT(arguments),!1;var e=!!h;if(h=h||D("#"+F.selInFocusID),!e&&!I.isDomEl(h))return I.endT(arguments),!1;if(F.filter_css_exceptions(!1)<1){var t=TvrLang.null_selector;return h.find(".option-value").text(t),h.find("div.field-wrap").removeClass("mixed-cp").find("span.comp-style").text(""),void I.endT(arguments)}var t="div.field-wrap:not(.tvr-editor-area)",t=(F.pref.pg_focus?h.find("li.group-tag-"+F.pref.pg_focus):h).find(t),b=F.get_nth_focus();t.each(function(e){var t=D(this);if(!t.hasClass("group-label")&&!t.hasClass("sub-label")){var s=t.find(".option-label"),r=t.find(".option-value"),a=s.text(),o=t.find("span.comp-style"),n=t.find(".property-input"),i=n.val(),l=o.attr("class").split(" ")[1].replace("cprop-",""),c=l,d=s.data("prop"),_=TvrMT.data.prog.pg_tab_props.grid.griditems[d],s=TvrMT.data.prog.pg_tab_props.grid.allgriditems[d],d=s?1:b-1;F.propAliases[l]&&(l=F.propAliases[l]);var u=("grid"===F.pref.pg_focus&&0<b&&F.grid.items&&F.grid.items.length&&F.grid.items[d]&&(_||s)&&(h.find(".grid-tab-griditems").hasClass("active")||h.find(".grid-tab-allgriditems").hasClass("active"))?F.grid.items[d].comp:F.compProps)[l],s=!1,d=t.hasClass("has-variable-line");"event"===l?u=i||("animation"===F.pref.pg_focus?"page load":"unknown"):"event-target"===l?u=i||"self":"event-value"===l&&(u=i||"not set"),F.compProps[c]=u;var p=0;if(I.isDefined(u))if(u===Object(u)){t.addClass("mixed-cp"),F.update_comp_input_overlay(t,o,"[mix]");var g,f=TvrLang.value_varies,m="";for(g in u)u.hasOwnProperty(g)&&I.isDefined(u[g].val)&&(m+='<tr class="mixed-val" rel="'+p+'"><td>'+ ++p+"</td><td title='"+I.escapeHTML(u[g].htmlString)+"'>"+F.colored_box(u[g].val,!0)+"</td></tr>");t.find("table.comp-mixed-table").find("tbody").html(m)}else{f=u;t.removeClass("mixed-cp");var v=u;d||(u=F.truncate_displayed_comp_css(n,u)),t.hasClass("is-picker")?(s=!0,n="background-color:transparent","transparent"!=v&&"none"!=v&&(n="background-color:"+v,f=I.maybe_to_hex(v)),o.html('<span style="'+n+'"></span>')):F.update_comp_input_overlay(t,o,u)}else{f=TvrLang.style_not_applicable;"Content"==a&&(f=TvrLang.not_knowable),o.text("")}f=s?F.trans_gradient_box(v,"computed-color-box")+f:f;r.html(f)}}),h.addClass("visible-computed"),F.flexbox_dynamic_gui(h,{compProps:F.compProps}),"grid"===F.pref.pg_focus&&(d.update_nth_radios(),F.skipGridReflow?F.skipGridReflow=!1:d.itemResising||d.update_grid_canvas()),I.endT(arguments)},update_comp_input_overlay:function(e,t,s){var r;e.hasClass("has-variable-line")?(e=s.split(" "),r=e.length?e:[s],t.each(function(e){D(this).html(r[e])})):t.html(s)},flexbox_dynamic_gui:function(e,t){t.compProps["flex-direction"]&&(e=e.find("div.property-flexbox"),t=t.compProps["flex-direction"],e.removeClass("flex-direction-column flex-direction-column-reverse flex-direction-row-reverse"),I.in_array(t,["column","column-reverse","row-reverse"])&&e.addClass("flex-direction-"+t))},truncate_displayed_comp_css:function(e,t){I.startT(arguments);var s=e.width()/6;return s<t.length&&(t=t.substring(0,s)+"..."),I.endT(arguments),t},colored_box:function(e){if(!e||e.indexOf("rgb")<0||-1<e.indexOf(":"))return e;var t=I.maybe_to_hex(e),e=F.trans_gradient_box(e);return e+='<span class="colored-val">'+t+"</span>"},trans_gradient_box:function(e,t){var s=F.pref.mt_dark_mode?"trans-big-dark":"trans-big";return'<span class="'+(t=t||"colored-box")+'" style="background-image: linear-gradient(0deg, '+e+", "+e+"), url("+F.pluginUrl+"images/"+s+'.png)"></span>'},slugs_from_id:function(e){var t=e.split("-"),s=t[1],r=t[2],e=(e=I.checkObject(F.uiData,[s,r,"label"]))?e.split("|"):[];return!!t.length&&{sectionSlug:s,selectorSlug:r,selectorH:e[0],selectorCode:e[1]}},default_to_sel:function(e){I.startT(arguments);var t=I.checkObject(F.uiData,["non_section","meta","last_viewed_selector"]),t=!!t&&F.slugs_from_id(t);if(!(t=!(t&&I.checkObject(F.uiData,[t.sectionSlug,t.selectorSlug]))?T.modify_main_js_object("get_first_sel",{incRecurse:!1,callbackDepth:["selector"]}).slugs:t))return!1;F.tvr_iterate_selectors_v(!1,"strk-"+t.sectionSlug+"-"+t.selectorSlug,e),I.endT(arguments)},get_manual_wrap_class:function(e){return e.hasClass("mt-vl-input")?".vl-item":".tvr-input-wrap"},adjust_comp_span:function(e,t){I.startT(arguments);var s=this.get_manual_wrap_class(e);"after"==t?e.val()?this.remove_comp_overlay(e,s):this.add_comp_overlay(e,s):"hover"==t&&e.siblings("span.comp-style:not(.comp-for-picker)").addClass("hidden"),I.endT(arguments)},add_comp_overlay:function(e,t){e.closest(t).removeClass("manual-val"),e.siblings("span.comp-style:not(.comp-for-picker)").removeClass("hidden")},remove_comp_overlay:function(e,t){e.closest(t).addClass("manual-val"),e.siblings("span.comp-style:not(.comp-for-picker)").addClass("hidden")},chain_is_on:function(e){return I.isDomEl(e.subgroup.find("input.chained-tracker"))},sync_fields:function(e,a,o){I.startT(arguments);var t=F.get_subgroup_or_tabgroup(a,"inputs"),n=e.val(),i=!1;t.not(e).not(".vl-name-input").each(function(e){var t,s=D(this),r=s.closest(".property-tag");s.hasClass("color")?(s.hasClass("bound")||F.colorpicker_bind(s.parent()),n?F.maybe_set_variable_color(n,s,!1,!0,!1)||F.update_spectrum(n,s,{},!1):F.clear_spectrum_inputs(F.get_meta(s,"property"))):(s.val(n),I.isDefined(o)&&(t=F.get_meta(s,"property"),m.apply_property_unit(n,n,o,r,t.groupSlug,t.propertySlug,{writeToLabel:1,writeToInput:1,trail:T.get_property_data(t).propLevels}))),0<e&&""===n&&r.hasClass("has-variable-line")&&(F.delete_variable_field(r,s,a,!1),i=!0),F.post_edit(s)}),i&&F.adjust_grid_line_scroll_buttons(a),I.endT(arguments)},maybe_sync_fields:function(e,t){var s;I.startT(arguments),e.hasClass("autofillable")&&(s=F.get_meta(e,"property"),F.chain_is_on(s)&&F.sync_fields(e,s,t)),I.endT(arguments)},sync_important:function(e,s){I.startT(arguments),F.chain_is_on(e)&&F.get_subgroup_or_tabgroup(e).not(e.property).each(function(e){var t=D(this).find("span.important-toggle");("add"==s&&!t.hasClass("active")||"remove"==s&&t.hasClass("active"))&&F.input_icon_toggle(t,!0)}),I.endT(arguments)},run_input_updated:function(e,t){var s=e.attr("class"),r=!1;if(!s)return!1;if(0<=s.indexOf("property-input")){F.inputWaitingObj=e;var a=F.get_meta(e,"property"),o=e.val(),n=o&&0===o.indexOf("=");if(n)if(!F.process_excel_function(o,a.propertySlug).converted)return F.post_edit(e),!0;F.maybe_sync_fields(e),F.post_edit(e)}else if(0<=s.indexOf("selector-name-input")||0<=s.indexOf("selector-css-textarea"))r=!0,F.pref.selname_code_synced&&e.closest(".mt-folder-form").find(".selector-name-input, .selector-css-textarea").not(e).val(e.val());else if(0<=s.indexOf("sp-input")){n=F.get_related_meta("picker",e.closest(".sp-container")),o=F.inputWaitingObj=n.$input;if(-1<s.indexOf("sp-input-opacity")){a=e.val();if(isNaN(a)||a<0||1<a)return;o.mtspectrum("get")||o.mtspectrum("set",n.$container.find(".sp-input-rgb").val());n=o.mtspectrum("get").toRgb();n.a=a,o.mtspectrum("set",n),F.update_spectrum_inputs(tinycolor(n),o,e,!0)}else-1<s.indexOf("sp-input-var")?F.maybe_set_variable_color(e.val(),o,e,!0):F.update_spectrum(e.val(),o,e,!0)}r||F.set_input_timer()},maybe_set_variable_color:function(e,t,s,r,a){a=!I.isDefined(a)||a;var o,n,i=!E.isJustColor(e,!0)&&e;return i?(-1<i.indexOf("var(")?(n=E.get_variable_name(i))&&(o=E.get_variable_value(n,"css",!0)):-1<i.indexOf("$")&&(o=E.get_variable_value(n,"scss")),o&&F.update_spectrum(o,t,{},a,!0),s&&s.val(i),t.val(i),a&&F.maybe_sync_fields(t),!0):(r&&(F.update_spectrum(e,t,{},a,!0),t.val("")),!1)},bind_input_events:function(t){I.startT(arguments),F.unbind_input_events(t),t.on("input.tvr propertychange.tvr",function(e){F.run_input_updated(t,e)}),t.on("blur",function(){F.unbind_input_events(t)}),I.endT(arguments)},unbind_input_events:function(e){e.off("input.tvr propertychange.tvr")},update_input_width_and_scroll:function(e,t,s,r,a,o,n,i){var l,c,d,_;I.startT(arguments),(r||q.flexible_field_widths())&&(a=a||F.stat.inputWidthCalc,o=o||0,(d=e.val()).length,_=d.replace(/\s/g,"&nbsp;"),a.html(_),l=a.innerWidth()+o,c=i?e.parent():e,n?(d=I.isDefined(n[0])&&Array.isArray(n)?n[0]:"0px",_=I.isDefined(n[1])&&Array.isArray(n)?n[1]:"100%",c[0].style.cssText="width:clamp("+d+", "+l+"px, "+_+")"):c.width(l),s||F.adjust_scroll_buttons(F.get_pg_meta(),"style")),I.endT(arguments)},maybe_scroll_image_fields:function(e){"list"!==e.groupSlug&&"background"!==e.groupSlug||e.group.find(".bg-image-select").each(function(){I.scroll_input_end(D(this))})},done_typing:function(){if(F.isForbiddenProperty(F.inputWaitingObj))return!1;P.ajax_save_settings({$property:F.inputWaitingObj})},get_folders:function(){var s=[];return D("#tvr-menu").find(".section-tag").each(function(e){var t=F.get_meta(D(this),"section");s[e]={category:TvrLang.select_enter_folder,value:t.sectionH}}),s},get_label_suggestions:function(){var e,t=[],s=F.get_selector_in_focus();F.retargetSelector&&(e=F.retargetSelector.selectorH,t.push({category:TvrLang.original_label,value:e}));var r=F.format_nice_name(s.selectorCode,!1),s=F.format_nice_name(s.selectorCode,!1,!0);return r!==e&&t.push({category:TvrLang.label_suggestions,value:r}),s!==e&&s!==r&&t.push({category:TvrLang.label_suggestions,value:s}),t},ensure_targeting_is_on:function(e){e.bind_wizard_hover(),D("#hover-inspect-toggle").addClass("on")},default_to_folder:function(e){var t,s="";return s=F.retargetSelector?F.retargetSelector.sectionH:I.hasValue(F.selInFocusID)?F.get_meta(D("#"+F.selInFocusID),"selector").sectionH:(t=I.obj_index(0,F.uiData,"non_section"))?t.this.label:"",e&&F.stat.curSecInput.val(s),s},generalTargetingClassFlag:"targeting-or-retargeting",retargetClassFlag:"retarget_selector",selectorLabelEditingClassFlag:"editing-selector-label",adjustClassesOnAdminAndFront:function(e,t){"add"===e?(F.stat.tvr.addClass(t),v&&v.stat.html.addClass(t)):"remove"===e&&(F.stat.tvr.removeClass(t),v&&v.stat.html.removeClass(t))},selector_key_atts:function(e){return{sectionH:e.sectionH,sectionSlug:e.sectionSlug,selectorSlug:e.selectorSlug,selectorH:e.selectorH,selectorCode:e.selectorCode,id:e.selectorID,mid:e.selectorMID}},show_selector_label_edit:function(){F.selectorLabelEditing||F.stat.tvr.hasClass(F.generalTargetingClassFlag)||(F.stat.tvr.addClass(F.selectorLabelEditingClassFlag),F.selectorLabelEditing=F.get_hierarchy_input_values())},save_selector_label_edit:function(e){var t=F.get_meta(D("#"+F.selInFocusID),"selector"),s=F.stat.curSelInput.val(),r=F.selectorLabelEditing,s=D.extend(!0,{},r,{selectorH:s});if(!F.modify_selector_if_values_changed(t,!1,r,s))return!1;F.hide_selector_label_edit(e)},cancel_selector_label_edit:function(e){var t=F.stat.curSelInput;t.val(F.selectorLabelEditing.selectorH),F.size_hierarchy_inputs(t),F.hide_selector_label_edit(e)},hide_selector_label_edit:function(e){F.enable_selector_auto_name(!0),F.stat.tvr.removeClass(F.selectorLabelEditingClassFlag),F.selectorLabelEditing=!1,e||F.stat.curSelInput.trigger("blur")},retarget_selector:function(e){var t;I.startT(arguments),F.retargetSelector||(F.clean_tooltips(),t=e||D("#"+F.selInFocusID),t=F.get_meta_for_context(t,"selector"),F.is_cur("selector",t.selectorID)||F.tvr_iterate_selectors_v(t.selectorM),F.update_current_selector_controls(t),F.show_hierarchy_inputs(!0),F.retargetSelector=F.selector_key_atts(t),F.retargetSelector.initialModifySavePackage=!1,F.retargetSelector.initialFolderMoveSavePackage=!1,I.updateObject(F.uiData,[t.sectionSlug,t.selectorSlug],F.retargetSelector,{action:"append",key:"isDraftRetarget",data:F.retargetSelector}),F.feature_on(D("#hover-inspect-toggle"),"hover_inspect"),I.endT(arguments))},disable_selector_auto_name:function(){F.feature_off(D("#selector_auto_name"),"selector_auto_name",{noSave:1})},enable_selector_auto_name:function(e){F.feature_on(D("#selector_auto_name"),"selector_auto_name",{noSave:1,doNotUpdateField:e})},save_draft_selector:function(e,t,s,r){s=s||F.get_meta(D("#"+F.selInFocusID),"selector"),r=r||{savePackage:[]};var a=F.get_hierarchy_input_values(!1,!0),o=e?"isDraftRetarget":"isDraft",n=!e,i=e?"retarget":"new",a=F.modify_selector_if_values_changed(s,!0,s,a);if(!a)return!1;F.hide_hierarchy_inputs(),a.changedRequired&&(s=F.get_meta(D("#"+F.selInFocusID),"selector")),r.user_action=I.checkObject(F.draft_user_action,[i,"user_action"]),n?r.savePackage.push({action:"append",trail:[s.sectionSlug],key:s.selectorSlug,data:I.checkObject(F.uiData,[s.sectionSlug,s.selectorSlug])}):e&&(F.retargetSelector.sectionSlug!==s.sectionSlug&&s.sectionH,F.retargetSelector.M=F.selector_key_atts(s),Array.prototype.push.apply(r.savePackage,F.surgically_adjust_retarget_save_packages(F.retargetSelector))),T.updateObjectAndSavePackage(r.savePackage,{action:"delete",trail:[s.sectionSlug,s.selectorSlug],key:o}),F.resetDraftTrackers(e,!0),F.save_last_viewed_selector(F.selInFocusID),!F.doNotReselectRevertedRetargetSel&&v&&v.select_current_selector_elements({scroll:!1}),t&&P.ajax_save_settings({settings:r})},clean_duplicate_save_packages:function(e,t){for(var s={},r=e.length-1;0<=r;r--){var a=e[r],o=a.trail.join(".");a[t]&&(s[o]?e.splice(r,1):s[o]=1)}},surgically_adjust_retarget_save_packages:function(e){if(!e.initialModifySavePackage)return[];var t=e,s=(e.M,e.initialModifySavePackage),r=e.lastModifySavePackage||s,a=e.initialFolderMoveSavePackage,e=e.lastFolderMoveSavePackage||a,a=F.findReplaceSavePackages(s,{returnRenameOrder:1}).order,s=[];return r&&(F.findReplaceSavePackages(r,{origAtts:t,origSelectorOrder:a,replaceTrailOnLabelCodeUpdate:1,applyOrigAttsToRename:1,applyOrigSectionToSelectorReplace:1}),Array.prototype.push.apply(s,r)),e&&(F.findReplaceSavePackages(e,{origAtts:t,applyOrigAttsToDeleteSelector:1}),Array.prototype.push.apply(s,e)),s},findReplaceSavePackages:function(e,t){for(var s={},r=t.origAtts||{},a=0;a<e.length;a++){var o=e[a];switch(o.action){case"array_merge_recursive_distinct":t.replaceTrailOnLabelCodeUpdate&&I.checkObject(o,["data","label"])&&F.replaceInTrail(o.trail,r.sectionSlug,r.selectorSlug);break;case"rename":t.returnRenameOrder?s.order=o.order:t.applyOrigAttsToRename&&(o.key=r.selectorSlug,o.order=t.origSelectorOrder,F.replaceInTrail(o.trail,r.sectionSlug,!1,-1));break;case"reorder":break;case"replace":t.applyOrigSectionToSelectorReplace&&o.fullSelectorUpdate&&F.replaceInTrail(o.trail,r.sectionSlug);break;case"delete":t.applyOrigAttsToDeleteSelector&&F.replaceInTrail(o.trail,r.sectionSlug,!1,-1)}}return s},replaceInTrail:function(e,t,s,r,a){t&&e.splice(r=void 0!==r?r:-2,1,t),s&&e.splice(-1,1,s)},go_to_code_view_selector_line:function(e,t){var s=O.eds["adaptable-editor"],r=e.code;s.gotoLine(e.line,0,!1),s.navigateLineEnd(),t&&v.reposition_overlays({scroll:1,con:"resume-existing-code-sel",css:r}),O.prev_code_selector=r},should_resume_existing_draft:function(e,t){return"GUI"===t&&F.draftSelector.atts.mid===e.id},resume_existing_or_set_draft_selector:function(e,t,s){I.startT(arguments);var r,a,o,n=s.existingSelector||!(!v.isUsingExistingSel()||!t.mSels)&&t.mSels[0];n&&(s.forceResume||!F.retargetSelector&&!s.customCSSVal)?(r=F.pref.show_code_editor?"code":"GUI",a="code"==(o="hand_coded_css"===n.type?"code":"GUI"),F.should_resume_existing_draft(n,o)||F.cancel_draft_selector_edit(a,{elementAlreadySelected:"code"==o}),"GUI"==o?F.tvr_iterate_selectors_v(!1,n.id,{scroll:s.scroll,elementAlreadySelected:s.elementAlreadySelected,doNotUpdateSelectorSuggestions:s.doNotUpdateSelectorSuggestions}):F.go_to_code_view_selector_line(n,s.updateHighlighting),r!=o&&P.update_full_logs({short:"See "+(o="GUI"==o?o:"full code")+" view",long:"<p>An existing selector targets the element you selected, but it was created in the "+o+" view. To switch, go to <i>Settings > View > Full code editor</i> and adjust the toggle.</p>",type:"info"})):(F.show_hierarchy_inputs(F.retargetSelector),F.create_or_update_draft_selector(!1,!0,s)),I.endT(arguments)},create_or_update_draft_selector:function(e,t,s){I.startT(arguments);var r=F.get_hierarchy_input_values(e,t);if(!r)return!1;if(F.pref.show_code_editor){if(!F.pref.buyer_validated&&15<O.count_editor_selectors())return alert(TvrLang.trial_notice),!1;r.selectorCode&&O.insert_code_view_selector(r.selectorCode)}else{var a=F.getOrCreateFolder(r.sectionH,t);if(!a)return!1;if(F.retargetSelector||F.draftSelector.atts.id){var o=F.get_meta(D("#"+F.selInFocusID),"selector");if(!F.modify_selector_if_values_changed(o,t,o,{sectionSlug:r.sectionSlug,sectionH:r.sectionH,selectorSlug:I.convert_to_param(r.selectorH),selectorH:r.selectorH,selectorCode:r.selectorCode}))return!1}else if(F.get_set_selector_values({action:"set",target:"popup",context:"add",label:r.selectorH,code:r.selectorCode,M:a}),!F.add_selector(a,F.stat.addSelectorForm,t))return!1}I.endT(arguments)},get_hierarchy_input_values:function(e){var t,s=F.stat.curSecInput.val();I.hasValue(s)||F.default_to_folder(F.stat.curSecInput),e?t=F.format_nice_name(e,F.pref.selname_code_synced):(t=F.stat.curSelInput.val(),e=(e=F.stat.curCodeInput.val())||I.checkObject(v,["dom","sels","final",0,"code"]),t||e&&(t=F.format_nice_name(e,F.pref.selname_code_synced)));var r,a=I.convert_to_param(s);return F.uiData[a]&&I.obj_length(F.uiData[a],{exclIfDraft:1})>=F.maxSelsPerFolder&&(s=F.ensure_unique_name(r=s,!1,"folderWithSpace"),a=I.convert_to_param(s),F.notifyFolderLimit={short:tvrsprintf(TvrLang.notify_folder_limit_short,F.maxSelsPerFolder-1),long:"<p>"+tvrsprintf(TvrLang.notify_folder_limit_long,s,r)+"</p>",type:"info"}),{sectionSlug:a,sectionH:s,selectorSlug:I.convert_to_param(t),selectorH:t,selectorCode:e}},get_set_selector_values:function(e){var t,s,r,a;if("M"===e.target?"get"===e.action&&(r=e.M.selectorH,a=e.M.selectorCode):"popup"===e.target?(t=(s=F.stat[e.context+"SelectorForm"]).find(".selector-name-input"),s=s.find(".selector-css-textarea"),"get"===e.action?(r=s.val(),a=s.val()):"set"===e.action&&(t.val(e.label),s.val(e.code))):"hiddenInput"===e.target&&(t=e.M.selectorM.find(".selector-label"),"get"===e.action?(r=(s=t.val().split("|"))[0],a=s[1]):"set"===e.action&&t.val(e.label+"|"+e.code)),"get"===e.action)return{label:r,code:a}},modify_selector_if_values_changed:function(e,t,s,r){var a=s.sectionH!==r.sectionH&&r.sectionH,o=s.selectorH!==r.selectorH,n=s.selectorCode!==r.selectorCode,s={};return!((a||o||n)&&(s.changedRequired=!0,F.get_set_selector_values({action:"set",target:"popup",context:"edit",label:r.selectorH,code:r.selectorCode,M:e}),!F.action_modify_selector(e,F.stat.editSelectorForm,{},a,!1,t)))&&s},delete_draft_selector:function(){var e,t;F.draftSelector.atts.id&&(e=D("#"+F.draftSelector.atts.id),I.isDomEl(e)&&(t=F.get_meta(e,"selector"),F.action_delete_selector(t,!0))),F.draftSelector.ace.range&&F.pref.show_code_editor&&((t=F.draftSelector.ace).editor.session.replace(t.range,""),F.draftSelector.ace={})},get_hierarchy_inputs:function(){return F.stat.curSecInput.add(F.stat.curSelInput).add(F.stat.curCodeInput)},show_hierarchy_inputs:function(e){var t=F.generalTargetingClassFlag;e&&(t+=" "+F.retargetClassFlag),F.adjustClassesOnAdminAndFront("add",t),F.size_hierarchy_inputs(F.stat.curCodeInput,!0)},size_hierarchy_inputs:function(e,s){(e=e||F.get_hierarchy_inputs()).each(function(){var e=D(this),t=!1;"code-hierarchy-input"===e.attr("id")&&(t=F.stat.codeInputWidthCalc),F.update_input_width_and_scroll(e,0,!0,!0,t,2),s&&I.scroll_input_end(e)})},hide_hierarchy_inputs:function(){var e=F.generalTargetingClassFlag+" "+F.retargetClassFlag;F.adjustClassesOnAdminAndFront("remove",e)},resetDraftTrackers:function(e,t){e?(F.retargetSelector=!1,F.draft_user_action.retarget={}):(F.draftSelector.atts={},F.draft_user_action.new={}),F.clean_draft_folders(),F.get_set_selector_values({action:"set",target:"popup",context:"add",label:"",code:""}),t&&F.clear_css_filters(!0),F.enable_selector_auto_name(!0),F.feature_off(!1,"create_additional_selector")},clean_draft_folders:function(){for(var e=F.draftFolders.length-1;0<=e;e--){var t=F.draftFolders[e],s=I.checkObject(F.uiData,[t]);1<I.obj_length(s)||(t=D("#strk-"+t),I.isDomEl(t)&&(t=F.get_meta(t,"section"),F.action_delete_section(t,!0))),F.draftFolders.splice(e,1)}},cancel_draft_selector_edit:function(e,t){if(F.hide_hierarchy_inputs(),F.retargetSelector){var s=F.retargetSelector,r=F.get_meta(D("#"+F.selInFocusID),"selector"),a=r.sectionSlug!==s.sectionSlug&&s.sectionH;if(F.update_current_selector_controls(!1,s),I.updateObject(F.uiData,[r.sectionSlug,r.selectorSlug],!1,{action:"delete",key:"isDraftRetarget"}),F.get_set_selector_values({action:"set",target:"popup",context:"edit",label:s.selectorH,code:s.selectorCode,M:r}),!F.action_modify_selector(r,F.stat.editSelectorForm,{},a,!1,!1,!0))return!1;!F.doNotReselectRevertedRetargetSel&&v&&v.select_current_selector_elements({scroll:!1})}else F.delete_draft_selector(),e&&F.default_to_sel(t);F.resetDraftTrackers(F.retargetSelector,!0)},update_current_selector_controls:function(e,t){var s=(e||t).sectionH,r=(e||t).selectorH,t=(e||t).selectorCode;F.stat.curSecTrailText.text(s),F.stat.curSecInput.val(s),F.update_and_scroll_input(F.stat.curSelInput,r),F.stat.curCodeInput.is(":focus")||F.update_cur_code(t),F.size_hierarchy_inputs()},human_tagname:function(e){I.startT(arguments);var t={h1:"heading 1",h2:"heading 2",h3:"heading 3",h4:"heading 4",h5:"heading 5",h6:"heading 6",p:"paragraph",br:"line break",hr:"horizontal rule",abbr:"abbreviation",b:"bold",em:"emphasis",i:"emphasis",ins:"insert",pre:"preformatted",q:"quote",sub:"subscript",sup:"superscript",optgroup:"option group",img:"image",figcaption:"figure caption",a:"link",ul:"unordered list",ol:"ordered list",li:"list item",th:"table heading",tr:"table row",td:"table data",thead:"table head",tbody:"table body",tfoot:"table foot",col:"column",colgroup:"column group"};return I.endT(arguments),t[e]||e},human_pseudo:function(e){var t,s=I.pseudo_str_to_arr(e),r="";for(t in s)s.hasOwnProperty(t)&&(r+=s[t].replace(/^:nth\-(?:child|of\-type)\((.*)\)$/,"#$1").replace(/^:nth\-last\-(?:child|of\-type)\((.*)\)$/,"#-$1").replace("link","unvisited"));return r?" ("+r+")":""},humanize:function(e,t,s){I.startT(arguments),(s=s||{}).keepPre=s.keepPre?e:"";var r=new RegExp("("+e+")([_a-zA-Z0-9"+e+"\\(\\)\\[\\]=\\^\\*'\"\\/\\$~-]+)","g"),a=new RegExp(e,"g");return t=t.match(r),I.endT(arguments),t=t&&t[0]?t[0].replace(a,s.keepPre):"",(t=!s.keepDashes?t.replace(/[-_]+/g," "):t).trim()},ensure_no_unique_sel_name_alert:function(){var e=F.stat.curSelInput,t=e.val(),s=F.ensure_unique_name(t,!1,"create-new");t!==s&&e.val(s)},ensure_unique_name:function(e,t,s,r){I.startT(arguments);var a=1,o="create-new"==s?F.get_all_selector_code(!0):{};do{var n=!1,i=new RegExp(" _\\d+$"),l=e.match(i)?(1===a&&(a=2),e.replace(i," _"+a)):1<a?e+" _"+a:e,c=I.convert_to_param(l);if("folderName"==s)n=F.uiData[c];else if("folderWithSpace"==s)n=F.uiData[c]&&I.obj_length(F.uiData[c])>=F.maxSelsPerFolder;else if("import"==s)n=r.unqSels[c]&&r.unqSels[c].code!=t;else if("create-new"==s)for(var d in o)if(o.hasOwnProperty(d)&&I.convert_to_param(o[d].sName)==c){n=!0;break}}while(a++,n);return I.endT(arguments),l},human_css_name:function(e,t){I.startT(arguments);var s=[],r=!1,a=(e=e&&(r=e.match(/.bricks-is-frontend\s+(.+?),/))?r[1]:e).split(","),o=F.sel_trail(a[0]).pieces.reverse();for(n in o)o.hasOwnProperty(n)&&(s[n]={level:0==n?"child":"parent",tagName:o[n].split(/[#:\.]/)[0],id:F.humanize("#",o[n]),class:F.humanize("\\.",o[n]),pseudo:F.human_pseudo(o[n])});var n,i,l,c,d=[];for(n in s)s.hasOwnProperty(n)&&(i=c="",l=s[n],c=F.human_tagname(l.tagName),l.pseudo&&(i=""+l.pseudo),l.id?d[n]=l.id:l.class?d[n]=l.class:d[n]=c,d[n]+=i);var _="";a[1]&&(_="+"+(a.length-1)+" "+TvrLang.more,d.unshift(_)),I.endT(arguments);a=d[0];var u=_?3:2;t&&--u;var p,g=[];for(p in d)if(d.hasOwnProperty(p)){if(u<=p)break;g.push(d[p])}_=g.reverse().join(" ");return""===_&&(_=TvrLang.untitled),r&&(_+=" [BGW]"),F.ensure_unique_name(_,e,"create-new")},code_or_fallback:function(e){return e||F.intelli_css},format_nice_name:function(e,t,s){return e=this.code_or_fallback(e),t?e:I.capitalizeFL(F.human_css_name(e,s))},update_nice_name:function(e,t,s){e=e||this.format_nice_name(this.code_or_fallback(t),s),this.update_and_scroll_input(F.stat.curSelInput,e)},update_cur_code:function(e){this.update_and_scroll_input(F.stat.curCodeInput,e)},update_and_scroll_input:function(e,t){e.val(t),F.doNotResizeInputs||F.size_hierarchy_inputs(e),I.scroll_input_end(e)},maybe_auto_select_label:function(e){e=e||D("#sel-hierarchy-input");var t=F.stat.suggestionsAdvanced.find(".code-suggestion.in-focus").find("input.sug-sel"),s=F.stat.cssModifiers.find("input.cssfilter-combo:focus"),r=D("#wizard_inspector_html").find("textarea:focus");F.pref.selname_code_synced||t.is(":focus")||s.length||r.length||TvrMT.integrate.elementor||e.trigger("select")},set_initial_size_of_nth_modifier_inputs:function(){D("#cm-css-filters").find(".cssfilter-combo").each(function(){F.update_input_width_and_scroll(D(this),0,!0,!0,F.stat.codeInputWidthCalc)})},pseudo_updated:function(e,c){var d=e.closest("li");c.input&&F.update_input_width_and_scroll(e,0,!0,!0,F.stat.codeInputWidthCalc);e=F.stat.suggestionsAdvanced.find(".code-suggestions");c.turnOn&&F.existingSelSelected&&F.sug_css_clicked(e.find(".code-suggestion:first-child").find(".sugsel-radio")),e.find(".code-suggestion").each(function(e){c.manual=1,c.$li=d;var t=D(this),s=t.find(".sug-sel"),r=s.attr("rel"),a=t.data("level");I.isDefined(a)||(a=0);var o=v.apply_css_filters(s.val(),v.dom.search.nodes[a],v.dom,c),t=F.stat.suggestionsMenu.find(".code-suggestion:nth-child("+(e+1)+")").find(".sug-sel"),t=s.add(t);if(t.val(o.code),!v.dom.sels.final[e]||v.dom.sels.final[e].refKey!==r)return!0;v.dom.sels.final[e].code=o.code,t.each(function(){D(this).get(0).scrollLeft=s.get(0).scrollWidth});var n=s.attr("rel");if(n&&v.dom.sels.combo[n])for(var i=0;i<v.dom.sels.combo[n].length;i++){var l=v.dom.sels.combo[n][i],l="object"==typeof l?l.value:l,o=v.apply_css_filters(l,v.dom.search.nodes[a],v.dom,c);v.dom.sels.combo[n][i]=o.code}});e=e.find(".code-suggestion:first-child, .code-suggestion.in-focus");e.length?(e=(e=(e=e.filter(".in-focus"))||e[0]).find("input"),F.sug_sel_updated({$editedField:e,val:e.val(),pseudoUpdated:1})):I.isDomEl(v.triggerEl)&&v.select_element(v.triggerEl,{forceHighlight:1})},maybe_run_code_or_synced_label_field_edited:function(e,t){var s,r=e.hasClass("code-hierarchy-input"),a=F.pref.selname_code_synced&&e.hasClass("sel-hierarchy-input");(r||a)&&(s=e.val(),F.pref.selname_code_synced&&(r?F.stat.curSelInput:F.stat.curCodeInput).val(s),F.sug_sel_updated({$editedField:e,val:s,suggestionCustomised:!t,syncedLabelFieldEdited:a,codeFieldEdited:r,topFieldEdited:1,comboSelected:!!t,topComboSelected:1,ui:t}))},suggestion_instances:function(e){var t=e.exclItem||"#invalid",a=e.exclInput||"#invalid",s=e.itemFilter||".mt-selector-suggestion.in-focus",s=F.bothSuggestionAreas(s);e.incCurCode&&(s=s.add(F.stat.curCodeInput));var o=e.$items||s.not(t),r={$items:o};Array.isArray(e.action)||(e.action=[e.action]);for(var n=0;n<e.action.length;n++)!function(e,t,s){switch(e){case"getInputs":case"setInputs":var r=o.find("input[type=text]").addBack("input[type=text]").not(a);"setInputs"===e&&r.each(function(){var e=D(this);e.val(t.val),I.scroll_input_end(e)}),s.$inputs=r;break;case"getN":case"setN":r=o.find(".num-els-icon-wrap");"setN"===e&&r.html(F.num_els_icon(t.n)),s.$nWrap=r;break;case"radioSelection":o.closest(".radio-set-container").find(".mt-selector-suggestion").removeClass("hover-elsewhere in-focus"),o.addClass("in-focus")}}(e.action[n],e,r);return r},customCSSN:0,show_suggestion_refresh_icon:function(e,t,s){F.customCSSN=t,e&&e.siblings(".mt-clear-field").addClass("refresh-code-suggestions").attr("title",TvrLang.refresh_suggestions)},hide_suggestion_refresh_icon:function(e){F.customCSSN=0,e&&e.siblings(".mt-clear-field").removeClass("refresh-code-suggestions").attr("title","")},refresh_code_suggestions:function(e){v&&(e=e.siblings("input").val(),v.select_element(v.triggerEl,{suggestionCustomisedForNewEl:1,customCSSVal:e,forceHighlight:1}))},sug_sel_updated:function(e){var t=F.strip_beyoned_brace(e.val),s=e.$editedField,r=v.get_sel_elements({con:"sug_sel_updated",css:t}),a=r.n,o=r.$toEls,n=!I.in_array(t,v.dom.sels.final,!1,"code"),i=a&&n,l=a&&!r.triggerElInNewSelection,c=[],r={e:{},doNotFocusEditor:1,doNotUpdateDomSearch:!l,doNotUpdateSelectorSuggestions:1,customCSSVal:t,scroll:l,sugSelUpdatedConfig:e,notInSugList:n?t:void 0,suggestionCustomisedForNewEl:l,forceHighlight:1};if(e.radioSelection){n=e.isExisting?"mt-matching-item":"code-suggestion",l=e.$item.index();if(F.suggestion_instances({action:"radioSelection",itemFilter:"."+n+":nth-child("+(l+1)+")",val:t}),e.isExisting){l=e.$item.data();return F.doNotReselectRevertedRetargetSel=1,F.existingSelRadioUsed=1,F.resume_existing_or_set_draft_selector(v.triggerEl,v.dom,{existingSelector:l,forceResume:1,updateHighlighting:1,scroll:1,doNotUpdateSelectorSuggestions:1,elementAlreadySelected:0}),F.doNotReselectRevertedRetargetSel=!1,F.existingSelRadioUsed=0,void F.feature_off(!1,"create_additional_selector")}}F.intelli_css=t,e.suggestionCustomised&&i?F.show_suggestion_refresh_icon(s,a,t):F.hide_suggestion_refresh_icon(s),c.push("setN"),e.comboSelected&&I.scroll_input_end(e.$editedField),e.topComboSelected&&c.push("radioSelection"),c.push("setInputs");i=!1;e.comboSelected?i=".code-suggestion.refKey-"+e.ui.item.refKey:(e.topComboSelected||e.stateSelectorSet)&&(i=".code-suggestion:first-child"),F.suggestion_instances({action:c,val:t,n:a,incCurCode:1,exclInput:s,itemFilter:i}),parseInt(F.pref.selector_auto_name)?F.update_nice_name(!1,t,F.pref.selname_code_synced):F.ensure_no_unique_sel_name_alert(),v.select_element(o,r),F.previous_selector=t},default_code_suggestion:function(e,t,s){return t.intelli_css||t.customCSSVal||(e?e.code:s)},update_selector_suggestions:function(e){I.startT(arguments);for(var t="",s=[],r=0;r<v.dom.sels.final.length;r++){var a,o=v.dom.sels.final[r],n='data-level="'+o.level+'"',i=o.isCombo?" combobox has-arrows":"",l=i?'data-appto="#style-components"':"",c=o.isCombo?" combobox-has-arrows ":"",d=i?'<span class="combo-arrow"></span>':"",_=(i&&"x_plus"===o.refKey?"<sup>+</sup>":"")?"+":"",u=i?'rel="'+o.refKey+'"':"",p=I.regular_escape_quotes(o.code),g=o.n,f=r<1&&(F.retargetSelector||!v.dom.mSelsCount||e.customCSSVal)?" in-focus":"";r<1&&((p=F.default_code_suggestion(o,e,a=p))!==a&&(g=v.jquery_compat_sel_elements(p).length)),i?Array.prototype.push.apply(s,v.dom.sels.combo[o.refKey]):s.push(v.formattedSelSugItem(o,v.dom)),t+='<div class="code-suggestion mt-selector-suggestion refKey-'+o.refKey+f+'" '+n+">"+TvrMT.data.templates.new_sel_radio+'<span class="tvr-input-wrap'+c+'"><input type="text" spellcheck="false" class="sug-sel'+i+'" value="'+p+'" '+u+" "+l+" />"+d+'<span class="mt-clear-field"></span></span><span class="num-els-icon-wrap">'+F.num_els_icon(g,_)+"</span></div>"}F.redo_sug_sels(t,{advanced:1}),F.redo_sug_sels(t,{frontend:1}),e.selectCurrentSelector||(p=F.code_or_fallback(!1),parseInt(F.pref.selector_auto_name)?F.update_nice_name(!1,p,F.pref.selname_code_synced):F.ensure_no_unique_sel_name_alert(),F.update_cur_code(p),F.previous_selector=p),TvrMT.data.prog.combo.all_sel_suggestions=s,I.endT(arguments)},otherFilters:function(e,t){e=F.bothSuggestionAreas(".fav-filters").add("#cm-css-filters").find(e);return e=t?e.not(t):e},bothSuggestionAreas:function(e){var t=F.stat.suggestionsAdvanced.add(F.stat.suggestionsMenu);return e?t.find(e):t},redo_sug_sels:function(e,t){I.startT(arguments),t=t||{};var s=D(e),r=t.frontend?F.stat.suggestionsMenu:t.advanced?F.stat.suggestionsAdvanced:F.bothSuggestionAreas();r.find(".code-suggestions").html(s),I.endT(arguments)},num_els_icon:function(e,t){t=t||"";var s=I.isDefined(e)?e.toString():"0";return'<span class="num-els-icon'+(0===e?" el-targets-nothing":"")+'" title="'+(1===e?tvrsprintf(TvrLang.n_els,s):tvrsprintf(TvrLang.n_els_plural,s+t))+'">'+e+"</span>"},refresh_wizard_comp_css:function(){if(I.startT(arguments),I.isDomEl(v.triggerEl)){F.filter_css_exceptions("intelli");var e,t,s=F.intelliCompProps=F.un_flatten_css(F.intelliCompProps),r=F.pgInFocusWiz,a="";for(e in s[r])s[r].hasOwnProperty(e)&&(void 0!==(t=s[r][e])&&(a+='<span class="info-label '+e+'-info-label">'+e+':</span>\n<span class="info-value '+e+'-info-value">'+(t=t&&-1<t.toString().indexOf("rgb")?F.trans_gradient_box(t)+" "+I.maybe_to_hex(t):t)+"</span>",0))}else;D("#comp-"+r).find(".mt-expandable-panel").html(a);for(var o=F.templates.key_computed_info,n=0;n<E.keyInfoProps.length;n++){var i=E.keyInfoProps[n],l=v.compProps[i];!Array.isArray(l)&&l!==Object(l)||(l=l[0])!==Object(l)||(l=l.val),I.isDefined(l)?"color"===i||"background-color"===i?l=F.trans_gradient_box(l)+" "+I.maybe_to_hex(l):"font-size"!==i&&"line-height"!==i&&(l=l.replace(/px$/,"").replace(/^0$/,"-")):l="-",o=o.replace(new RegExp("{"+i+"}"),l)}D("#key-computed").html(o),I.endT(arguments)},un_flatten_css:function(e){I.startT(arguments);var t,s=[];for(t in F.cssProps)if(F.cssProps.hasOwnProperty(t))for(var r in s[t]=[],F.cssProps[t])F.cssProps[t].hasOwnProperty(r)&&("background-img-full"===(r=F.cssProps[t][r].cssf)||"extracted-gradient"===r||"google-font"===r||F.propAliases[r]||"order-grid"===r||"text-shadow"===r||"box-shadow"===r||"background-image"===r&&"gradient"===t||(s[t][r]=e[r]));return I.endT(arguments),s},ensure_backwards_compat:function(){I.startT(arguments),parseInt(F.pref.remove_all_bricks_container_hacks)&&(F.pref.manual_recompile_all_css=1);var e=parseInt(F.pref.manual_recompile_all_css);F.compile_non_compiled_selectors(!e),I.endT(arguments)},compile_non_compiled_selectors:function(e){F.uiData=T.filter_object_keys("clean",F.uiData,0);var t={M:{},settings:{keyFormatFixes:{sectionKeyChanges:{},actions:[]}},template:"ui",no_style_node_update:!0,compile_non_compiled:!0,passNum:1,dataFormattingFixesOnly:e,onlyRun:{recurse_key:["m_query"]},onlyLoop:{recurse_key:["m_query"]}},s={section:[{item:T.ensure_valid_folder_and_label,args:[!1]},{item:T.update_item_index,args:[!1]},{item:T.maybe_fix_key_format,args:[!1]}],selector:[{item:T.update_item_index,args:[!1]},{item:T.check_jsu,args:[!1]},{item:T.check_values,args:[!1]},{item:T.maybe_fix_key_format,args:[!1]}],group:[{item:T.check_values,args:[!1]}],property:[{item:T.update_property_values_structure,args:[!1]},{item:T.update_legacy_unit_structure,args:[!1]}]},e={section:[{item:T.update_dots,args:[!1]}],selector:[{item:T.check_jsu,args:[!e]},{item:T.update_dots,args:[!1]}],group:[{item:T.modify_item,args:["group_to_css",{dontUpdateSavePackage:e}]},{item:T.check_values,args:[!1]}]};parseInt(F.pref.remove_all_bricks_container_hacks)&&s.selector.push({item:T.remove_all_bricks_container_hacks,args:[!1]}),t.maxDepth="property",t.cb=s;s=T.run(F.uiData,t).settings;t.settings=s,t.maxDepth="group",t.cb=e,t.passNum++;var r=(s=T.run(F.uiData,t).settings).keyFormatFixes.actions;if(r.length)for(var a=0;a<r.length;a++)T.modify_main_js_object("rename",{},r[a]);F.client_scss?s=T.run_global_scans(s,["scss_types"]):I.checkObject(F.uiData,["non_section","scss_usage"])&&delete F.uiData.non_section.scss_usage,I.updateObject(F.uiData,["non_section","meta","fullCodeSelectors"],void 0),F.uiData.non_section.hand_coded_css&&!I.checkObject(F.uiData,["non_section","meta","fullCodeSelectors"])&&O.update_parsed_full_code_selectors(s),(s.savePackage&&s.savePackage.length||r.length)&&(s.savePackage=!1,s.fullSCSSCompile=F.client_scss,P.ajax_save_settings({settings:s,serialise:!0})),parseInt(F.pref.manual_recompile_all_css)&&(F.pref.manual_recompile_all_css=0,P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&manual_recompile_all_css=0"})),parseInt(F.pref.remove_all_bricks_container_hacks)&&(F.pref.remove_all_bricks_container_hacks=0,P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&remove_all_bricks_container_hacks=0"})),parseInt(F.pref.initial_view_set)||F.stat.tvr.width()<=796&&(I.toggle_radio_checkbox(D("#screen-layout-options").find('.switch-layout-preset[data-preset="S"]')),P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&initial_view_set=1"}))},load_visual_view:function(e){if(I.startT(arguments),F.forceNoLayoutSave=!0,q.update_num_items_docked("left"),q.update_num_items_docked("right"),q.adjust_preview_margin_and_save_config({skipSave:1,skipPGPress:1,side:"left"}),q.adjust_preview_margin_and_save_config({skipSave:1,skipPGPress:1,side:"right"}),O.init_editor_deps(),F.maybe_initiate_sass_js(),F.pref.theme_mode_set||F.set_default_theme_mode(),F.ensure_backwards_compat(),F.stat.body.addClass("tvr-visual"),F.pref.detach_preview||MTlocal.maybe_load_site_preview(),F.pref.returned_ajax_msg&&!F.pref.returned_ajax_msg_seen)for(var t in F.pref.returned_ajax_msg)F.pref.returned_ajax_msg.hasOwnProperty(t)&&P.log(F.pref.returned_ajax_msg[parseInt(t)]);window.history.pushState&&parseInt(D("#clean-ui-url").attr("rel"))&&window.history.pushState(F.uiUrl,null,F.uiUrl),O.bind_editor(F.stat.inlineEditor,{filterClass:"custom-css-pre",mode:parseInt(F.pref.allow_scss)?"scss":"css",M:"css",directContent:"pending"}),d.bind_gridstack(),F.default_to_tab("mq"),F.default_to_sel({elementAlreadySelected:F.pref.show_code_editor}),F.toggle_enabled_buttons(),F.set_initial_size_of_nth_modifier_inputs(),F.pref.detach_preview&&q.retrieve_or_load_detached(),MTlocal.apply_rulers(),F.pref.show_code_editor&&F.default_to_tab("css"),window.launchMTUnlock&&F.show_dialog(D("#mt-renew-prompt")),F.adjust_scroll_buttons(!1,"responsive"),p.maybe_update_available_builder_name(),F.forceNoLayoutSave=!1,F.innoFireall&&F.show_dialog(D("#status-and-settings").find(".unlock-pro-version")),F.page_load_debug(),I.endT(arguments)},page_load_debug:function(){},scss_div:"/*MTSCSSPART*/",sass_preloaded_files:[],sass_worker_to_mt_dir:"../../../../micro-themes/",maybe_initiate_sass_js:function(){F.client_scss&&(F.sass=new Sass,F.uiData.non_section.hand_coded_css,F.sass.options({style:Sass.style.expanded,indent:"\t"},function(){}),F.sass.importer(function(e,t){var s=e.resolved.replace("/sass/",""),r=F.check_file_exists(s,!0);r?I.in_array(r,F.sass_preloaded_files)?t({path:e.path}):P.simple_ajax_request({url:F.ajaxUrl+"&load_sass_import="+encodeURI(r),dataType:"json",plus:TvrLang.loading_sass_import,minus:TvrLang.loading_sass_import_failed,cbFunction:function(t,s){F.sass.writeFile(r,t.content,function(e){F.sass_preloaded_files.push(r),s({content:t.content})})},cbfArgs:[t]}):t({error:"Import failed, no file found: "+s+". Try refreshing Microthemer if path is definitely correct."})}),F.sass.writeFile(TvrMT.data.dyn.preloaded_sass_imports,function(e){F.sass_preloaded_files=Object.keys(TvrMT.data.dyn.preloaded_sass_imports),TvrMT.data.dyn.preloaded_sass_imports=null,F.sass.compile(F.uiData.non_section.hand_coded_css,function(e){})}))},parse_scss_or_css:function(e,t){t=t||"scss";try{return window.TvrSCSS.parse(e,{syntax:t})}catch(e){}return!1},stringify_scss:function(e){return e.toString()},normalise_scss_type_name:function(e,t){return I.in_array(e,["variable","mixin","function"])?t.replace(/-/g,"_"):t},get_ast_child_node:function(e,t,s){for(var r=0;r<e.length;r++){var a=e[r];if(a.type===t)return s?a[s]:a}return!1},get_variable_node_data:function(e,t,s,r){var a=t.content[0].content,o=t.insideFM||r.insideFM,n=r.isRelatedType;if("property"===s.type){var i="";if((s=F.get_ast_child_node(s.parent.content,"value"))&&(e={value:i=s.toString()}),n&&!F.is_scss_global_var(i))return!(r.localDecs[a]=1)}else if(n&&(r.localDecs[a]||t.insideArg&&!t.insideDec))return!(r.localDecs[a]=1);return!(o&&r.onlyGlobalVars&&!F.is_scss_global_var(e.value)&&!F.is_scss_default_var(e.value))&&{name:a,value:e}},is_scss_global_var:function(e){return"string"==typeof e&&-1<e.indexOf("!global")},is_scss_default_var:function(e){return"string"==typeof e&&-1<e.indexOf("!default")},get_scss_types:function(c){var e=c.parseTree||F.parse_scss_or_css(c.code,"scss");if(!e)return"parseFail";F.parseTreeDone||(F.parseTreeDone=!0);var d={},_=c.types||F.scss_types,u=!1;return e.traverse(function(e,t,s){var r=e.type,a=!1,o={value:1};("mixin"===r||s&&s.insideFM||"atrule"===r&&F.get_ast_child_node(e.content,"function"))&&(e.insideFM=1),("arguments"===r||s&&s.insideArg)&&(e.insideArg=1),("declaration"===r||s&&s.insideDec)&&(e.insideDec=1);var n=c.isRelatedType&&!I.in_array(r,["property","variable","extend"]);if(!I.in_array(r,_)||n)return!1;switch(r){case"atkeyword":if("import"!==(r=F.get_ast_child_node(e.content,"ident","content")))return!1;l=F.get_ast_child_node(s.content,"string","content");break;case"property":return e.parent=s,!1;case"variable":var i=F.get_variable_node_data(o,e,s,c);if(!i)return!1;l=i.name,o=i.value;break;case"function":if(l=e.content[0].content,I.in_array(l,E.css_functions))return!1;"atrule"===s.type&&(o={value:s.toString()},a={node:s,parent:s});break;case"mixin":l=F.get_ast_child_node(e.content,"ident","content"),o={value:e.toString()},a={node:e,parent:s};break;case"include":r="mixin",l=F.get_ast_child_node(e.content,"ident","content");break;case"extend":var l=F.get_ast_child_node(e.content,"selector").toString(),o={value:"extender"}}l=F.normalise_scss_type_name(r,l),I.checkObject(d,[r,l,"values"])||I.updateObject(d,[r,l,"values"],[]),d[r][l].values.push(o.value),c.isRelatedType||!a||(n=F.get_scss_types({isRelatedType:1,parseTree:a.node,types:["property","variable","extend","include","function"],localDecs:{},insideFM:1}))&&(d[r][l].related_types=n),1!==o.value&&(d[r][l].value=o.value,d[r][l].hasDeclaration=1),u=!0}),!!u&&d},maybe_merge_related_types:function(e,t){t&&(e.related_types||(e.related_types={}),e.related_types=D.extend(!0,e.related_types,t))},cross_update_related_types:function(e,t,s){for(var r=Object.keys(s),a=0;a<r.length;a++)for(var o=r[a],n=Object.keys(s[o]),i=0;i<n.length;i++){var l=n[i];I.checkObject(e,[o,l])||I.updateObject(e,[o,l],{}),F.maybe_merge_related_types(e[o][l],t)}},log_all_scss_usage:function(e,t,s,r,a){for(var o=Object.keys(s),n=0;n<o.length;n++)for(var i=o[n],l=s[i],c=Object.keys(l),d=0;d<c.length;d++){var _=c[d],u=D.extend(!0,{},s[i][_]),p=u.values,g=u.value,f=u.related_types;I.checkObject(t,[i,_,"deps"])||I.updateObject(t,[i,_,"deps"],[]),I.checkObject(t,[i,_,"values"])||I.updateObject(t,[i,_,"values"],[]);var m=t[i][_];p&&(m.values=m.values.concat(p)),f&&(F.maybe_merge_related_types(m,f),I.updateObject(p={},[i,_],{}),F.cross_update_related_types(t,p,f)),g&&(m.finalDecVal=g,m.type=g?E.checkStringValue(g):"unknown");f={};g&&(f.hasDeclaration=1),e&&(D.extend(!0,f,{trail:r.trail.selector,mq_key:r.recurse.mq_key,sectionSlug:r.section_key,selectorSlug:r.selector_key}),m.deps.push(f));var v=u.locMeta;if(v){var h=Object.keys(v);for(k=0;k<h.length;k++){var b=h[k],y=D.extend(!0,{},v[b]),w=y.trail.join(".");I.checkObject(m,["locDone",w])||(m.deps.push(y),I.updateObject(m,["locDone",w],1),"removed"===y.action&&T.updateObjectAndSavePackage(r.settings.savePackage,[{action:"delete",trail:r.trail.item.concat(["scss_types","extend",_,"locMeta"]),key:b}]))}}}},get_raw_scss_or_selector:function(e,t){return e.raw_scss||(t||e).label.split("|")[1]+" {\n\n}\n"},tag_extended:function(e,t,s){if(!e.settings.extend)return!1;for(var r=e.settings.extend,a=Object.keys(r),o=F.uiData[e.section_key][e.selector_key],n=F.get_raw_scss_or_selector(t,o),i=0;i<a.length;i++){var l=a[i],c=r[l],d=c.action;if(F.extender_match(l,n)&&c.actions)for(var _=0;_<c.actions.length;_++){d=c.actions[_].action,e.settings.active_scss_types||(e.settings.active_scss_types={}),I.checkObject(e.settings.active_scss_types,["extend",l,"locMeta"])||I.updateObject(e.settings.active_scss_types,["extend",l,"locMeta"],{});var u=e.trail.selector.join(".");e.settings.active_scss_types.extend[l].locMeta[u]={action:d,trail:e.trail.selector,mq_key:s,sectionSlug:e.section_key,selectorSlug:e.selector_key}}}},log_all_scss_selectors:function(e,t,s){var r=e.settings.deps,a=(a=t.raw_scss)||"",o=e.trail.selector,n=e.section_key,t=F.get_selector_index_from_trail(n,o);r[s][t]={code:a,mq_key:s,sectionSlug:n,selectorSlug:e.selector_key,trail:o}},scss_types:["variable","function","mixin","include","extend","property","atkeyword"],prev_full_code_scss_types:{},compare_scss_types:function(e,t){t=t||{};for(var s=D.extend(!0,{},e=e||{}),r=Object.keys(t),a=0;a<r.length;a++){var o=r[a],n=Object.keys(t[o]);e[o]||(s[o]={});for(var i=0;i<n.length;i++){var l=n[i],c=F.get_value_from_possible_object(I.checkObject(e,[o,l])),d=F.get_value_from_possible_object(t[o][l]);!1===c?s[o][l]={action:"added",actions:F.compare_add_remove_values(I.checkObject(e,[o,l,"values"]),I.checkObject(t,[o,l,"values"])),value:d,form:I.checkObject(v,[o,l,"hasDeclaration"])?"declaration":"instance"}:c===d&&delete s[o][l]}}for(var _=!1,u=Object.keys(s),p=0;p<u.length;p++)for(var o=u[p],n=Object.keys(s[o]),g=0;g<n.length;g++){var f,m,v,h,b,_=!0,l=n[g];"added"!==s[o][l].action&&(b=F.get_value_from_possible_object(I.checkObject(t,[o,l])),f=F.get_value_from_possible_object(I.checkObject(e,[o,l])),m=b?"changed":"removed",h=b||f,b=I.checkObject(v=b?t:e,[o,l,"hasDeclaration"])?"declaration":"instance",b={action:m,actions:F.compare_add_remove_values(I.checkObject(e,[o,l,"values"]),I.checkObject(t,[o,l,"values"])),value:h,form:b},"changed"==m&&(b.oldValue=f),s[o][l]=b)}return!!_&&s},compare_add_remove_values:function(e,t){var s=[];return I.compare_array_values(t,e,"added",s),I.compare_array_values(e,t,"removed",s),!!s.length&&s},get_value_from_possible_object:function(e){return e===Object(e)?I.combine_array_values(e.values):e},get_co_dependent_types:function(e,t,s){var r={},a=!1,o=["extend"];if(t||o.push("variable"),e)for(var n=0;n<o.length;n++){var i=o[n],l=I.checkObject(e,[i]);l&&(r[i]=l,a=!0)}return!s||(s=F.get_extenders(s))&&(D.extend(!0,r,s),a=!0),!!a&&r},get_changed_and_co_dependents_types:function(e,t,s,r){var a=F.get_co_dependent_types(t,s,r);return!(!e&&!a)&&{changed:e,co_types:F.get_co_dependent_types(t,s,r)}},extender_match:function(e,t){e=I.escapeRegExp(e),e=new RegExp("(?<!@extend\\s)"+e+"(?:[\\s{,]+)");return t.match(e)},get_extenders:function(e){var t=I.checkObject(F.uiData,e.split("."));if(!t)return!1;e=I.checkObject(F.uiData,["non_section","scss_usage","extend"]);if(!e)return!1;for(var s=F.get_raw_scss_or_selector(t),r=!1,a=Object.keys(e),o={extend:{}},n=0;n<a.length;n++){var i=a[n];F.extender_match(i,s)&&(o.extend[i]={},r=!0)}return!!r&&o},cachedDeps:!1,prepare_scss_sources_obj:function(){return{sectionNodes:{},deps:F.cachedDeps||F.prepare_dependent_sels_obj(),fullstring:"",parts:[]}},add_selective_sources:function(e,t,s){var r=F.get_changed_and_co_dependents_types(t.scss_types_changed,t.scss_types,t.codeEditorEdited,t.selIdentifier);s?(e.fullstring+=t.code+F.scss_div,e.parts.push(t)):(o=t.sectionIndex+t.index,e.deps[t.mq_key][o]=t);var a=I.checkObject(F.uiData,["non_section","scss_usage"]),s={selsAdded:{},relatedTypesChecked:{}},o=Object.keys(TvrMQsCombined);r&&a&&(e.deps=F.gather_dependent_selectors(e,r,a,s)),"hand_coded_css"!==t.editor_slug&&(t.scss_types||1<e.numSels)?(!(t=I.checkObject(F.uiData,["non_section","code_editors","hand_coded_css","scss_types"]))||(t=F.get_co_dependent_types(t,!1,!1))&&(e.deps=F.gather_dependent_selectors(e,{co_types:t},a,s)),F.scss_deps_to_string_parts(e,e.deps,o),F.add_full_code_scss_part(e)):F.scss_deps_to_string_parts(e,e.deps,o)},prepare_dependent_sels_obj:function(e,t){e=e||{},t=t||Object.keys(TvrMQsCombined);for(var s=0;s<t.length;s++)e[t[s]]=[];return e},gather_dependent_selectors:function(e,t,s,r){for(var a=e.deps,o=Object.keys(t),n=0;n<o.length;n++){var i=o[n];if(t[i])for(var l=Object.keys(t[i]),c=0;c<l.length;c++)for(var d=l[c],_=Object.keys(t[i][d]),u=0;u<_.length;u++){var p=_[u],g=t[i][d][p],f="changed"===i?g:{};I.checkObject(r.relatedTypesChecked,[d,p])||(I.updateObject(r.relatedTypesChecked,[d,p],1),(g=I.checkObject(s,[d,p,"related_types"]))&&(a=F.gather_dependent_selectors(e,{related_types:g},s,r)));var m=I.checkObject(s,[d,p,"deps"]);if(m&&0<m.length)for(var v,h,b,y,w,T=m.length-1;0<=T;T--)m[T]&&(h=(v=D.extend(!0,{},m[T])).action,b=v.hasDeclaration,"changed"===i&&f.form,"co_types"===i&&"variable"===d&&!b||(w=(y=v.trail).join("."),r.selsAdded[w]||(b=I.checkObject(F.uiData,y))&&(y=F.get_selector_index_from_trail(v.sectionSlug,y),v.code=F.get_raw_scss_or_selector(b),a[v.mq_key][y]=v,r.selsAdded[w]=1,e.numSels++,(w=F.get_co_dependent_types(b.scss_types,!1,w))&&(a=F.gather_dependent_selectors(e,{co_types:w},s,r))),h&&("removed"===h?m.splice(T,1):"added"===h&&delete v.action)))}}return a},toggle_scss_import_compile_note:function(e){"show"===e?(F.stat.scss_compile_notes.hide(),F.stat.scss_import_compile_notes.show()):(F.stat.scss_compile_notes.show(),F.stat.scss_import_compile_notes.hide())},log_client_scss_error:function(e,t,s,r){var a=t.file&&"stdin"!==t.file;if(e)return a?(n=F.check_file_exists(t.file.replace("/sass/",""),!0),F.sass.readFile(n,function(e){F.log_client_scss_error(!1,t,e,r)}),F.toggle_scss_import_compile_note("show"),F.stat.scss_error_file.text(n)):(F.log_client_scss_error(!1,t,F.previousSCSSCompile,r),F.toggle_scss_import_compile_note("hide")),!1;var o=TvrLang.scss_error_line,e=F.stat.view.find(".tab-field-scss_compile").attr("rel"),n=a?F.stat.scss_import_compile_notes.html():"",a=t.message.replace(r,"");F.scss_error={log:{short:TvrLang.scss_error,long:"<p>"+TvrLang.scss_error_long+'.</p><p style="font-weight: bold">'+a+".</p>"+n+'<p><span id="scss-line-error" class="link show-dialog" rel="display-css-code" data-tab="'+e+'" data-line="'+t.line+'" title="'+o+'">'+o+"</span></p>"},tabKey:e,fullString:s},P.update_full_logs(F.scss_error.log),D.extend(!0,F.scss_error,t),F.stat.tvr.addClass("cur_scss_error")},clear_client_scss_error:function(){P.clear_messages(),F.stat.tvr.removeClass("cur_scss_error"),F.scss_error=!1,F.toggle_scss_import_compile_note("hide"),F.dialog_tab_pressed(F.stat.view.find("span.dialog-tab-"+F.pref.generated_css_focus))},scssCompileNext:{},compileQueue:[],enqeueCompile:function(e){F.compileQueue.push(e)},deqeueCompile:function(){F.compileQueue.shift()},pendingCompile:function(){return F.compileQueue[0]||!1},mt_compile_scss:function(s,r,a,e,o){if(F.compilingSCSS)return F.enqeueCompile([s,r,a,e,o]),!1;I.startT("prep_and_compile_scss"),I.startT("prep_scss"),F.compilingSCSS=!0;var n=s.settings,t=n.preprocessor,i=F.prepare_scss_sources_obj(),l=n.fullSCSSCompile||t.importChanged||F.fullCompileNeeded;F.fullCompileNeeded=l,i.numSels=0,l&&!F.scssCompileNext.run?(P.update_prog_indicator("plus",TvrLang.compile_scss),F.scss_compile_everything(i)):F.add_selective_sources(i,t,e),F.cachedDeps=D.extend(!0,{},i.deps),I.endT("prep_scss"),I.startT("compile_scss"),F.sass.compile(i.fullstring,function(e){l&&P.update_prog_indicator("minus",!1,TvrLang.compile_scss),I.endT("compile_scss"),I.endT("prep_and_compile_scss"),F.compilingSCSS=!1,I.startT("post_scss_node_update_or_error");var t=new RegExp(I.escapeRegExp(F.scss_div),"g");F.previousSCSSCompile=i.fullstring.replace(t,""),e.status&&3!==e.status?(F.log_client_scss_error(!0,e,!1,t),s.sassCompileError=1):(F.fullCompileNeeded=!1,F.scss_error&&F.clear_client_scss_error(),n=F.update_nodes_with_compiled_css(n,i,e),F.cachedDeps=!1),I.endT("post_scss_node_update_or_error"),I.endT("user_input_to_style_render",1);e=F.pendingCompile();if(e)return F.deqeueCompile(),F.mt_compile_scss.apply(this,e),!1;P.save_or_start_timer(s,r,a,o)})},update_nodes_with_compiled_css:function(e,t,s){var s=s.text?s.text.trim():"",r=F.extract_compiled_parts(s),a="";";"===r[r.length-1]&&r.pop(),t.parts.length,r.length;for(var o=0;o<r.length;o++){var n,i,l=t.parts[o];l.isJunk||l.trail&&!I.checkObject(F.uiData,l.trail)||(n=l.compiled_css_trail||l.trail.concat(["compiled_css"]),a=r[o].trim()+"\n",l.node_trail&&(a=a.replace(P.full_editor_placeholder_comment,"")),i={action:"replace",trail:n,data:a=F.apply_sass_post_css(a)},e.savePackage?T.updateObjectAndSavePackage(e.savePackage,i):I.updateObject(F.uiData,n,a,i),l.node_trail&&v&&v.update_preview_style_node(l.node_trail,a))}for(var c=Object.keys(t.sectionNodes),d=0;d<c.length;d++){var _=c[d].split("."),u=_[0],p=_[1],_=[u,p];a=T.get_section_css(!1,!1,T.get_js_object_data([p],u).data),v&&v.update_preview_style_node(_,a,T.get_media_query(u))}return e},apply_sass_post_css:function(e){e=E.parse_css(e,!0);return e.stylesheet.rules=E.add_final_compile_data(e.stylesheet.rules),E.stringify_css(e,{opts:{},tabDepth:0,tab:""})},get_selector_index_from_trail:function(e,t){e=F.get_section_index(e),t=2<t.length?t.slice(Math.max(t.length-2,1)):t;return e+F.get_selector_index(t)},scss_deps_to_string_parts:function(e,t,s){for(var r=0;r<s.length;r++){var a,o,n,i,l=s[r],c=t[l].filter(Boolean),d="all-devices"!==l&&c.length,_=d?"\t":"";for(o in d&&(l="\n\n/*( "+(a=F.pref.m_queries[l]).label+" )*/\n",e.fullstring+=l+a.query+" {\n"+F.scss_div,e.parts.push({isJunk:!0})),c)c.hasOwnProperty(o)&&(n=c[o],I.checkObject(F.uiData,[n.sectionSlug,n.selectorSlug])&&(i="\n"+_+"/** "+F.get_section_name(n.sectionSlug)+" >> "+F.get_selector_name([n.sectionSlug,n.selectorSlug])+" **/\n"+_+F.scss_div,e.fullstring+=i,e.parts.push({isJunk:!0}),"all-devices"!==n.mq_key&&(n.code=n.code.replace(/\n/g,"\n\t")),e.fullstring+=n.code+F.scss_div,e.parts.push({trail:n.trail,mq_key:n.mq_key}),e.sectionNodes[n.mq_key+"."+n.sectionSlug]=1));d&&(e.fullstring+="\n}\n"+F.scss_div,e.parts.push({isJunk:!0}))}},add_full_code_scss_part:function(e){if(!F.uiData.non_section.hand_coded_css)return!1;var t=E.get_trail_from_name("tvr_mcth[non_section][hand_coded_css_compiled]"),s=D.extend([],t),r="/*= Full Code Editor CSS ============ */\n\n"+F.scss_div;e.fullstring=F.uiData.non_section.hand_coded_css+F.scss_div+e.fullstring,e.parts.unshift({compiled_css_trail:t,node_trail:s}),e.fullstring=r+e.fullstring,e.parts.unshift({isJunk:!0})},scss_error:!1,scss_compile_everything:function(e){F.add_full_code_scss_part(e),e.deps=T.run_global_scans({},["get_all_scss"]).deps,F.scss_deps_to_string_parts(e,e.deps,Object.keys(TvrMQsCombined))},get_section_name:function(e){return I.checkObject(F.uiData,[e,"this","label"])},get_selector_name:function(e){return I.checkObject(F.uiData,e.concat(["label"])).split("|")[0]},get_section_index:function(e){return I.checkObject(F.uiData,[e,"this","index"])},get_selector_index:function(e){return I.checkObject(F.uiData,e.concat(["index"]))},check_update_scss_changes:function(e,t){var s=this.get_scss_types(t);if("parseFail"===s)return!1;var r=I.checkObject(F.uiData,t.scss_types_trail),a=F.compare_scss_types(r,s);if(a){if(0<I.obj_length(a.extend)&&(F.search_scss_extendable_selectors(e,t,a.extend,s),s=e.active_scss_types),s.extend)for(var o=Object.keys(s.extend),n=0;n<o.length;n++){var i=o[n];I.checkObject(a,["extend",i])||(s.extend[i]=r.extend[i])}T.updateObjectAndSavePackage(e.savePackage,{action:"replace",trail:t.scss_types_trail,data:s})}return a},search_scss_extendable_selectors:function(e,t,s,r){e.extend=s,e.active_scss_types=r,t.mq_key&&(e.mq_key=t.mq_key);t=T.run_global_scans(e,["tag_extended"]);e.active_scss_types=t.active_scss_types},extract_compiled_parts:function(e){return e.split(F.scss_div).filter(Boolean)},check_file_exists:function(e,t){var s=TvrMT.data.dyn.micro_files,r=e.split("/"),a=r.length-1,e=r[a],o=[r];if(t)for(var t=(t=I.file_extension(e))&&t[1],e=I.strip_extension(e).replace("_",""),n=t?[t]:["scss","sass","css"],i=[e,"_"+e],o=[],l=0;l<n.length;l++)for(var c=0;c<i.length;c++){var d=i[c],_=n[l],u=D.extend([],r);u[a]=d+"."+_,o.push(u)}for(var p=0;p<o.length;p++){var g=o[p];if(I.checkObject(s,g))return g.join("/")}return!1},toggle_enabled_buttons:function(){I.startT(arguments),F.totalSels<1&&(F.reset_global_vars(),D("#starter-message").removeClass("hidden"),D("#quick-nav").addClass("hidden"),F.stat.tvr.removeClass("tvr-sels-exist").addClass("tvr-no-sels")),0<F.totalSels&&(D("#starter-message").addClass("hidden"),D("#quick-nav").removeClass("hidden"),F.stat.tvr.addClass("tvr-sels-exist").removeClass("tvr-no-sels")),I.endT(arguments)},remember_page_viewed:function(e){if(I.startT(arguments),!v)return!1;if(!(t=e||v.get_current_url()))return!1;var t=I.strip_page_builder_and_other_params(t),s=I.extract_url_path(t,F.blog_details);if(I.hasValue(t)&&!F.placeholderFrame){var r=v.get_current_page_title(s,!0);"Untitled"===r&&(r=s),P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&mt_preview_url="+encodeURIComponent(t)+"&mt_preview_path="+encodeURIComponent(s)+"&mt_path_label="+r+"&mt_item_id="+F.pageOrPostID}),F.stat.changeUrlInputWrap.find("input").val(""),D("#back-to-frontend").attr("href",t),F.pref.preview_url=t,D("#pref-preview-url-input").val(t);var a=TvrMT.data.prog.combo.custom_paths,t=I.in_array(s,a,!1,"value");t&&a.splice(t,1);for(var o=a.length-1;0<=o;o--)a[o].label===r&&a.splice(o,1);a.unshift({value:s,label:r}),TvrMT.data.prog.combo.custom_paths=a.slice(0,8)}I.endT(arguments)},remember_css_import_file:function(){I.startT(arguments);var e=D("#stylesheet_to_import").val();if(!I.hasValue(e))return!1;P.simple_ajax_request({type:"GET",url:F.ajaxUrl+"&import_css_url="+encodeURI(e)});var t=I.in_array(e,TvrMT.data.prog.combo.viewed_import_stylesheets);!1!==t&&TvrMT.data.prog.combo.viewed_import_stylesheets.splice(t,1),TvrMT.data.prog.combo.viewed_import_stylesheets.unshift(e),I.endT(arguments)},exclStylesheetSubStrings:{always:[{str:"wp-includes/css",unless:null},{str:"wp-includes/js"},{str:"admin-bar"},{str:"dashicons"},{str:"font-awesome"},{str:"genericons"},{str:"microthemer/css/frontend"},{str:"animate.min.css"},{str:"fonts.googleapis.com"},{str:"elementor/assets",unless:"frontend.min.css"}],FLBuilder:[{str:"bb-plugin/css"},{str:"foundation-icons"}],oxygen:[{str:"component-framework/vendor"},{str:"component-framework/toolbar"},{str:"wp-includes/js/tinymce"},{str:"jquery-ui.css"},{str:"buttons.min.css"},{str:"mediaelementplayer-legacy.min.css"},{str:"wp-mediaelement.min.css"},{str:"imgareaselect.css"},{str:"wp-includes/css/editor.min.css"}]},ignore_stylesheet:function(e,t){if(!e)return!(!t.ownerNode||"ct_svg_sets"!==t.ownerNode.className);var s,r=F.exclStylesheetSubStrings;for(s in r)if(r.hasOwnProperty(s)&&("always"===s||TvrMT.integrate[s]))for(var a in r[s])if(r[s].hasOwnProperty(a)){a=r[s][a];if(-1<e.indexOf(a.str)&&(!a.unless||e.indexOf(a.unless)<0))return!0}return!1},filter_excluded_stylesheets:function(e){for(var t=e.length-1;0<=t;t--)F.ignore_stylesheet(e[t].href,e[t])&&e.splice(t,1);return e},refresh_stylesheet_list:function(e){var t,e=e.siblings("input"),s=v.stat.doc.styleSheets,r=["admin-bar","dashicons","genericons","microthemer/css/frontend"],a=[];for(t in s)if(s.hasOwnProperty(t)){var o=s[t].href,n=!1;if(o){for(var i in r)if(r.hasOwnProperty(i)&&-1<o.indexOf(r[i])){n=!0;break}n||a.push(o)}}TvrMT.data.prog.combo.viewed_import_stylesheets=D.extend(!0,[],a),e.focus().MTautocomplete().MTautocomplete("search","")},update_prev_next_sel_buttons:function(e){if(I.startT(arguments),!e)return D("#vb-focus-prev, #vb-focus-next").addClass("disabled"),!1;var t=F.slugs_from_id(e),s=D("#vb-focus-prev"),r=D("#vb-focus-next"),a=F.itemScan("selector","prev","getID",t.sectionSlug,t.selectorSlug,{incCurrentSection:!0}),t=F.itemScan("selector","next","getID",t.sectionSlug,t.selectorSlug,{incCurrentSection:!0});a?s.removeClass("disabled"):s.addClass("disabled"),t?r.removeClass("disabled"):r.addClass("disabled"),I.endT(arguments)},itemScan:function(e,t,s,r,a,o){var n=(o=o||{}).incCurrentSection?"IncCurrent":"",i=I.editArray(Object.keys(F.uiData),"non_section","remove"),i=I.editArray(i,r,t+"Items"+n);"prev"===t&&i.reverse();for(var l=0;l<i.length;l++){var c=i[l];if("section"===e)switch(s){case"getPreviousNode":var d=T.format_css_node_id([o.mq_key,c]),d=v.frontend_jquery_select("#"+d);if(I.isDomEl(d))return d;break;case"getID":return"strk-"+c}if("selector"===e){var _=I.editArray(Object.keys(F.uiData[c]),"this","remove"),_=r===c?I.editArray(_,a,t+"Items"):_;"prev"===t&&_.reverse();for(var u=0;u<_.length;u++){var p=_[u];switch(s){case"getPreviousNode":var g=T.format_css_node_id([o.mq_key,c,p]),g=v.frontend_jquery_select("#"+g);if(I.isDomEl(g))return g;break;case"getID":return"strk-"+c+"-"+p}}}}switch(s){case"getPreviousNode":return v.frontend_jquery_select("#"+T.format_css_node_id([o.mq_key]));case"getID":return!1}return!1},itemScanOld:function(e,t,s,r,a){var o=(a=a||{}).incCurrentSection?"IncCurrent":"",n=I.editArray(Object.keys(F.uiData),"non_section","remove"),n=I.editArray(n,s,e+"Items"+o);"prev"===e&&n.reverse();for(var i=0;i<n.length;i++){var l=n[i],c=I.editArray(Object.keys(F.uiData[l]),"this","remove"),c=s===l?I.editArray(c,r,e+"Items"):c;"prev"===e&&c.reverse();for(var d=0;d<c.length;d++){var _=c[d];switch(t){case"getPreviousNode":var u=T.format_css_node_id([a.mq_key,l,_]),u=v.frontend_jquery_select("#"+u);if(I.isDomEl(u))return u;break;case"getID":return"strk-"+l+"-"+_}}}switch(t){case"getPreviousNode":return v.frontend_jquery_select("#"+T.format_css_node_id([a.mq_key]));case"getID":return!1}return!1},tvr_iterate_selectors_v:function(e,t,s){if(I.startT(arguments),"add_draft_selector"!==(s=s||{}).action&&F.cancel_draft_selector_edit(),t=t||e.attr("id"),e=e||D("#"+t),!I.isDomEl(e,!0))for(var r=F.slugs_from_id(t),a="strk-"+r.sectionSlug+"-"+r.selectorSlug,o=D("#strk-"+r.sectionSlug),r={sectionSlug:r.sectionSlug,sectionM:o},n=F.load_folder_menu_selectors(r),i=0;i<n.length;i++){var l=D(n[i]);l.attr("id")===a&&(e=l)}F.stat.opts.add(F.stat.mainMenu).find("li.in-focus").removeClass("in-focus");o=F.get_meta(e,"selector");o.sectionM.hasClass("is-open")||F.open_folder(o,!0);r=F.load_selector(o,{items:["selector"]});(o=F.get_meta(r,"selector")).selector.add(o.selectorM).add(o.section).add(o.sectionM).addClass("in-focus"),F.update_global_vars(o),F.unload_all_option_selectors(),F.update_prev_next_sel_buttons(o.selectorID),F.maybe_default_to_pg(s),F.js_check_values({},o),F.selector_check_disabled(o),q.toolbar_adjusted(),v&&!s.elementAlreadySelected&&(s.existingSelCSS=I.custom_escape_quotes(F.curSelCSS),s.selMID=o.selectorMID,v.select_current_selector_elements(s)),I.endT(arguments)},iframe_functions_loaded:function(){return v},maybe_default_to_pg:function(e){var t=F.pref.pg_focus;F.pg_icon_pressed(F.stat.css_icons.find(t?".pg-icon-"+t:".pg-icon-font"),!0,e)},quick_nav:function(e){if(I.startT(arguments),e.hasClass("disabled")||!F.selInFocusID)return!1;var t=F.get_meta(D("#"+F.selInFocusID),"selector"),s="vb-focus-prev"===e.attr("id")?"prev":"next";F.tvr_iterate_selectors_v(!1,F.itemScan("selector",s,"getID",t.sectionSlug,t.selectorSlug,{incCurrentSection:!0}),{doNotBringStylesTop:1})},set_vars:function(){v=TvrMT.MTF,u=window.TvrMT.MTdetached,s=window.TvrMT.detachedWin}};var F=TvrMT.TvrUi;MTlocal.set_vars(),I.set_vars(),O.set_vars(),p.set_vars(),T.set_vars(),E.set_vars(),P.set_vars(),e.set_vars(),d.set_vars(),m.set_vars(),q.set_vars(),F.init()});